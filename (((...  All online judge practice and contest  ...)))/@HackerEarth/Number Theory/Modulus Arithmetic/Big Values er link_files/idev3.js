function reset_editor(){launch_count=new Array,id=new Array,editor=new Array,$tabs=null,tabs_open=new Array,current_tab_id=null,tabs_info={},current_theme=null,editor_global=null,EditSession=require("ace/edit_session").EditSession,UndoManager=require("ace/undomanager").UndoManager,Selection=require("ace/selection").Selection}function overridePasteEvent(a,b){if(a.$readOnly)return;if($("#disable-copy-paste-in-editor").length)return;a._emit("paste",b);if(!a.inMultiSelectMode)return a.insert(b);var c=b.split(/\r\n|\r|\n/),d=a.selection.rangeList.ranges;if(c.length>d.length||c.length<=2||!c[1])return a.commands.exec("insertstring",a,b);for(var e=d.length;e--;){var f=d[e];f.isEmpty()||a.session.remove(f),a.session.insert(f.start,c[e])}}function set_source_for_tab_id(a,b){var c;if(!tabs_info[a])return;c=tabs_info[a].session,c.on("change",function(a){update_height(c)});var d=get_private_hash(),e=d+"_"+tabs_info[a].lang,f=get_from_local_storage(e);set_source(a,b,f),bind_tab_source_edit_event(a)}function create_tab(a,b,c,d){tabDropDown=$("#tabs-dropdown-menu");if(a in tabs_info){current_tab_id=a,$tabs.tabs("select","#tabs-"+a),tabDropDown.val("#tabs-"+a),update_height(editor_global.getSession());return}tabs_open[a]="#tabs-"+a,current_tab_id=a,$tabs.tabs("add","#tabs-"+a,c),$tabs.tabs("select","#tabs-"+a),tabDropDown.append("<option value=#tabs-"+a+">"+c+"</option>"),tabDropDown.val("#tabs-"+a),tabDropDown.trigger("change"),editor_global||(editor_global=ace.edit("editor-global"),editor_global.onPaste=function(a){overridePasteEvent(this,a)});var e=$("#"+a).attr("lang");source="Loading...";var f=new EditSession(source);f.setUndoManager(new UndoManager),editor_global.setSession(f),editor_global.$blockScrolling=Infinity;var g=null;langKeywordsFunc=null;try{e=="C"?(g=require("ace/mode/c_cpp").Mode,langKeywordsFunc=c_completer):e=="CPP"||e=="CPP11"?(g=require("ace/mode/c_cpp").Mode,langKeywordsFunc=cpp_completer):e=="PYTHON"?(g=require("ace/mode/python").Mode,langKeywordsFunc=python_completer):e=="PYTHON3"?g=require("ace/mode/python").Mode:e=="PERL"?(g=require("ace/mode/perl").Mode,langKeywordsFunc=perl_completer):e=="PASCAL"?(g=require("ace/mode/pascal").Mode,langKeywordsFunc=pascal_completer):e=="JAVA"||e=="JAVA8"?(g=require("ace/mode/java").Mode,langKeywordsFunc=java_completer):e=="RUBY"?(g=require("ace/mode/ruby").Mode,langKeywordsFunc=ruby_completer):e=="GO"?(g=require("ace/mode/golang").Mode,langKeywordsFunc=go_completer):e=="PHP"?(g=require("ace/mode/php").Mode,langKeywordsFunc=php_completer):e=="CSHARP"||e=="FSHARP"?(g=require("ace/mode/csharp").Mode,langKeywordsFunc=csharp_completer):e=="HTML"?g=require("ace/mode/html").Mode:e=="CSS"?g=require("ace/mode/css").Mode:e=="JAVASCRIPT"||e=="JAVASCRIPT_UI"||e=="JAVASCRIPT_NODE"?g=require("ace/mode/javascript").Mode:e=="HASKELL"?(g=require("ace/mode/haskell").Mode,langKeywordsFunc=haskell_completer):e=="CLOJURE"?(g=require("ace/mode/clojure").Mode,langKeywordsFunc=clojure_completer):e=="SCALA"?(g=require("ace/mode/scala").Mode,langKeywordsFunc=scala_completer):e=="TEXTFILE"?g=require("ace/mode/html").Mode:e=="BEFUNGE"||e=="LOLCODE"||e=="WHENEVER"?g=require("ace/mode/c_cpp").Mode:e=="OBJECTIVEC"?(g=require("ace/mode/objectivec").Mode,langKeywordsFunc=objectivec_completer):e=="LISP"||e=="RACKET"||e=="LISP_SBCL"?(g=require("ace/mode/lisp").Mode,langKeywordsFunc=lisp_completer):e=="R"?(g=require("ace/mode/r").Mode,langKeywordsFunc=r_completer):e=="RUST"?(g=require("ace/mode/rust").Mode,langKeywordsFunc=rust_completer):e=="MYSQL"?g=require("ace/mode/mysql").Mode:e=="POSTGRESQL"?g=require("ace/mode/pgsql").Mode:e=="MSSQL"?g=require("ace/mode/sqlserver").Mode:e=="LUA"?g=require("ace/mode/lua").Mode:e=="GROOVY"?g=require("ace/mode/groovy").Mode:e=="D"?g=require("ace/mode/d").Mode:e=="ERLANG"?g=require("ace/mode/erlang").Mode:e=="JULIA"?g=require("ace/mode/julia").Mode:e=="OCAML"?g=require("ace/mode/ocaml").Mode:e=="OCTAVE"?g=require("ace/mode/matlab").Mode:e=="SWIFT"&&(g=require("ace/mode/swift").Mode),f.setMode(new g)}catch(h){console.log(h.message)}set_editor_preferences(f,a),editor_global.resize(),editor_global.focus(),tabs_info[a]={tab:a,session:f,filename:c,lang:e,source_loaded:!1,code_player:null,source:source,last_edited:null},b&&$.ajax({url:b,tab_id:a,editor_global:editor_global,success:function(a){var b;a.hasOwnProperty("data")?b=a.data[0]:b=a;var c=this.tab_id;set_source_for_tab_id(c,b)}}),typeof d!="undefined"&&d&&editor_global.setReadOnly(!0)}function get_sources_of_langs(a,b,c){var d=[],e={};for(var f=0;f<a.length;f++){var g=a[f],h=tabs_info[g].lang;d.push(h),e[h]=g}$.ajax({url:b,data:{langs:d.join(",")},success:function(a){var b=a.data;for(var c=0;c<b.length;c++){var d=b[c],f=d.lang,g=e[f];set_source_for_tab_id(g,d)}},complete:function(){c()}})}function get_last_edited_tab_id_in(a){var b=null,c=null;for(var d=0;d<a.length;d++){var e=a[d],f=tabs_info[e].last_edited;f&&(c==null||f>c)&&(b=e,c=f)}return b}function set_editor_preferences(a,b){current_theme?editor_global.setTheme("ace/theme/"+current_theme):editor_global.setTheme("ace/theme/"+preference.theme);var c=null;preference.keybind=="emacs"?c=require("ace/keyboard/keybinding/emacs").Emacs:preference.keybind=="vim"&&(c=require("ace/keyboard/keybinding/vim").Vim),editor_global.setKeyboardHandler(c),editor_global.setHighlightActiveLine(preference.hactive),editor_global.setHighlightSelectedWord(preference.hword),editor_global.setShowInvisibles(preference.invisibles),editor_global.setBehavioursEnabled(preference.behave),editor_global.commands.bindKeys(preference.bindKeys),editor_global.renderer.setShowGutter(preference.gutter),editor_global.renderer.setShowPrintMargin(preference.pmargin),$("#disable-copy-paste-in-editor").length&&setDragDrop(editor_global,!1),a.setTabSize(preference.tabsize),a.setUseSoftTabs(preference.softtab);switch(preference.swrap){case"off":a.setUseWrapMode(!1),editor_global.renderer.setPrintMarginColumn(80);break;case"40":a.setUseWrapMode(!0),a.setWrapLimitRange(40,40);break;case"80":a.setUseWrapMode(!0),a.setWrapLimitRange(80,80);break;case"free":a.setUseWrapMode(!0),a.setWrapLimitRange(null,null)}$("#editor-global").css("font-size",preference.fontsize)}function get_file_source(a){var b;return $.ajax({url:a,async:!1,success:function(a){b=a}}),b}function get_current_tab_id(){try{var a=$("ul.ui-tabs-nav li.ui-tabs-selected a").attr("href"),b=a.split("-"),c=b[b.length-1];return c}catch(d){return!1}}function resize_editor(a,b){var c=get_current_tab_id();current_tab_id=c,tabs_info[c]&&editor_global.setSession(tabs_info[c].session),editor_global&&(editor_global.resize(),editor_global.focus(),autocomplete_options={enableBasicAutocompletion:!0,enableSnippets:!0},LAB_FEATURE_MAP.LC&&(autocomplete_options.enableLiveAutocompletion=!0),langKeywordsFunc&&AutoComplete.addCompleter(langKeywordsFunc),editor_global.setOptions(autocomplete_options)),editor_global!==null&&update_height(editor_global.getSession()),toggle_code_video_link(),generate_editor_actions()}function remove_tab(a,b){}function change_theme(a){current_theme=a,editor_global.setTheme(a)}function ide_initialize_tabs(){$tabs=$("#tabs-all").tabs({tabTemplate:"<li><a href='#{href}'>#{label}</a></li>",show:function(a,b){resize_editor(a,b)},add:function(a,b){$(b.panel).append('<div class="editor" id="editor_'+current_tab_id+'"></div>')},remove:function(a,b){remove_tab(b)}}),$tabs.find(".ui-tabs-nav").sortable({axis:"x"}),$(".file").live("click",function(){create_tab($(this).attr("id"),$(this).attr("ajax_url"),$(this).text())})}function update_height(a){var b=a.getLength(),c;b<MIN_LINES?c=MIN_LINES-1:b>=MIN_LINES&&b<=MAX_LINES?c=b:c=MAX_LINES+1;var d=c*editor_global.renderer.lineHeight+editor_global.renderer.scrollBar.getWidth();$("#editor-global").height(d),$("#tabs-all").height(d),editor_global.resize(),process_scrollbar(a)}function process_scrollbar(a){var b=a.getLength();b>MAX_LINES?$(".ace_scrollbar").css("overflow-y","scroll"):$(".ace_scrollbar").css("overflow-y","hidden");return}function set_selection(a){var b=new Selection(a);b.on("changeCursor",function(){console.log(b.getCursor())})}function get_current_lang(){var a=get_current_tab_id();return tabs_info[a]?tabs_info[a].lang:null}function get_current_source(){return editor_global.getValue()}function save_code_to_local_storage(a,b,c,d){var e=$("div[is_practice=1]");if(e!==undefined&&localStorage){var f={source:b,lang:c,last_edited:d},g=get_private_hash();set_to_local_storage(g+"_"+c,f),set_to_local_storage(g+"_last_lang",c),tabs_info[a].source=b,tabs_info[a].last_edited=d,bind_beforeunload_event()}}function set_anonymous_changesets(a,b,c,d,e){if(!tabs_info[a].code_player){var f=get_private_hash(),g=get_from_local_storage(f+"_delta_"+d),h={delta:b,source:c,timestamp:e};g?g.push(h):g=[h],set_to_local_storage(f+"_delta_"+d,g)}}function set_source(a,b,c){if(a!==undefined){var d=tabs_info[a].session,e=get_latest_source_data(a,b,c);if(e){var f=e.source,g=e.last_edited;d.setValue(f),tabs_info[a].source=f,tabs_info[a].last_edited=g,tabs_info[a].source_loaded=!0}}}function get_latest_source_data(a,b,c){if(b){var d=b.source,e=b.last_edited;if(c){var f=(new Date).getTime(),g=parseInt(c.last_edited),h=(f-g)/3600/1e3;if(h<LOCALSTORAGE_EXPIRATION)c.last_edited>e&&(d=c.source,e=c.last_edited,bind_beforeunload_event());else{var i=get_private_hash(),j=tabs_info[a].lang;remove_from_local_storage(i+"_"+j),remove_from_local_storage(i+"_delta_"+j),remove_from_local_storage(i+"_last_lang")}}return{source:d,last_edited:e}}return null}function get_from_local_storage(a){if(localStorage){var b=localStorage.getItem(a);if(b!==null){var c=JSON.parse(b);return c}}return null}function set_to_local_storage(a,b){if(localStorage){var c=JSON.stringify(b);return localStorage.setItem(a,c),!0}return!1}function remove_from_local_storage(a){return localStorage?(localStorage.removeItem(a),!0):!1}function bind_tab_source_edit_event(a){if(tabs_info[a]){var b=function(){return function(b){var c=tabs_info[a],d=c.session,e=c.code_player,f=c.source,g=c.lang,h=(new Date).getTime();c.source=d.getValue(),c.last_edited=(new Date).getTime(),e.enqueue_changeset(b,f),e.start_recording()}}(a),c=function(){return function(b){var c=tabs_info[a],d=c.source,e=c.lang,f=(new Date).getTime(),g=c.session.getValue();save_code_to_local_storage(a,g,e,f),set_anonymous_changesets(a,b,d,e,f)}}(a),d=tabs_info[a].source_loaded,e=tabs_info[a].code_player;d&&(is_user_logged_in?e&&tabs_info[a].session.on("change",b):tabs_info[a].session.on("change",c))}}function save_anon_changesets_in_db(a){var b=get_private_hash(),c=$("#"+a).attr("lang"),d=b+"_delta_"+c,e=b+"_"+c,f=get_from_local_storage(d),g=tabs_info[a].code_player;if(f){g.changeset_queue=g.changeset_queue.concat(f);var h=function(){return function(){remove_from_local_storage(d),remove_from_local_storage(e)}}(d,e);g.start_recording(100,h)}}function bind_beforeunload_event(a){if(!is_user_logged_in){var b=function(){if(!validNavigation)return"You may loose all the unsaved changes!"},c=$(window).data("events").beforeunload,d=!1;if(c)for(var e=0;e<c.length;e++)if(c[e].handler.toString()==b.toString()){d=!0;break}d||($(document).bind("keypress",function(a){a.keyCode==116&&(validNavigation=!0)}),$("a").bind("click",function(){validNavigation=!0}),$("form").bind("submit",function(){validNavigation=!0}),$("input[type=submit]").bind("click",function(){validNavigation=!0}),$(window).on("beforeunload",b))}}function toggle_code_video_link(){var a=$("#code-video-links").children();for(var b=0;b<a.length;b++){var c=$(a[b]);c.hasClass("hidden")||c.addClass("hidden");var d=get_current_lang();$("#code-video-link-"+d).removeClass("hidden")}}function generate_editor_actions(){var a=MAP_LANG_TO_NAME[get_current_lang()];$("#set-favorite-lang > li").text("Set "+a+" as favorite"),$("#set-favorite-lang").attr("lang",a)}function finish_all_recordings(){var a=0;for(var b in tabs_info)if(tabs_info[b].code_player){var c=tabs_info[b].code_player.finish_recording();c&&(a+=1)}return a}function animate_save(a,b){b===!0?($(a).html("All changes saved"),$(a).css({"background-color":"yellow"}),$(a).animate({backgroundColor:"#e5e7e8"},3e3,function(){$(a).css("background-color","rgba(0, 0, 0, 0)")})):$(a).html("Error in saving")}function init_cursor_pos(){document.getElementById("cursor-position")===null&&(editor_cursor_info=document.createElement("div"),editor_cursor_info.setAttribute("id","cursor-position"),editor_cursor_info.style.position="absolute",editor_cursor_info.style.bottom="3px",editor_cursor_info.style.right="20px",editor_cursor_info.innerText="1:1",document.getElementById("editor-global").appendChild(editor_cursor_info)),document.getElementById("editor-global").onclick=function(a){update_cursor_pos(editor_cursor_info)};var a=editor_global;a!==null&&(a.keyBinding.origOnCommandKey=a.keyBinding.onCommandKey,a.keyBinding.onCommandKey=function(a,b,c){update_cursor_pos(editor_cursor_info),this.origOnCommandKey(a,b,c),update_cursor_pos(editor_cursor_info)})}function update_cursor_pos(a){a.innerText=editor_global.selection.getCursor().row+1+":"+(editor_global.selection.getCursor().column+1)}var launch_count=new Array,id=new Array,editor=new Array,$tabs=null,tabs_open=new Array,current_tab_id=null,tabs_info={},current_theme=null,editor_global=null,editor_cursor_info=null,debug=!1,use_code_player=!0,MIN_LINES=40,MAX_LINES=60,validNavigation=!1,LOCALSTORAGE_EXPIRATION=2,langKeywordsFunc=null,preference={uitheme:"black",theme:"crimson_editor",fontsize:"14px",keybind:"ace",swrap:"free",tabsize:4,hactive:!0,hword:!0,invisibles:!1,gutter:!0,pmargin:!1,softab:!0,behave:!0,save_session:!0,bindKeys:{"ctrl-l":null,"ctrl-r":null}},EditSession=require("ace/edit_session").EditSession,UndoManager=require("ace/undomanager").UndoManager,Selection=require("ace/selection").Selection,AutoComplete=require("ace/ext/language_tools"),upload_file_source=null;$(document).ready(function(){$(".file-form input:file").live("change",function(a){file=this.files[0],reader=new FileReader,reader.onload=function(a){upload_file_source=a.target.result},reader.onerror=function(a){alert(a.getMessage())},reader.readAsText(file);try{$(".select-lang-modal").modal()}catch(b){debug&&console.log(b.message),$("#file-form-lang-dialog").removeClass("hidden"),$("#file-form-lang-dialog").dialog({width:240},{height:190},{zIndex:9999999},{title:"Select Language"},{show:{effect:"drop",direction:"top"}},{buttons:{"I'm done":function(a){$("#file-form-lang").find("option").attr("selected",!1),$(this).dialog("close"),$("#file-form-lang-dialog").addClass("hidden"),$(".simplemodal-close").click(),a.preventDefault()}}})}}),$("#file-form-lang").live("change",function(){var a=$("#file-form-lang").find(":selected").text(),b=tabs_info.length;for(var c in tabs_info)if(tabs_info[c].filename==a&&upload_file_source){create_tab($("#"+c).attr("id"),$("#"+c).attr("ajax_url"),$("#"+c).text()),editor_global.getSession().setValue(upload_file_source);break}}),$("#tabs-dropdown-menu").live("change",function(){var a=$(this).val();$('a[href="'+a+'"]').click()})}),window.addEventListener("beforeunload",function(a){var b=finish_all_recordings();if(b){var c="Your code changes are not yet saved.";return(a||window.event).returnValue=c,c}});