function submit(a,b,c){var d=get_source(),e=get_lang(),f=get_last_changeset_timestamp(),g=get_problem_slug(),h=get_private_hash(),i=get_problem_type(),j={source:d,lang:e,changeset_timestamp:f,problem_slug:g,private_hash:h,problem_type:i};b&&$.extend(j,b),debug&&(console.log("Post data is"),console.log(j)),typeof c=="undefined"&&(c=!1),pre_submission();try{var k=tabs_info[current_tab_id].code_player.finish_recording();k||animate_save("#editor-save-code",!0)}catch(l){debug&&console.log(l.message)}submit_ajax(a,j,c)}function submit_iframe(a,b,c,d,e){var f=get_problem_slug(),g=get_private_hash(),h=get_problem_type(),i=get_iframe_submission_email(),j={problem_slug:f,private_hash:g,problem_type:h,source:d,email:i,filename:e};b&&$.extend(j,b),debug&&(console.log("Post data is"),console.log(j)),typeof c=="undefined"&&(c=!1),pre_submission(),submit_ajax(a,j,c)}function submit_ajax(a,b,c){$.ajax({type:"POST",data:b,url:a,dataType:"json",success:function(a){console.log("success");var b=a.html,d=a.url;console.log(d);var e=$("#submission-result");e.html(b),e.parent().show(),post_submission("submit"),d!==null&&d!=="null"&&typeof d!="undefined"&&(c||typeof g_realtime_active!="undefined"&&!g_realtime_active)&&(timeout_fetch=setTimeout(function(){fetch_response(d,e)},500))},error:function(a){$(".error-output").html("Please try again. There was some error!"),$(".error-output").show(),$(".output").hide(),post_submission("submit")}})}function fetch_response(a,b){$.ajax({type:"POST",url:a,success:function(c){var d=b.attr("replaceData");if(typeof d=="undefined"||d!=="true"){var e=b.find("[replaceData=true]"),f=b.find("[replaceData=false]");if(f.length>0&&e.length===0){console.log("Not replacing with new data!"),clearTimeout(timeout_fetch);return}}b.html(c),b.parent().show(),timeout_fetch=setTimeout(function(){fetch_response(a,b)},1e3)}})}function get_source(){var a=tabs_info[current_tab_id].session.getValue();return a}function get_lang(){var a=$("#"+current_tab_id).attr("lang");return a}function get_iframe_submission_email(){var a=$("#submission-iframe-email").val();return a}function get_last_changeset_timestamp(){var a=tabs_info[current_tab_id].last_edited;return a}function get_problem_slug(){var a=$("#problem-slug").text();return a}function get_private_hash(){var a=$("#problem-private-hash").text();return a}function get_problem_type(){var a=$("#problem-type").text();return a}function pre_submission(){$(".ajax-loader").show(),$("#dryrun-button").hide(),$("#submit-button").hide(),$(".submit-button").hide(),$(".submission-container").hide()}function post_submission(a){$(".ajax-loader").hide(),$("#dryrun-button").show(),$("#submit-button").show(),$(".submit-button").show(),a=="submit"?$("body").animate({scrollTop:$("#submission-result").offset().top-25},"500","linear"):a=="compile"&&$("body").animate({scrollTop:$("#dryrun-result").offset().top-25},"500","linear")}function game_state_pusher_handler(a){typeof game=="object"&&(a=JSON.parse(a),a.game_id==game.game_id?game.pusher_handler(a):console.log("Game has different game id than the pushed game state"))}var debug=!1,timeout_fetch;$(".test-input-check").click(function(){$(".test-input-container").toggle("fast")}),$("#save-button").live("click",function(){var a=get_source(),b=get_lang(),c=get_problem_slug(),d=get_private_hash();$.ajax({type:"POST",url:"/save/AJAX/",data:{source:a,lang:b,problem_slug:c,private_hash:d},success:function(a){}})}),$("#submit-button").live("click",function(){var a=$(this).attr("ajax"),b=$(this).attr("probe"),c=!1;return b=="true"&&(c=!0),submit(a,{},c),!1}),$("#gs-run-code").live("click",function(){var a=$(this).attr("ajax"),b=!0;return window.scroll(0,700),submit(a,{},b),!1}),$("#multiplayer-submit-button").live("click",function(){var a=$(this).attr("ajax"),b=$(this).attr("probe"),c=!1;b=="true"&&(c=!0);var d=$("#other-user").val();return extra_data={user_id:d},submit(a,extra_data,c),!1}),$("#other-user").click(function(){var a=$(this).find("option:selected").attr("type");if(typeof a!="undefined"&&a==="user")return!0;if($(this).is("option"))return!0;var b=$(this).attr("ajax"),c=$(this);return $.ajax({type:"POST",url:b,success:function(a){c.html(a)}}),!0}),$(document).ready(function(){var a=$("#other-user");if(a.length>0){debug&&console.log("fetching users who have submitted");var b=a.attr("ajax");$.ajax({type:"POST",url:b,success:function(b){a.html(b);var c=$(a).selectize({create:!1,sortField:"text"})}})}}),$("#preview").live("click",function(){return url=$("#preview").attr("url"),window.open(url,"preview"),!1}),$("#aws-login-button").live("click",function(){var a=$(this).attr("ajax");$(".ajax-loader").show(),$.ajax({url:a,dataType:"json",success:function(a){$(".aws-username").html(a.username),$(".aws-password").html(a.password),$(".aws-server").html(a.server),$("#aws-login-data").show(),$("#aws-login-button").hide(),$(".ajax-loader").hide()},error:function(a){$("#aws-login-data").html("There was a transient error. Please try again after 10 minutes."),$("#aws-login-data").show(),$(".ajax-loader").hide()}})}),$("#dryrun-button").live("click",function(){var a=get_source(),b=get_lang(),c=get_last_changeset_timestamp(),d=get_problem_slug(),e=get_private_hash(),f=get_problem_type(),g="";$("#dryrun-input").is(":visible")&&(g=document.getElementById("test-input").value);var h={source:a,lang:b,changeset_timestamp:c,problem_slug:d,private_hash:e,input:g,p_type_v:f},i=$(this).attr("ajax"),j=$(this).attr("probe"),k=!1;j=="true"&&(k=!0),pre_submission(),$.ajax({type:"POST",url:i,data:h,dataType:"json",success:function(a){var b=a.html,c=a.url,d=$("#dryrun-result");d.html(b),d.parent().show(),post_submission("compile"),c!==null&&c!=="null"&&typeof c!="undefined"&&(k||typeof g_realtime_active!="undefined"&&!g_realtime_active)&&(timeout_fetch=setTimeout(function(){fetch_response(c,d)},1e3))},error:function(a){$(".error-output").html("Please try again. There was some error!"),$(".error-output").show(),$(".output").hide(),post_submission("compile")}})}),$("#set-favorite-lang").live("click",function(){$("#code-editor-actions-dropdown").trigger("click");var a=$(this),b=a.attr("ajax"),c=a.attr("lang"),d={lang:c};$.ajax({url:b,type:"POST",data:d,dataType:"json",success:function(a){a["status"]==AJAX_OK&&addAlert(a.message)}})}),$("#set-favorite-code").live("click",function(){$("#code-editor-actions-dropdown").trigger("click");var a=$(this),b=a.attr("ajax"),c={code:get_current_source(),lang:get_current_lang(),confirm:a.attr("confirm")};$.ajax({url:b,type:"POST",data:c,dataType:"json",success:function(a){a["status"]=="confirm"?$("#confirm-set-favorite-code").trigger("click"):addAlert(a.message)},error:function(a){}})});