/*!CK:3866221557!*//*1460066492,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["5wiKy"]); }

__d("MNCommerceBubbleType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14};},null);
__d('LeafletPolyline.react',['leaflet','LeafletPath','LeafletUtils','immutable','React','nearlyEqualNumbers'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'LeafletPolyline',propTypes:{options:h.object,coordinates:h.instanceOf(c('immutable').List).isRequired},statics:{coordinatesToLatLngs:function(j){return j.toSeq().map(c('LeafletUtils').toLatLng).toArray();},mutate:function(j,k,l){if(!i.mutateOptions(j,k.options,l.options))return false;if(!c('immutable').is(k.coordinates,l.coordinates))j.setLatLngs(i.coordinatesToLatLngs(k.coordinates));return true;},toLayer:function(j){return c('leaflet').polyline(i.coordinatesToLatLngs(j.coordinates),j.options);},mutateOptions:function(j,k,l){var m=k||{},n=m.smoothFactor,o=m.noClip,p=babelHelpers.objectWithoutProperties(m,['smoothFactor','noClip']),q=l||{},r=q.smoothFactor,s=q.noClip,t=babelHelpers.objectWithoutProperties(q,['smoothFactor','noClip']);if(!c('LeafletPath').mutateOptions(j,t,p))return false;if(!c('nearlyEqualNumbers')(r,n)||s!==o)return false;return true;}},render:function(){return null;}});f.exports=i;},null);
__d('MessengerPhotoishXMA.react',['React','requireWeak'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j;c('requireWeak')('MessengerPhotosGroup.react',function(l){j=l;});h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);}k.prototype.shouldComponentUpdate=function(l,m){return this.props!==l;};k.prototype.render=function(){if(!j)return null;return c('React').createElement(j,this.props);};f.exports=k;},null);
__d('MNCommerceReceiptActions',['MessengerDispatcher','MNCommerceActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={receiptLoaded:function(i){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RECEIPT.LOADED,receipt:i});},receiptLoadError:function(i){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RECEIPT.LOAD_ERROR,receiptID:i});},receiptReload:function(i){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RECEIPT.RELOAD,receiptID:i});}};f.exports=h;},null);
__d('MNCommerceShipmentActions',['MessengerDispatcher','MNCommerceActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={shipmentLoaded:function(i){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').SHIPMENT.LOADED,shipment:i});},shipmentLoadError:function(i){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').SHIPMENT.LOAD_ERROR,shipmentID:i});},shipmentReload:function(i){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').SHIPMENT.RELOAD,shipmentID:i});}};f.exports=h;},null);
__d('MNCommerceAddress.react',['React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MNCommerceAddress',propTypes:{name:h.string,rawAddress:h.string,address:h.shape({street_1:h.string,street_2:h.string,city:h.string,state:h.string,postal_code:h.string})},render:function(){if(this.props.rawAddress)return this._renderFallbackAddress();return this._renderProperAddress();},_renderProperAddress:function(){if(!this.props.address)return (c('React').createElement('div',null,this._renderName()));return (c('React').createElement('div',null,this._renderName(),c('React').createElement('div',null,this.props.address.street_1),c('React').createElement('div',null,this.props.address.street_2),c('React').createElement('div',null,this._getCityStateZip())));},_getCityStateZip:function(){var j=null;if(this.props.address.city)j=this.props.address.city;if(this.props.address.state){j+=j?', ':'';j+=this.props.address.state;}if(this.props.address.postal_code){j+=j?' ':'';j+=this.props.address.postal_code;}return j;},_renderFallbackAddress:function(){return (c('React').createElement('div',null,this._renderName(),c('React').createElement('div',null,this.props.rawAddress)));},_renderName:function(){if(this.props.name)return (c('React').createElement('div',null,this.props.name));}});f.exports=i;},null);
__d('MNCommerceDetailSection.react',['cx','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MNCommerceDetailSection',propTypes:{headerLabel:i.string.isRequired,margin:i.number},getDefaultProps:function(){return {margin:0};},render:function(){return (c('React').createElement('div',{className:this.props.className},c('React').createElement('div',{className:"_49u5",style:{marginBottom:this.props.margin}},this.props.headerLabel),this.props.children));}});f.exports=j;},null);
__d('MNCommerceItemText.react',['cx','fbt','MNCommerceOrderItemsStatus','React','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'MNCommerceItemText',propTypes:{metalines:j.shape({metaline_1:j.string,metaline_2:j.string,metaline_3:j.string}),title:j.string,size:j.oneOf(['large','small']),statusType:j.number},getDefaultProps:function(){return {size:'small'};},render:function(){var l=this.props,m=l.className,n=babelHelpers.objectWithoutProperties(l,['className']),o="_swr"+(n.size==='small'?' '+"_sws":'');return (c('React').createElement('div',babelHelpers['extends']({className:c('joinClasses')(m,o)},n),c('React').createElement('div',{className:"_51fw"},this.props.title),c('React').createElement('div',{className:"_2y0f"},this._renderMetaData())));},_renderMetaData:function(){if(this.props.metalines)return (c('React').createElement('div',null,this._renderMetaDataSection(this.props.metalines.metaline_1),this._renderMetaDataSection(this.props.metalines.metaline_2),this._renderPriceMetaDataSection()));},_renderMetaDataSection:function(l){if(l)return (c('React').createElement('div',null,l));},_renderPriceMetaDataSection:function(){if(this.props.size!=='large')return null;if(this.props.statusType===c('MNCommerceOrderItemsStatus').CANCELED)return (c('React').createElement('div',null,c('React').createElement('span',{className:"__hz"},i._("Canceled"),' \u00b7 '),this.props.metalines.metaline_3));return (c('React').createElement('div',null,this.props.metalines.metaline_3));}});f.exports=k;},null);
__d('MNCommerceSingleListItem.react',['cx','Image.react','MNCommerceItemText.react','React','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MNCommerceSingleListItem',propTypes:{description:i.string,thumbURL:i.string,imageDimension:i.number.isRequired,statusType:i.number},render:function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_39q_"),style:{height:this.props.imageDimension,width:this.props.width}},c('React').createElement('div',{className:"_1fld"},this._renderImage()),c('React').createElement(c('MNCommerceItemText.react'),babelHelpers['extends']({className:"_1flf",style:{left:this.props.imageDimension},size:this.props.size,statusType:this.props.statusType},this.props))));},_renderImage:function(){var k=this.props.imageDimension;if(this.props.thumbURL){return (c('React').createElement(c('Image.react'),{className:"_1fle",height:k,src:this.props.thumbURL,width:k}));}else return (c('React').createElement('div',{className:"_1prr",style:{height:k,width:k}}));}});f.exports=j;},null);
__d('MNCommerceItemList.react',['cx','fbt','List.react','MNCommerceSingleListItem.react','MNCommerceViewTypes','React','getOwnObjectValues'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=2,l=10,m=c('React').createClass({displayName:'MNCommerceItemList',propTypes:{items:j.array,imageDimension:j.number.isRequired,size:j.oneOf(['large','small']),width:j.number,viewType:j.oneOf(c('getOwnObjectValues')(c('MNCommerceViewTypes'))).isRequired},render:function(){var n;switch(this.props.viewType){case c('MNCommerceViewTypes').DETAIL:n=l;break;case c('MNCommerceViewTypes').BUBBLE:n=k;break;}var o=this._getItems(n),p=this.props.items.length;if(p>n)o.push(c('React').createElement('li',{key:'andMore',className:"_24ry",style:{width:this.props.width}},i._("And {Number of items not visible} more",[i.param('Number of items not visible',p-n)])));return (c('React').createElement('div',null,c('React').createElement(c('List.react'),{border:'none',spacing:'none'},o)));},_getItems:function(n){var o=this.props,p=o.imageDimension,q=o.items,r=q.map(function(s){return (c('React').createElement('li',{key:s.id,className:"_24rx"+(this.props.size==='large'?' '+"_1n5y":''),style:{width:this.props.width}},c('React').createElement(c('MNCommerceSingleListItem.react'),babelHelpers['extends']({imageDimension:p,size:this.props.size,width:this.props.width,statusType:s.status_type},s))));}.bind(this)).slice(0,n);return r;}});f.exports=m;},null);
__d('MNCommerceLogoHeader.react',['cx','Image.react','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j={width:72,height:24},k={width:36,height:12},l=3,m=.75,n=c('React').createClass({displayName:'MNCommerceLogoHeader',propTypes:{logo:i.object,logoPosition:i.oneOf(['left','right'])},render:function(){var o=this._renderLogo();if(this.props.children){var p=c('React').createElement('div',{className:"_fy-"+(this.props.logoPosition==='left'?' '+"_fy_":''),key:'children'},c('React').createElement('div',{className:"_56rv"},this.props.children)),q=[p];if(o)if(this.props.logoPosition==='right'){q.push(o);}else q.unshift(o);return (c('React').createElement('div',{className:"_56rt"},q));}else return o;},_renderLogo:function(){var o=this.props.logo;if(!o||!o.src)return null;var p=j.width,q=j.height,r=o.width/o.height;if(Math.abs(l-r)<=m){p=k.width;q=k.height;}var s={float:this.props.children?this.props.logoPosition:'none'};s.maxWidth=p;return (c('React').createElement('div',{className:"_b0-",key:'logo'},c('React').createElement('div',{className:"_fz0"},c('React').createElement(c('Image.react'),{className:"_56rs",height:o.height,src:o.src,width:o.width,style:{maxHeight:q}}))));}});f.exports=n;},null);
__d('MNCommerceOrderDetailsDialog.react',['cx','fbt','MNCommerceAddress.react','MNCommerceAttachmentConstants','MNCommerceDetailSection.react','MNCommerceDetailsDialog.react','MNCommerceItemList.react','MNCommerceLogoHeader.react','MNCommerceViewTypes','React','XUISpinner.react','XUIButton.react','mergeDeep'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=[c('MNCommerceAttachmentConstants').ORDER_DETAIL.SUB_TOTAL,c('MNCommerceAttachmentConstants').ORDER_DETAIL.SHIPPING,c('MNCommerceAttachmentConstants').ORDER_DETAIL.TAX,c('MNCommerceAttachmentConstants').ORDER_DETAIL.TOTAL],l={};l[c('MNCommerceAttachmentConstants').ORDER_DETAIL.SUB_TOTAL]=i._("Subtotal");l[c('MNCommerceAttachmentConstants').ORDER_DETAIL.SHIPPING]=i._("Shipping");l[c('MNCommerceAttachmentConstants').ORDER_DETAIL.TAX]=i._("Tax");l[c('MNCommerceAttachmentConstants').ORDER_DETAIL.TOTAL]=i._("Total");var m=c('React').createClass({displayName:'MNCommerceOrderDetailsDialog',propTypes:{receipt:j.object,shown:j.bool.isRequired,error:j.object,loading:j.bool.isRequired,onTryAgain:j.func},getDefaultProps:function(){return {shown:false};},getInitialState:function(){return this._calculateState(this.props);},componentWillReceiveProps:function(n){this.setState(this._calculateState(n));},_calculateState:function(n){if(!n.receipt)return {};var o=n.receipt,p=Array.isArray(o.structured_address)?null:o.structured_address;return {address:p,items:this._processItems(o.items),logo:o.partner_logo?{height:o.partner_logo.height,width:o.partner_logo.width,src:o.partner_logo.url}:null,name:o.recipient_name,orderDate:o.order_time,orderNumber:o.order_id,orderStatus:o.status,payment:o.payment_method,rawAddress:o.address,shippingCost:o.shipping_cost,subTotal:o.subtotal,tax:o.total_tax,totalCost:o.total_cost};},render:function(){var n=i._("Order Details"),o=i._("Your order details couldn't be shown.");return (c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:o,title:n},this.props),this._renderBody()));},_renderBody:function(){if(!this.props.receipt||this.props.loading||this.props.error)return null;return (c('React').createElement('div',{className:"_4vx2"},this._renderLogo(),this._renderItems(),c('React').createElement('div',{className:"_2hsz"}),c('React').createElement('div',null,c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4 _4vx5",headerLabel:i._("Ordered on")},this.state.orderDate),c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4",headerLabel:i._("Ship to")},c('React').createElement(c('MNCommerceAddress.react'),{name:this.state.name,address:this.state.address,rawAddress:this.state.rawAddress})),c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4",headerLabel:i._("Paid with")},this.state.payment),c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4",headerLabel:i._("Summary")},this._renderOrderSummary())),c('React').createElement('div',{className:"_4vx6"},i._("Order number: {order number}",[i.param('order number',this.state.orderNumber)]))));},_processItems:function(n){if(!n)return null;var o=Object.keys(n).map(function(p){var q=n[p],r=c('mergeDeep')({},q);r.id=p;r.thumbURL=q.thumb_url;return r;});return o;},_renderLogo:function(){if(!this.state.logo)return null;return (c('React').createElement('div',{className:"_4vx3"},c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:this.state.logo,logoPosition:'left'})));},_renderItems:function(){var n=c('MNCommerceAttachmentConstants').DIALOG.WIDTH-2*c('MNCommerceAttachmentConstants').DIALOG.PADDING;return (c('React').createElement('div',{className:"_39yr"},c('React').createElement(c('MNCommerceItemList.react'),{imageDimension:c('MNCommerceAttachmentConstants').XLARGE_IMAGE_DIMENSION,items:this.state.items,size:'large',viewType:c('MNCommerceViewTypes').DETAIL,width:n})));},_renderOrderSummary:function(){var n=k.map(function(r){var s=this.state[r];return (c('React').createElement('div',{className:r==='totalCost'?"_4vx9":'',key:r},c('React').createElement('div',{className:"_4vx5"},l[r]),c('React').createElement('div',{className:"_4vx5"},s||'--')));}.bind(this)),o=this.props.receipt&&this.props.receipt.adjustments;for(var p=o.length-1;p>=0;p--){var q=o[p];n.splice(2,0,c('React').createElement('div',{key:q.adjustment_type},c('React').createElement('div',{className:"_4vx5"},q.adjustment_type),c('React').createElement('div',{className:"_4vx5"},q.display_adjustment_amount||'--')));}return n;}});f.exports=m;},null);
__d("XMNCommerceOrderDetailsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/order_details\/",{receipt_id:{type:"String",required:true}});},null);
__d('MNCommerceReceiptDataManager',['AsyncRequest','MNCommerceReceiptActions','XMNCommerceOrderDetailsController'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.prototype.fetchReceipt=function(i){var j=c('XMNCommerceOrderDetailsController').getURIBuilder().setString('receipt_id',i).getURI();new (c('AsyncRequest'))().setURI(j).setHandler(this.$MNCommerceReceiptDataManager1).setErrorHandler(this.$MNCommerceReceiptDataManager2).send();};h.prototype.$MNCommerceReceiptDataManager1=function(i){c('MNCommerceReceiptActions').receiptLoaded(i.payload);};h.prototype.$MNCommerceReceiptDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.receipt_id;c('MNCommerceReceiptActions').receiptLoadError(k);};function h(){}f.exports=new h();},null);
__d('MNCommerceReceiptStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommerceReceiptDataManager'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommerceReceiptStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.receiptID;switch(l){case c('MNCommerceActionTypes').RECEIPT.LOADED:var n=k.receipt;this.$MNCommerceReceiptStore1.set(n.receipt_id,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').RECEIPT.LOAD_ERROR:this.$MNCommerceReceiptStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load receipt: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').RECEIPT.RELOAD:if(m){this.$MNCommerceReceiptStore1.set(m,c('LoadObject').loading());c('MNCommerceReceiptDataManager').fetchReceipt(m);}this.__emitChange();break;}};j.prototype.getReceipt=function(k){if(k&&!this.$MNCommerceReceiptStore1.has(k)){this.$MNCommerceReceiptStore1.set(k,c('LoadObject').loading().setValue({receiptID:k}));c('MNCommerceReceiptDataManager').fetchReceipt(k);}return this.$MNCommerceReceiptStore1.get(k)||c('LoadObject').empty();};f.exports=new j();},null);
__d('MNCommerceOrderDetailsDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceOrderDetailsDialog.react','MNCommerceReceiptActions','MNCommerceReceiptStore','PureStoreBasedStateMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'MNCommerceOrderDetailsDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceReceiptStore'))],statics:{calculateState:function(){var i=c('MNCommerceDialogStateStore').getState(),j=null;if(i)j=i.receiptID;var k=c('MNCommerceReceiptStore').getReceipt(j);if(!k.isLoading())c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:k.hasError()?c('MNCommerceLoggerEvents').DIALOG_LOAD_ERROR:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.RECEIPT,receipt_id:j})});return {shown:!!i,loading:k.isLoading(),receiptID:j,receipt:k.getValue(),error:k.getError()};}},render:function(){return (c('React').createElement(c('MNCommerceOrderDetailsDialog.react'),{loading:this.state.loading,error:this.state.error,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown,receipt:this.state.receipt}));},_onToggle:function(i){if(!i){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.RECEIPT,receipt_id:this.state.receipt.receipt_id})});c('MNCommerceDialogStateActions').hideDialog();}},_onTryAgainClick:function(){c('MNCommerceReceiptActions').receiptReload(this.state.receiptID);}});f.exports=h;},null);
__d('MNCommerceFooterTypes',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({TOTAL:null,REFUND:null});f.exports=h;},null);
__d('MNCommerceTotalCostFooter.react',['cx','fbt','LeftRight.react','MNCommerceFooterTypes','React','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'MNCommerceTotalCostFooter',propTypes:{type:j.oneOf(Object.keys(c('MNCommerceFooterTypes'))),totalCost:j.string,costLabel:j.string},render:function(){var l,m;switch(this.props.type){case c('MNCommerceFooterTypes').TOTAL:l=i._("Total");m="_28k2";break;case c('MNCommerceFooterTypes').REFUND:l=i._("Refund");m="_28k3";break;default:l='';m='';break;}if(this.props.costLabel)l=this.props.costLabel;return (c('React').createElement(c('LeftRight.react'),{className:c('joinClasses')(m,this.props.className)},c('React').createElement('div',null,l),c('React').createElement('div',{className:"_28k4"},this.props.totalCost)));}});f.exports=k;},null);
__d('MNCommerceReceiptMercuryAttachment.react',['fbt','cx','MNCommerceFooterTypes','MNCommerceItemList.react','MNCommerceAttachmentConstants','MNCommerceAttachmentUtils','MNCommerceLogoHeader.react','MNCommerceBubbleSection.react','MNCommerceTotalCostFooter.react','MNCommerceViewTypes','MercuryShareAttachmentRenderLocations','React','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'MNCommerceReceiptMercuryAttachment',propTypes:{items:j.array.isRequired,location:j.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),logo:j.object,payment_method:j.string,totalCost:j.string,width:j.number,onAttachmentClick:j.func,status:j.string,recipient_name:j.string,structured_address:j.object},render:function(){return (c('React').createElement('div',{className:c('joinClasses')("_1xjh"+(this.props.location===c('MercuryShareAttachmentRenderLocations').WEB_INBOX?' '+"_1hf9":''),this.props.className),onClick:this.props.onAttachmentClick},c('React').createElement('div',{className:"_xm3"},c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:this.props.logo,logoPosition:'right'},h._("Order Confirmation"))),c('React').createElement('div',{className:"_xmt"},c('React').createElement(c('MNCommerceBubbleSection.react'),null,this._renderItemDescriptions()),this._renderPaymentMethodSection(),this._renderAddressSection()),c('React').createElement('div',{className:"_xmx"},c('React').createElement(c('MNCommerceTotalCostFooter.react'),{totalCost:this.props.totalCost,type:c('MNCommerceFooterTypes').TOTAL}))));},_renderPaymentMethodSection:function(){if(!this.props.payment_method)return null;return (c('React').createElement(c('MNCommerceBubbleSection.react'),{label:h._("Paid with")},this.props.payment_method));},_renderAddressSection:function(){var l=c('MNCommerceAttachmentUtils').getDestinationAddressString(this.props.structured_address);if(!l)return null;return (c('React').createElement(c('MNCommerceBubbleSection.react'),{label:h._("Ship to")},l));},_renderItemDescriptions:function(){if(!this.props.items.length)return null;var l=this.props.width-2*c('MNCommerceAttachmentConstants').BUBBLE_PADDING,m={size:'small',width:l};return (c('React').createElement(c('MNCommerceItemList.react'),babelHelpers['extends']({items:this.props.items,imageDimension:c('MNCommerceAttachmentConstants').LARGE_IMAGE_DIMENSION,viewType:c('MNCommerceViewTypes').BUBBLE},m)));}});f.exports=k;},null);
__d('MNCommerceReceiptMercuryShareAttachment.react',['BanzaiLogger','MercuryShareAttachmentReactShape','MNCommerceDialogStateActions','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceOrderDetailsDialogContainer.react','MNCommerceReceiptMercuryAttachment.react','React','mergeDeep'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MNCommerceReceiptMercuryShareAttachment',propTypes:{attachment:c('MercuryShareAttachmentReactShape'),maxWidth:h.number},render:function(){var j=this.props.attachment,k=[],l=j.target.items;Object.keys(l).forEach(function(o){var p=l[o],q=c('mergeDeep')({},p);q.id=o;q.thumbURL=p.thumb_url;k.push(q);});var m=null;if(!Array.isArray(j.target.structured_address))m=j.target.structured_address;var n={items:k,totalCost:j.target.total_cost,width:this.props.maxWidth,onAttachmentClick:this._onAttachmentClick,location:this.props.location,logo:j.target.partner_logo?{height:j.target.partner_logo.height,width:j.target.partner_logo.width,src:j.target.partner_logo.url}:null,payment_method:j.target.payment_method,status:j.target.status,recipient_name:j.target.recipient_name,structured_address:m};return (c('React').createElement(c('MNCommerceReceiptMercuryAttachment.react'),n));},_onAttachmentClick:function(){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.RECEIPT,receipt_id:this.props.attachment.target.receipt_id})});c('MNCommerceDialogStateActions').showDialog(c('MNCommerceOrderDetailsDialogContainer.react'),{receiptID:this.props.attachment.target.receipt_id});}});f.exports=i;},null);
__d('MNCommerceShippingMap.react',['cssVar','cx','FBTilesMap.react','GeoCoordinates','GeoMarker','GeoMarkerIcon','GeoPath','leaflet','LeafletCircleMarker.react','LeafletPolyline.react','LeafletMarker.react','LeafletUtils','immutable','MercuryShareAttachmentRenderLocations','MNMappingUtils','React','ResponsiveBlock.react','StaticGeoMapDesktopWeb.react','StaticGeoMapSource','debounce','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k={boxZoom:false,doubleClickZoom:false,dragging:false,scrollWheelZoom:false,touchZoom:false,zoomControl:false},l={color:'#70768b',opacity:1,weight:1,fill:true,fillOpacity:1,fillColor:'#ffffff',radius:2.5},m={color:'black',opacity:.2},n={color:"#5890ff",opacity:1},o={iconSize:[18,24],iconAnchor:[9,24]},p='images/places/map/pink-pin.png',q=3233857791,r=8454143,s=5,t='images/places/map/map_pin-2x.png',u=5,v=c('React').createClass({displayName:'MNCommerceShippingMap',propTypes:{className:j.string,destination:j.instanceOf(c('GeoCoordinates')).isRequired,delivered:j.bool,location:j.string,shippingCheckPoints:j.instanceOf(c('immutable').List).isRequired,style:j.object,width:j.number},getInitialState:function(){return {height:c('MNMappingUtils').DEFAULT_MAP_HEIGHT,size:c('leaflet').point(c('MNMappingUtils').DEFAULT_MAP_WIDTH,c('MNMappingUtils').DEFAULT_MAP_HEIGHT),width:null};},render:function(){if(this.props.location){return this._renderStaticMap();}else{var w=this.props.location?this.props.width||this.state.width:this.state.size.x,x=this.state.size.y,y=this._getLatLngPoints(),z=c('MNMappingUtils').getView(w,x,y);return (c('React').createElement(c('FBTilesMap.react'),{className:this.props.className,view:z,style:this.props.style,options:k,onViewChange:this._onViewChange,onSizeSettled:this._onSizeSettled},this._renderShippingCheckPoints(),this._renderDestinationPolyline(),this._renderDestinationWayPoint(),this._renderLocationIdentifiers()));}},_renderStaticMap:function(){var w=this.props.width||this.state.width,x=c('MNMappingUtils').getMapHeight(this.props.location),y=this._getLatLngPoints(),z=c('MNMappingUtils').getBounds(w,x,y),aa=[],ba=[],ca=this.props.shippingCheckPoints;if(ca.size>1){var da=ca.toArray();da.pop();if(da.length===1)aa.push(new (c('GeoMarker'))(da[0],new (c('GeoMarkerIcon'))(t,.5,.5)));da=this._getTraveledPointsExceptDestination(da);if(da.length>0)ba.push(new (c('GeoPath'))(da,s,r));var ea=ca,fa=ea.size-1,ga=this.props.delivered?r:q;ba.push(new (c('GeoPath'))([ea.get(fa-1),ea.get(fa)],s,ga));if(da.length>0)aa=da.map(function(ia){return new (c('GeoMarker'))(ia,new (c('GeoMarkerIcon'))(t,.5,.5));});}aa.push(new (c('GeoMarker'))(this.props.destination,new (c('GeoMarkerIcon'))(p,.5,1)));var ha=c('React').createElement(c('StaticGeoMapDesktopWeb.react'),{className:c('joinClasses')("_4y9n",this.props.className),boundingBox:z,width:w,height:x,paths:ba,source:c('StaticGeoMapSource').MESSENGER_SHPPING_BUBBLE,markers:aa,zoom:u});if(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER)ha=c('React').createElement(c('ResponsiveBlock.react'),{onResize:c('debounce')(this._onResize,500,this)},ha);return ha;},_getTraveledPointsExceptDestination:function(w){var x=[],y=null,z=null;for(var aa=0;aa<w.length-1;aa++){y=w[aa];z=w[aa+1];if(y.latitude!==z.latitude||y.longitude!==z.longitude){x.push(y);if(aa===w.length-2)x.push(z);}}return x;},_onResize:function(w,x){this.setState({width:w,height:x});},_onViewChange:function(){},_renderShippingCheckPoints:function(){if(this.props.shippingCheckPoints.size>1)return (c('React').createElement(c('LeafletPolyline.react'),{coordinates:this.props.shippingCheckPoints,options:n}));},_renderDestinationPolyline:function(){if(!this.props.delivered&&this.props.shippingCheckPoints.size>0){var w=c('immutable').List([this.props.destination,this.props.shippingCheckPoints.first()]);return (c('React').createElement(c('LeafletPolyline.react'),{coordinates:w,options:m}));}},_renderDestinationWayPoint:function(){return (c('React').createElement(c('LeafletMarker.react'),{coordinates:this.props.destination,options:{icon:c('leaflet').divIcon(babelHelpers['extends']({},o,{className:"_18ea"}))}}));},_renderLocationIdentifiers:function(){var w=[this.props.destination];if(this.props.shippingCheckPoints.size>0)return w.concat(this.props.shippingCheckPoints.toArray()).map(function(x,y){return (c('React').createElement(c('LeafletCircleMarker.react'),{center:x,key:y,options:l}));});},_getLatLngPoints:function(){var w=[this.props.destination];if(this.props.shippingCheckPoints.size>0)w=w.concat(this.props.shippingCheckPoints.toArray());return w.map(c('LeafletUtils').toLatLng);},_onSizeSettled:function(w){this.setState({size:w});}});f.exports=v;},null);
__d('MNCommerceShippingDetailsDialog.react',['cx','fbt','ActionList.react','GeoCoordinates','immutable','Link.react','MNCommerceAddress.react','MNCommerceAttachmentConstants','MNCommerceDetailSection.react','MNCommerceDetailsDialog.react','MNCommerceItemList.react','MNCommerceLogoHeader.react','MNCommerceShippingMap.react','MNCommerceViewTypes','React','XUISpinner.react','XUIButton.react','mergeDeep'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'MNCommerceShippingDetailsDialog',propTypes:{shipment:j.shape({address:j.shape({street_1:j.string,street_2:j.string,city:j.string,state:j.string,postal_code:j.string}),carrierInfo:j.string,changeURL:j.string,deliverDate:j.string,name:j.string,shipDate:j.string,delivered:j.bool,destination:j.instanceOf(c('GeoCoordinates')),items:j.object,legalText:j.string,logo:j.shape({height:j.number,width:j.number,src:j.string}),orderDetailsURL:j.string,rawAddress:j.string,progress:j.object,shippingCheckPoints:j.instanceOf(c('immutable').List),trackingNumber:j.string}),shown:j.bool.isRequired,error:j.object,loading:j.bool.isRequired,onToggle:j.func,onTryAgain:j.func},getDefaultProps:function(){return {shown:false};},render:function(){var l=i._("Shipping Details"),m=i._("Your shipment details couldn't be shown.");return (c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:m,title:l},this.props),this._renderBody()));},_renderBody:function(){if(!this.props.shipment||this.props.loading||this.props.error)return null;return (c('React').createElement('div',null,this._renderMap(),c('React').createElement('div',{className:"_3qia"},c('React').createElement('div',null,this._renderCallToActionList()),c('React').createElement('div',null,this._renderDeliverySection(),this._renderAddressSection(),this._renderCarrierSection(),this._renderProgressSection(),this._renderItemsSection()),c('React').createElement('div',{className:"_1pyw"},this._renderFooter()))));},_processItems:function(){var l=Object.keys(this.props.shipment.items).map(function(m){var n=this.props.shipment.items[m],o=c('mergeDeep')({},n);o.id=m;o.thumbURL=n.thumb_url;return o;}.bind(this));return l;},_getItemsHeader:function(){var l,m=this._processItems();if(m.length===1){l=i._("Item");}else if(m.length>1){l=i._("Items");}else l=i._("No items found");return l;},_renderDeliverySection:function(){if(!this.props.shipment.deliverDate)return null;return (c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_3qic",headerLabel:i._("Delivery on")},this.props.shipment.deliverDate));},_renderAddressSection:function(){if(!this.props.shipment.address&&!this.props.rawAddress)return null;return (c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_3qic",headerLabel:i._("Ship to")},c('React').createElement(c('MNCommerceAddress.react'),{address:this.props.shipment.address,rawAddress:this.props.shipment.rawAddress,name:this.props.shipment.name})));},_renderCarrierSection:function(){if(!this.props.shipment.carrierInfo)return null;return (c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_3qic",headerLabel:i._("Carrier")},this.props.shipment.carrierInfo));},_renderProgressSection:function(){var l=this.props.shipment.progress,m=Object.keys(l).reverse(),n=null;if(!l||!m.length){n=i._("Tracking info should be available soon");}else n=m.map(function(o){var p=l[o];return (c('React').createElement('div',{className:"_3qii",key:o},c('React').createElement('p',{className:"_3qij"},p.tracking_event_description),c('React').createElement('p',{className:"_3qik"},p.display_time)));});return (c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_3qic",headerLabel:i._("Tracking")},n));},_renderItemsSection:function(){if(!this.props.shipment.items)return null;var l=c('MNCommerceAttachmentConstants').DIALOG.WIDTH-2*c('MNCommerceAttachmentConstants').DIALOG.PADDING;return (c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_3qic _39yr",headerLabel:this._getItemsHeader(),margin:6},c('React').createElement(c('MNCommerceItemList.react'),{imageDimension:c('MNCommerceAttachmentConstants').SMALL_IMAGE_DIMENSION,items:this._processItems(),size:'small',viewType:c('MNCommerceViewTypes').DETAIL,width:l})));},_renderFooter:function(){if(!this.props.shipment.logo)return null;var l=i._("Tracking number {tracking number}",[i.param('tracking number',this.props.shipment.trackingNumber)]),m=c('React').createElement('div',{className:"_3xyi",key:'logo'},c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:this.props.shipment.logo,logoPosition:'right'},this.props.shipment.legalText||l));if(this.props.shipment.legalText)m=[c('React').createElement('div',{className:"_1pyx",key:'tracking'},l),m];return m;},_renderMap:function(){var l=this.props.shipment;if(!l.destination||l.destination.latitude===0&&l.destination.longitude===0)return null;var m=l.shippingCheckPoints,n=[];for(var o=0;o<m.size;o++){var p=m.get(o);if(p.longitude!==0||p.latitude!==0)n.push(p);}return (c('React').createElement(c('MNCommerceShippingMap.react'),{className:"_387w",delivered:l.delivered,destination:l.destination,shippingCheckPoints:c('immutable').List(n)}));},_renderCallToActionList:function(){var l=[];if(this.props.shipment.changeURL)l.push(c('React').createElement(c('Link.react'),{className:"_3qil",href:this.props.shipment.changeURL,key:'changeDelivery',target:'_blank'},i._("Change Delivery Options")));if(!l.length)return null;return (c('React').createElement(c('ActionList.react'),{className:"_3qim"},l));},_onViewChange:function(l){this.setState({view:l});}});f.exports=k;},null);
__d("XMNCommerceShippingDetailsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/shipping_details\/",{shipment_id:{type:"String",required:true}});},null);
__d('MNCommerceShipmentDataManager',['AsyncRequest','MNCommerceShipmentActions','XMNCommerceShippingDetailsController'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.prototype.fetchShipment=function(i){var j=c('XMNCommerceShippingDetailsController').getURIBuilder().setString('shipment_id',i).getURI();new (c('AsyncRequest'))().setURI(j).setHandler(this.$MNCommerceShipmentDataManager1).setErrorHandler(this.$MNCommerceShipmentDataManager2).send();};h.prototype.$MNCommerceShipmentDataManager1=function(i){c('MNCommerceShipmentActions').shipmentLoaded(i.payload);};h.prototype.$MNCommerceShipmentDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.shipment_id;c('MNCommerceShipmentActions').shipmentLoadError(k);};function h(){}f.exports=new h();},null);
__d('MNCommerceShipmentStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommerceShipmentDataManager'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommerceShipmentStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.shipmentID;switch(l){case c('MNCommerceActionTypes').SHIPMENT.LOADED:var n=k.shipment;this.$MNCommerceShipmentStore1.set(n.shipment_id,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').SHIPMENT.LOAD_ERROR:this.$MNCommerceShipmentStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load shipment: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').SHIPMENT.RELOAD:if(m){this.$MNCommerceShipmentStore1.set(m,c('LoadObject').loading());c('MNCommerceShipmentDataManager').fetchShipment(m);}this.__emitChange();break;}};j.prototype.getShipment=function(k){if(k&&!this.$MNCommerceShipmentStore1.has(k)){this.$MNCommerceShipmentStore1.set(k,c('LoadObject').loading().setValue({shipmentID:k}));c('MNCommerceShipmentDataManager').fetchShipment(k);}return this.$MNCommerceShipmentStore1.get(k)||c('LoadObject').empty();};f.exports=new j();},null);
__d('MNCommerceShippingDetailsDialogContainer.react',['BanzaiLogger','GeoCoordinates','immutable','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceShippingDetailsDialog.react','MNCommerceShipmentActions','MNCommerceShipmentStore','PureStoreBasedStateMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'MNCommerceShippingDetailsDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceShipmentStore'))],statics:{calculateState:function(){var i=c('MNCommerceDialogStateStore').getState(),j=null;if(i)j=i.shipmentID;var k=c('MNCommerceShipmentStore').getShipment(j);if(!k.isLoading())c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:k.hasError()?c('MNCommerceLoggerEvents').DIALOG_LOAD_ERROR:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.SHIPMENT,shipment_id:j})});return {shown:!!i,loading:k.isLoading(),shipmentID:j,shipment:k.getValue(),error:k.getError()};}},render:function(){return (c('React').createElement(c('MNCommerceShippingDetailsDialog.react'),{loading:this.state.loading,error:this.state.error,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown,shipment:this._getParsedShipment(this.state.shipment)}));},_getParsedShipment:function(i){if(!i)return {};var j=[],k=i.origin,l=i.events;if(k&&k.latitude&&(!l||Object.keys(l).length===0)){j=[new (c('GeoCoordinates'))(k.latitude,k.longitude)];}else if(l)j=Object.keys(l).map(function(n){var o=l[n];if(o.tracking_event_location&&o.tracking_event_location.latitude!=null&&o.tracking_event_location.longitude!=null)return new (c('GeoCoordinates'))(o.tracking_event_location.latitude,o.tracking_event_location.longitude);});var m=Array.isArray(i.destination)?null:i.destination;return {address:m,carrierInfo:i.carrier,changeURL:i.carrier_tracking_url,delivered:i.delivered,deliverDate:i.estimated_delivery_display_time,shipDate:i.display_ship_date,destination:i.destination&&i.destination.latitude?new (c('GeoCoordinates'))(i.destination.latitude,i.destination.longitude):null,items:i.items,legalText:i.legal_text,logo:i.carrier_logo?{height:i.carrier_logo.height,width:i.carrier_logo.width,src:i.carrier_logo.url}:null,name:i.recipient_name?i.recipient_name:null,orderDetailsURL:i.order_details_url,progress:i.events,shippingCheckPoints:c('immutable').List(j),trackingNumber:i.tracking_number};},_onToggle:function(i){if(!i){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.SHIPMENT,shipment_id:this.state.shipment.shipment_id})});c('MNCommerceDialogStateActions').hideDialog();}},_onTryAgainClick:function(){c('MNCommerceShipmentActions').shipmentReload(this.state.shipmentID);}});f.exports=h;},null);
__d('MNCommerceShippingMercuryAttachment.react',['cx','fbt','GeoCoordinates','immutable','MNCommerceItemList.react','MNCommerceAttachmentConstants','MNCommerceAttachmentUtils','MNCommerceLogoHeader.react','MNCommerceBubbleSection.react','MNCommerceShipmentTrackingEventTypes','MNCommerceShippingMap.react','MNCommerceViewTypes','MercuryShareAttachmentRenderLocations','React','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'MNCommerceShippingMercuryAttachment',propTypes:{carrierInfo:j.string,carrierTrackingURL:j.string,deliveryDate:j.string,deliveryPeriod:j.string,destination:j.shape,hasUnsupportedCarrier:j.bool,items:j.array.isRequired,location:j.string,logo:j.object,shippingDate:j.string,type:j.number,width:j.number,onAttachmentClick:j.func,shippingCheckPoints:j.array,delivered:j.bool},render:function(){var l=null;if(!this.props.hasUnsupportedCarrier&&this.props.logo)l=c('React').createElement('div',{className:"_3lx4"},c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:this.props.logo,logoPosition:'left'}));var m=this.props.items.length>1?i._("Items"):i._("Item");return (c('React').createElement('div',{className:c('joinClasses')("_3lx3"+(this.props.location===c('MercuryShareAttachmentRenderLocations').WEB_INBOX?' '+"_1hf9":''),this.props.className),onClick:this.props.onAttachmentClick},this._renderUnsupportedURL(),this._renderShippingMap(),c('React').createElement('div',{className:"_2jdp"},c('React').createElement('div',{className:"_2jdq"},l,c('React').createElement('div',{className:"_3lx5"},this._renderShippingMapDescriptionOrFallback(),c('React').createElement(c('MNCommerceBubbleSection.react'),{label:m},this._renderItemDescriptions()))))));},_renderUnsupportedURL:function(){if(this.props.hasUnsupportedCarrier&&this.props.carrierTrackingURL)return (c('React').createElement('a',{href:this.props.carrierTrackingURL,target:'_blank'}));},_renderShippingMap:function(){if(c('MNCommerceAttachmentUtils').shouldRenderMap(this.props.destination,this.props.shippingDate)){var l=new (c('GeoCoordinates'))(this.props.destination.latitude,this.props.destination.longitude);return (c('React').createElement(c('MNCommerceShippingMap.react'),{className:"_gn9",destination:l,shippingCheckPoints:c('immutable').List(this.props.shippingCheckPoints),location:this.props.location,style:{height:c('MNCommerceAttachmentConstants').SINGLE_IMAGE_HEIGHT},width:this.props.width,delivered:this.props.delivered}));}},_renderShippingMapDescriptionOrFallback:function(){if(c('MNCommerceAttachmentUtils').shouldRenderMap(this.props.destination,this.props.deliveryDate)){var l=this.props.deliveryDate;if(this.props.deliveryPeriod)l+=', '+this.props.deliveryPeriod;var m=c('MNCommerceAttachmentUtils').getDestinationAddressString(this.props.destination);return (c('React').createElement('div',null,this._renderDeliverySection(),c('React').createElement(c('MNCommerceBubbleSection.react'),{label:i._("Ship to")},m)));}return (c('React').createElement('div',null,this._renderShippingSection(),this._renderDeliveryOrCarrierSection()));},_renderDeliveryOrCarrierSection:function(){if(this.props.hasUnsupportedCarrier){return (c('React').createElement(c('MNCommerceBubbleSection.react'),{label:i._("Carrier")},this.props.carrierInfo));}else if(!this.props.deliveryDate){return null;}else return this._renderDeliverySection();},_renderDeliverySection:function(){var l=this.props.type===c('MNCommerceShipmentTrackingEventTypes').DELAYED?c('React').createElement('span',null,c('React').createElement('span',{className:"_5ryb"},i._("Delayed")),' ',' Â· ',' '):'',m=this.props.deliveryDate;if(this.props.deliveryPeriod)m+=', '+this.props.deliveryPeriod;return (c('React').createElement(c('MNCommerceBubbleSection.react'),{label:this._getDeliveryLabel()},l,m));},_getDeliveryLabel:function(){switch(this.props.type){case c('MNCommerceShipmentTrackingEventTypes').OUT_FOR_DELIVERY:return i._("Out for delivery on");case c('MNCommerceShipmentTrackingEventTypes').DELIVERED:return i._("Delivered on");default:return i._("Delivery on");}},_renderShippingSection:function(){if(!this.props.type)return (c('React').createElement(c('MNCommerceBubbleSection.react'),{label:i._("Shipped on")},this.props.shippingDate));return null;},_renderItemDescriptions:function(){if(!this.props.items.length)return null;var l=this.props.width-2*c('MNCommerceAttachmentConstants').BUBBLE_PADDING;return (c('React').createElement(c('MNCommerceItemList.react'),{items:this.props.items,imageDimension:c('MNCommerceAttachmentConstants').SMALL_IMAGE_DIMENSION,size:'small',viewType:c('MNCommerceViewTypes').BUBBLE,width:l}));}});f.exports=k;},null);
__d('MNCommerceShippingMercuryShareAttachment.react',['BanzaiLogger','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MNCommerceBubbleType','MNCommerceDialogStateActions','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceShippingDetailsDialogContainer.react','MNCommerceShippingMercuryAttachment.react','ReactComponentWithPureRenderMixin','GeoCoordinates','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=252,j=c('React').createClass({displayName:'MNCommerceShippingMercuryShareAttachment',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:h.string,maxWidth:h.number},_getItems:function(){var k=this.props.attachment,l=[],m=k.target.items;Object.keys(m).forEach(function(n){var o=m[n],p=babelHelpers['extends']({},o);p.id=n;p.thumbURL=o.thumb_url;l.push(p);});return l;},_getShippingCheckPoints:function(){var k=this.props.attachment.target,l=[],m=k.origin,n=k.tracking_event_polyline;if(m&&m.latitude&&(!n||Object.keys(n).length===0)){l=[new (c('GeoCoordinates'))(m.latitude,m.longitude)];}else if(n){n=Object.values(n).filter(function(event){return event&&event.latitude!==null&&event.longitude!==null;});l=Object.values(n).map(function(event){return (new (c('GeoCoordinates'))(event.latitude,event.longitude));});}if(l.length>0){var o=l[l.length-1];if(l.length>0&&(o.latitude!==k.destination.latitude||o.longitude!==k.destination.longitude))l.push(new (c('GeoCoordinates'))(k.destination.latitude,k.destination.longitude));}return l;},render:function(){var k=this.props.attachment,l=k.target,m=l.messenger_commerce_bubble_type===c('MNCommerceBubbleType').FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER,n=this.props.location===c('MercuryShareAttachmentRenderLocations').WEB_INBOX?i:this.props.maxWidth,o={carrierInfo:l.carrier,carrierTrackingURL:l.carrier_tracking_url,deliveryDate:l.estimated_delivery_display_time||null,destination:l.destination,logo:k.target.carrier_logo?{height:k.target.carrier_logo.height,width:k.target.carrier_logo.width,src:k.target.carrier_logo.url}:null,items:this._getItems(),hasUnsupportedCarrier:m,location:this.props.location,width:n,type:l.tracking_event_type,shippingDate:l.display_ship_date||null,onAttachmentClick:m?null:this._onAttachmentClick,delivered:l.delivered,shippingCheckPoints:l.delivered?[]:this._getShippingCheckPoints()};return c('React').createElement(c('MNCommerceShippingMercuryAttachment.react'),o);},_onAttachmentClick:function(){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.SHIPMENT,shipment_id:this.props.attachment.target.shipment_id})});c('MNCommerceDialogStateActions').showDialog(c('MNCommerceShippingDetailsDialogContainer.react'),{shipmentID:this.props.attachment.target.shipment_id});}});f.exports=j;},null);
__d("XMomentsAppInstallLinkDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/moments_app\/install_link\/dialog\/",{share_id:{type:"String"},client_context:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d('MessengerMomentsAppShareAttachment.react',['cx','AsyncRequest','Image.react','ImageBlock.react','Link.react','MarauderLogger','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MercuryShareImage.react','React','ReactComponentWithPureRenderMixin','XUIButton.react','XMomentsAppInstallLinkDialogController','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=179,k=82,l=200,m={},n=c('React').createClass({displayName:'MessengerMomentsAppShareAttachment',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:i.string,rootClassName:i.string},render:function(){var o=this.props.attachment;if(!o||!o.target)return null;if(!m[o.share_id]){m[o.share_id]=true;c('MarauderLogger').log('moments_invite_impression',undefined,{share_id:o.share_id});}return (c('React').createElement(c('Link.react'),{className:c('joinClasses')("_-2m",this.props.rootClassName),onClick:function(){return this._onClick();}.bind(this)},this._renderContentBlock(o)));},_onClick:function(){var o=this.props.attachment;if(!o||!o.target)return;var p=String(o.share_id),q=c('XMomentsAppInstallLinkDialogController').getURIBuilder().setString('share_id',p).getURI();c('MarauderLogger').log('moments_invite_install_clicked',undefined,{share_id:p});new (c('AsyncRequest'))(q).send();},_renderContentBlock:function(o){var p=o.media&&o.media.image,q=o.target.call_to_action_text,r=this.props.location;if(r===c('MercuryShareAttachmentRenderLocations').CHAT||r===c('MercuryShareAttachmentRenderLocations').MESSENGER){var s=null;if(p)if(r===c('MercuryShareAttachmentRenderLocations').CHAT){s=c('React').createElement(c('MercuryShareImage.react'),{source:p,width:j,height:k});}else s=c('React').createElement('div',{className:"_54hl",style:{backgroundImage:'url('+p+')'}});return (c('React').createElement('div',{className:"_54hm"},s,c('React').createElement('div',{className:"_1ath"},this._renderTextBlock(o,"_1ati"),c('React').createElement('div',{className:"_-2n"}),c('React').createElement('div',{className:"_1atj"},q))));}else{var t=c('React').createElement('div',{className:"_2pi8"},this._renderTextBlock(o),c('React').createElement(c('XUIButton.react'),{className:"_3-8n",label:q}));if(!p)return t;return (c('React').createElement(c('ImageBlock.react'),null,c('React').createElement(c('Image.react'),{src:p,width:l}),t));}},_renderTextBlock:function(o,p){return (c('React').createElement('div',{className:c('joinClasses')("_54hq",p)},c('React').createElement('div',{className:"_-2p"},o.title),c('React').createElement('div',{className:"_-2q"},o.description)));}});f.exports=n;},null);
__d('MercuryShareSizeImageByWidthMixin',['Image.react','MercuryAttachment','MercuryShareAttachmentRenderLocations','MercuryShareImage.react','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_getImageSize:function(i){var j=this.props.attachment&&this.props.attachment.media,k=i?j&&j.animated_image_size:j&&j.image_size;return this.props.maxWidth?c('MercuryAttachment').resizeContain({height:this.props.maxWidth,width:this.props.maxWidth},k):k;},_renderImage:function(i){var j=this.props.attachment&&this.props.attachment.media,k=this._getImageSize(i),l=i?j&&j.animated_image:j&&j.image;if(this.props.location==c('MercuryShareAttachmentRenderLocations').CHAT){return (c('React').createElement(c('MercuryShareImage.react'),{height:k&&k.height,source:l,width:k&&k.width}));}else return (c('React').createElement(c('Image.react'),{height:k&&k.height,src:l,width:k&&k.width}));}};f.exports=h;},null);
__d('MercuryAnimatedShareAttachment.react',['Link.react','MercuryAttachmentType','MercuryFallbackShareAttachment.react','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MercuryShareSizeImageByWidthMixin','MessengerPhotoishXMA.react','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryAnimatedShareAttachment',mixins:[c('MercuryShareSizeImageByWidthMixin')],propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:h.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),maxWidth:h.number},render:function(){if(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW){return c('React').createElement(c('MercuryFallbackShareAttachment.react'),this.props);}else if(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER)return (c('React').createElement(c('MessengerPhotoishXMA.react'),{attachType:c('MercuryAttachmentType').ANIMATED_IMAGE,attachments:[this.props.attachment]}));var j=this.props.attachment&&this.props.attachment.uri;return (c('React').createElement(c('Link.react'),{href:j,target:'_blank'},this._renderImage(true)));}});f.exports=i;},null);
__d('MercuryImageShareAttachment.react',['Link.react','MercuryAttachmentType','MercuryFallbackShareAttachment.react','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MercuryShareSizeImageByWidthMixin','MessengerPhotoishXMA.react','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryImageShareAttachment',mixins:[c('MercuryShareSizeImageByWidthMixin')],propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:h.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),maxWidth:h.number},render:function(){if(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW){return c('React').createElement(c('MercuryFallbackShareAttachment.react'),this.props);}else if(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER)return (c('React').createElement(c('MessengerPhotoishXMA.react'),{attachType:c('MercuryAttachmentType').PHOTO,attachments:[this.props.attachment]}));var j=this.props.attachment&&this.props.attachment.uri;return (c('React').createElement(c('Link.react'),{href:j,target:'_blank'},this._renderImage()));}});f.exports=i;},null);
__d("XPlacesMapController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/places\/map\/",{id:{type:"Int"},latitude:{type:"Float",defaultValue:0},longitude:{type:"Float",defaultValue:0},address:{type:"StringVector",defaultValue:[]},name:{type:"String"},zoom:{type:"Int"},message_location_id:{type:"Int"},polygon_page_id:{type:"Int"},dialog_width:{type:"Int"},map_width:{type:"Int"},map_height:{type:"Int"},hide_footer:{type:"Int"},__asyncDialog:{type:"Int"}});},null);
__d('MercuryMessageLocationShareAttachment.react',['cx','Link.react','MercuryFallbackShareAttachmentContent.react','MercuryShareAttachmentRenderLocations','MercuryShareAttachmentReactShape','React','XPlacesMapController'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryMessageLocationShareAttachment',propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:i.oneOf(c('MercuryShareAttachmentRenderLocations').getValues())},renderLink:function(k){if(c('MercuryShareAttachmentRenderLocations').isPreview(this.props.location))return k;var l=this.props.attachment.deduplication_key,m=c('XPlacesMapController').getURIBuilder().setInt('message_location_id',l).getURI();return (c('React').createElement(c('Link.react'),{className:"_5rw4",href:this.props.attachment.uri,ajaxify:m,rel:'dialog',target:'_blank'},k));},render:function(){return this.renderLink(c('React').createElement(c('MercuryFallbackShareAttachmentContent.react'),this.props));}});f.exports=j;},null);
__d('MercuryVideoShareAttachment.react',['cx','ix','CenteredContainer.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','Link.react','MercuryAttachmentType','MercuryFallbackShareAttachment.react','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MercuryShareSizeImageByWidthMixin','MessengerPhotoishXMA.react','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'MercuryVideoShareAttachment',mixins:[c('MercuryShareSizeImageByWidthMixin')],propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:j.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),maxWidth:j.number},render:function(){if(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW){return c('React').createElement(c('MercuryFallbackShareAttachment.react'),this.props);}else if(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER)return (c('React').createElement(c('MessengerPhotoishXMA.react'),{attachType:c('MercuryAttachmentType').VIDEO,attachments:[this.props.attachment]}));var l=this.props.attachment&&this.props.attachment.uri;return (c('React').createElement(c('Link.react'),{rel:'theater',href:l},c('React').createElement(c('FBOverlayContainer.react'),{className:"clearfix",style:this._getImageSize()},c('React').createElement(c('FBOverlayBase.react'),null,this._renderImage()),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement(c('CenteredContainer.react'),{vertical:true},c('React').createElement(c('Image.react'),{src:i('/images/chat/chat_play_icon.png')}))))));}});f.exports=k;},null);
__d('P2PMercuryAttachment.react',['cx','fbt','CurrentUser','P2PAcceptMoneyDialog.react','P2PActions','P2PButton.react','P2PCreditCardStore','P2PEncryptedText.react','P2PGroupSendReceiptDialog.react','P2PLinkConstants','P2PMercuryAttachmentBubble.react','P2PNUXRendererUtils','P2PTransferParam','P2PTransferStatus','P2PVerificationFlowHelper','React','URI','XP2PTransactionDetailController'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PMercuryAttachment',propTypes:{creditCards:j.array.isRequired,transfer:j.object.isRequired,theme:j.string},viewerIsSender:function(){return c('CurrentUser').getID()===this.props.transfer.sender.id;},viewerIsReceiver:function(){return c('CurrentUser').getID()===this.props.transfer.receiver.id;},viewerIsThirdParty:function(){return !this.viewerIsSender()&&!this.viewerIsReceiver();},getStatus:function(){var l=i._("Pending"),m=i._("Completed"),n=i._("Canceled"),o=i._("Sent"),p=this.viewerIsSender(),q=this.viewerIsThirdParty();switch(this.props.transfer[c('P2PTransferParam').STATUS]){case c('P2PTransferStatus').PENDING_RECIPIENT_PROCESSING:case c('P2PTransferStatus').INTERMEDIATE_PROCESSING:case c('P2PTransferStatus').PENDING_RECIPIENT_NUX:case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION:case c('P2PTransferStatus').PENDING_RECIPIENT_MANUAL_REVIEW:case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION_PROCESSING:case c('P2PTransferStatus').PENDING_PUSH_FAIL:case c('P2PTransferStatus').PENDING_SENDER_INITED:return p||q?o:l;case c('P2PTransferStatus').PENDING_SENDER_MANUAL_REVIEW:case c('P2PTransferStatus').PENDING_SENDER_VERIFICATION:case c('P2PTransferStatus').PENDING_SENDER_VERIFICATION_PROCESSING:return l;case c('P2PTransferStatus').CANCELED_SENDER_RISK:case c('P2PTransferStatus').CANCELED_DECLINED:case c('P2PTransferStatus').CANCELED_RECIPIENT_RISK:case c('P2PTransferStatus').CANCELED_SYSTEM_FAIL:case c('P2PTransferStatus').CANCELED_EXPIRED:case c('P2PTransferStatus').CANCELED_SAME_CARD:return n;case c('P2PTransferStatus').COMPLETED:return m;default:return l;}},isGrayStatus:function(){switch(this.props.transfer[c('P2PTransferParam').STATUS]){case c('P2PTransferStatus').INTERMEDIATE_PROCESSING:case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION:case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION_PROCESSING:case c('P2PTransferStatus').PENDING_RECIPIENT_MANUAL_REVIEW:case c('P2PTransferStatus').PENDING_RECIPIENT_NUX:case c('P2PTransferStatus').PENDING_RECIPIENT_PROCESSING:case c('P2PTransferStatus').PENDING_PUSH_FAIL:return this.viewerIsReceiver();case c('P2PTransferStatus').PENDING_SENDER_MANUAL_REVIEW:case c('P2PTransferStatus').PENDING_SENDER_VERIFICATION:case c('P2PTransferStatus').PENDING_SENDER_VERIFICATION_PROCESSING:case c('P2PTransferStatus').CANCELED_SENDER_RISK:case c('P2PTransferStatus').CANCELED_DECLINED:case c('P2PTransferStatus').CANCELED_RECIPIENT_RISK:case c('P2PTransferStatus').CANCELED_SYSTEM_FAIL:case c('P2PTransferStatus').CANCELED_EXPIRED:case c('P2PTransferStatus').CANCELED_SAME_CARD:return true;case c('P2PTransferStatus').COMPLETED:case c('P2PTransferStatus').PENDING_SENDER_INITED:return false;default:return false;}},shouldRenderBannerFooter:function(){if(c('P2PNUXRendererUtils').doesNUXNeedCreditCards(this.props.transfer)&&!c('P2PCreditCardStore').isCreditCardsFetchComplete()||this.viewerIsThirdParty())return false;return (c('P2PNUXRendererUtils').isRecipientActionableStatus(this.props.transfer));},handleConfirmInfoButtonClicked:function(){c('P2PVerificationFlowHelper').startVerificationFlow(this.props.transfer[c('P2PTransferParam').TRANSFER_ID],false);},handleAddCardButtonClicked:function(){c('P2PActions').showDialog(c('P2PAcceptMoneyDialog.react'),{creditCards:this.props.creditCards,onClose:this.handleAcceptMoneyDialogClose,transfer:this.props.transfer});},handleAcceptMoneyDialogClose:function(){c('P2PActions').hideDialog();},renderInlineBanner:function(){var l=this.props.transfer[c('P2PTransferParam').STATUS];if(l===c('P2PTransferStatus').PENDING_RECIPIENT_NUX){return this.renderPendingRecipientNUX();}else if(l===c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION){return this.renderPendingRecipientVerification();}else if(l===c('P2PTransferStatus').PENDING_PUSH_FAIL)return this.renderPendingPushFail();},renderPendingRecipientNUX:function(){var l=this.props.transfer;return (c('React').createElement('div',null,c('React').createElement('div',{className:"_3asc"},i._("{sender_name} Sent You Money!",[i.param('sender_name',l.sender.name)])),c('React').createElement('div',{className:"_3asd"},i._("It's free to accept it. Just add a debit card."),c('React').createElement('div',{className:"_2pic"},c('React').createElement(c('P2PEncryptedText.react'),{showPasswordProtected:true}))),c('React').createElement('div',{className:"_5abs"},c('React').createElement(c('P2PButton.react'),{use:'confirm',size:'medium',label:i._("Add Debit Card"),type:'primary',onClick:this.handleAddCardButtonClicked}))));},renderPendingRecipientVerification:function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_3asc"},i._("Please Confirm Your Info")),c('React').createElement('div',{className:"_3asd"},i._("To accept the money {sender_name} sent you, please confirm your information.",[i.param('sender_name',this.props.transfer.sender.name)])),c('React').createElement('div',{className:"_5abs"},c('React').createElement(c('P2PButton.react'),{use:'confirm',size:'medium',label:i._("Confirm Info"),type:'primary',onClick:this.handleConfirmInfoButtonClicked}))));},renderPendingPushFail:function(){var l=this.props.transfer;return (c('React').createElement('div',null,c('React').createElement('div',{className:"_3asc"},i._("Update Your Card")),c('React').createElement('div',{className:"_3asd"},i._("{currency}{amount} from {sender_name} couldn't be deposited using your debit card.",[i.param('currency',l.currency),i.param('amount',l.amount),i.param('sender_name',l.sender.name)])),c('React').createElement('div',{className:"_5abs"},c('React').createElement(c('P2PButton.react'),{use:'confirm',size:'medium',label:i._("Learn More"),type:'primary',href:new (c('URI'))(c('P2PLinkConstants').helpTransferPushFailURI),target:'_blank'}))));},getTransferStatusDate:function(){var l,m=this.props.transfer[c('P2PTransferParam').STATUS];switch(m){case c('P2PTransferStatus').COMPLETED:l=this.props.transfer.completedTime;break;case c('P2PTransferStatus').CANCELED_SENDER_RISK:case c('P2PTransferStatus').CANCELED_DECLINED:case c('P2PTransferStatus').CANCELED_RECIPIENT_RISK:case c('P2PTransferStatus').CANCELED_SYSTEM_FAIL:case c('P2PTransferStatus').CANCELED_EXPIRED:case c('P2PTransferStatus').CANCELED_SAME_CARD:l=this.props.transfer.updatedTime;break;}if(!l)l=this.props.transfer.creationTime;return l;},getTransferDetailsURI:function(){if(!this.viewerIsThirdParty())return (c('XP2PTransactionDetailController').getURIBuilder().setString('id',this.props.transfer[c('P2PTransferParam').TRANSFER_ID]).getURI());},handleBubbleClick:function(){if(this.viewerIsThirdParty())c('P2PActions').showDialog(c('P2PGroupSendReceiptDialog.react'),{amount:this.props.transfer.amount,onClose:this.handleGroupSendReceiptClosed,receiver:this.props.transfer.receiver,sender:this.props.transfer.sender});},handleGroupSendReceiptClosed:function(){c('P2PActions').hideDialog();},render:function(){var l,m=this.props.transfer.memoText,n=this.props.transfer.memoPhotoURLs,o=false;if(this.shouldRenderBannerFooter())l=this.renderInlineBanner()||undefined;o=!!(m&&l);return (c('React').createElement(c('P2PMercuryAttachmentBubble.react'),{amount:this.props.transfer.amount,date:this.getTransferStatusDate(),detailsURI:this.getTransferDetailsURI(),bannerContent:l,forceMemoTextShown:o,isGroupThread:!!this.props.transfer.groupThreadFBID,isMessagesView:this.props.theme==='messages',isPending:this.isGrayStatus(),isSender:this.viewerIsSender(),memoText:m,memoPhotoURLs:n,onClick:this.handleBubbleClick,receiverName:this.props.transfer.receiver.full_name,statusText:this.getStatus()}));}});f.exports=k;},null);
__d("XTilesStaticMapController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/staticmap\/",{bbox:{type:"String"},center:{type:"String"},circle:{type:"String"},format:{type:"String"},language:{type:"String"},markers:{type:"String"},marker_list:{type:"StringVector"},path:{type:"String"},paths:{type:"StringVector"},region:{type:"String"},scale:{type:"Int"},size:{type:"String",required:true},u:{type:"String"},v:{type:"Int"},visible:{type:"String"},zoom:{type:"Int"},map_eval_src:{type:"String"},osm_provider:{type:"Enum",enumType:0},theme:{type:"Enum",enumType:1}});},null);