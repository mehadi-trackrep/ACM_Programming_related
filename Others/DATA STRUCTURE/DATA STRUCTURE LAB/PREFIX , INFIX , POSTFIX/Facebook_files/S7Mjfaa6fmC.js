/*!CK:4206653144!*//*1460065232,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dG+4X"]); }

__d("VideoChannelRequestStatus",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCEEDED:"succeeded",FAILED:"failed",ABORTED:"aborted"};},null);
__d("XVideoChannelViewAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/async\/{id}\/",{id:{type:"String",required:true},original_video_id:{type:"String",required:true},cursor:{type:"String"},story_count:{type:"Int",defaultValue:3},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},is_watch_and_scroll:{type:"Bool",defaultValue:false}});},null);
__d("XVideoChannelViewStoryAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/story\/async\/{root_video_id}\/",{root_video_id:{type:"String",required:true},video_ids:{type:"StringVector",defaultValue:[]},use_video_placeholder:{type:"Bool",defaultValue:false},setup_interactions:{type:"Bool",defaultValue:false},is_first_story:{type:"Bool",defaultValue:false},feed_tracking_data:{type:"StringVector",defaultValue:[]},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},channel_id:{type:"String"},ad_impression_token:{type:"String"},is_watch_and_scroll:{type:"Bool",defaultValue:false}});},null);
__d('VideoChannelStoryFetcher',['AsyncRequest','HTML','VideoChainingCaller','VideoChannelLogger','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelRequestStatus','VideoChannelViewVariables','XVideoChannelViewAsyncController','XVideoChannelViewStoryAsyncController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher4=k;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher12=false;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};if(m){this.$VideoChannelStoryFetcher5=m.videoIDs;this.$VideoChannelStoryFetcher6=m.feedTrackingData;this.$VideoChannelStoryFetcher2=m.cursorInfo.cursor;this.$VideoChannelStoryFetcher3=m.cursorInfo.hasNextPage;var n=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);c('VideoChannelLogger').setOffset(n);this.$VideoChannelStoryFetcher9.start=n;this.$VideoChannelStoryFetcher9.end=n+1;}c('VideoChannelLogger').setPosition(0);this.$VideoChannelStoryFetcher11=l;this.$VideoChannelStoryFetcher13=[];this.$VideoChannelStoryFetcher14=[];}h.prototype.reset=function(i,j){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};this.$VideoChannelStoryFetcher13=[];this.$VideoChannelStoryFetcher14=[];};h.prototype.abandonRequest=function(){'use strict';this.$VideoChannelStoryFetcher1&&this.$VideoChannelStoryFetcher1.abandon();};h.prototype.hasNext=function(){'use strict';var i=this.$VideoChannelStoryFetcher5.length-this.$VideoChannelStoryFetcher9.end>0;return this.$VideoChannelStoryFetcher3||i;};h.prototype.$VideoChannelStoryFetcher15=function(event,i,j){'use strict';var k={};k[c('VideoChannelLoggerFields').EVENT]=event;k[c('VideoChannelLoggerFields').REQUEST_STATUS]=i;k[c('VideoChannelLoggerFields').PERF_TIME_MS]=Date.now()-j;c('VideoChannelLogger').log(k);};h.prototype.fetchFirstStory=function(i,j,k){'use strict';if(j===null)if(this.$VideoChannelStoryFetcher5.length!==0){var l=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);j=this.$VideoChannelStoryFetcher6[l];}var m=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',this.$VideoChannelStoryFetcher4).setStringVector('video_ids',[this.$VideoChannelStoryFetcher7]).setString('root_video_id',this.$VideoChannelStoryFetcher7).setBool('is_first_story',true).setBool('use_video_placeholder',i).setBool('setup_interactions',k).setString('channel_id',this.$VideoChannelStoryFetcher8).setString('ad_impression_token',this.$VideoChannelStoryFetcher11);if(j)m.setStringVector('feed_tracking_data',[JSON.stringify(j)]);var n=Date.now(),o=new (c('AsyncRequest'))(m.getURI()).setAllowCrossPageTransition(true).setHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').SUCCEEDED,n);this.$VideoChannelStoryFetcher16();}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').FAILED,n);this.$VideoChannelStoryFetcher16();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').ABORTED,n);this.$VideoChannelStoryFetcher16();}.bind(this));this.$VideoChannelStoryFetcher1=o;this.$VideoChannelStoryFetcher10=Date.now();o.send();};h.prototype.getPreloadedData=function(){'use strict';return {stories:this.$VideoChannelStoryFetcher13,thumbnails:this.$VideoChannelStoryFetcher14};};h.prototype.$VideoChannelStoryFetcher17=function(i,j){'use strict';if(!this.$VideoChannelStoryFetcher8)return;var k=c('XVideoChannelViewAsyncController').getURIBuilder().setString('id',this.$VideoChannelStoryFetcher8).setEnum('caller',this.$VideoChannelStoryFetcher4).setString('original_video_id',this.$VideoChannelStoryFetcher7).setInt('story_count',i).setBool('is_watch_and_scroll',this.$VideoChannelStoryFetcher12);if(this.$VideoChannelStoryFetcher2)k.setString('cursor',this.$VideoChannelStoryFetcher2.toString());var l=Date.now(),m=k.getURI(),n=new (c('AsyncRequest'))(m).setAllowCrossPageTransition(true).setHandler(function(o){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').SUCCEEDED,l);this.$VideoChannelStoryFetcher2=o.getPayload().cursor;this.$VideoChannelStoryFetcher3=o.getPayload().hasNextPage;this.$VideoChannelStoryFetcher16();this.$VideoChannelStoryFetcher18(o,function(p,q){this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,p);this.$VideoChannelStoryFetcher14=[].concat(this.$VideoChannelStoryFetcher14,q);return j(p,q);}.bind(this));}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').FAILED,l);this.$VideoChannelStoryFetcher16();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').ABORTED,l);this.$VideoChannelStoryFetcher16();}.bind(this));this.$VideoChannelStoryFetcher1=n;n.send();};h.prototype.$VideoChannelStoryFetcher19=function(i,j,k){var l=this;'use strict';var m=this.$VideoChannelStoryFetcher9.end,n=this.$VideoChannelStoryFetcher5.length-m,o=m+Math.min(n,i);if(n>0){(function(){var p=l.$VideoChannelStoryFetcher5.slice(m,o),q=l.$VideoChannelStoryFetcher6.slice(m,o).map(function(t){return JSON.stringify(t);}),r=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',l.$VideoChannelStoryFetcher4).setString('root_video_id',l.$VideoChannelStoryFetcher7).setStringVector('video_ids',p).setStringVector('feed_tracking_data',q).setBool('is_watch_and_scroll',l.$VideoChannelStoryFetcher12),s=Date.now();l.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(r.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').FAILED,s);this.$VideoChannelStoryFetcher16();}.bind(l)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').ABORTED,s);this.$VideoChannelStoryFetcher16();}.bind(l)).setHandler(function(t){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').SUCCEEDED,s);this.$VideoChannelStoryFetcher9.end=o;this.$VideoChannelStoryFetcher16();this.$VideoChannelStoryFetcher18(t,function(u,v){this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,u);this.$VideoChannelStoryFetcher14=[].concat(this.$VideoChannelStoryFetcher14,v);return j(u,v);}.bind(this));}.bind(l));l.$VideoChannelStoryFetcher1.send();if(k)k(n);})();}else if(this.$VideoChannelStoryFetcher3){this.$VideoChannelStoryFetcher17(i,j);if(k)k(i);}};h.prototype.$VideoChannelStoryFetcher20=function(i,j,k){var l=this;'use strict';var m=this.$VideoChannelStoryFetcher9.start;if(m>0)(function(){var n=Math.max(m-i,0),o=l.$VideoChannelStoryFetcher5.slice(n,m),p=l.$VideoChannelStoryFetcher6.slice(n,m).map(function(s){return JSON.stringify(s);}),q=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',l.$VideoChannelStoryFetcher4).setString('root_video_id',l.$VideoChannelStoryFetcher7).setStringVector('video_ids',o).setStringVector('feed_tracking_data',p),r=Date.now();l.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(q.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').FAILED,r);this.$VideoChannelStoryFetcher16();}.bind(l)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').ABORTED,r);this.$VideoChannelStoryFetcher16();}.bind(l)).setHandler(function(s){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').SUCCEEDED,r);this.$VideoChannelStoryFetcher9.start=n;this.$VideoChannelStoryFetcher16();this.$VideoChannelStoryFetcher18(s,j);}.bind(l));l.$VideoChannelStoryFetcher1.send();if(k)k(m-n);})();};h.prototype.fetchStories=function(i,j,k){'use strict';var l=c('VideoChannelViewVariables').defaultStoriesToLoad;if(this.$VideoChannelStoryFetcher1)return;if(i){this.$VideoChannelStoryFetcher19(l,j,k);}else this.$VideoChannelStoryFetcher20(l,j,k);};h.prototype.$VideoChannelStoryFetcher18=function(i,j){'use strict';var k=i.getPayload(),l=c('HTML').replaceJSONWrapper(k.stories).getNodes(),m=k.thumbnails.map(function(n){return c('HTML').replaceJSONWrapper(n).getRootNode();});j(l,m);};h.prototype.$VideoChannelStoryFetcher16=function(){'use strict';this.$VideoChannelStoryFetcher1=null;};h.prototype.setIsWatchAndScroll=function(i){'use strict';this.$VideoChannelStoryFetcher12=i;};f.exports=h;},null);
__d('VideoWatchAndScrollNextPreview.react',['cx','fbt','CenteredContainer.react','DOMContainer.react','Layout.react','React','ReactCSSTransitionGroup'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('Layout.react').Column,l=c('Layout.react').FillColumn,m=c('React').createClass({displayName:'VideoWatchAndScrollNextPreview',propTypes:{fadeOut:j.bool,owner:j.string,thumbnail:j.instanceOf(HTMLElement).isRequired,viewCount:j.string},render:function(){var n=c('React').createElement('div',{className:"_4_e3 _2se8"});return (c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:0,transitionEnter:false,transitionLeave:false,transitionName:{appear:"_4zs7",appearActive:"_4zs8"}},c('React').createElement(c('CenteredContainer.react'),{className:"_1xun"+(this.props.fadeOut?' '+"_2eej":'')},c('React').createElement(c('Layout.react'),null,c('React').createElement(k,null,c('React').createElement('div',{className:"_1xuo"},c('React').createElement(c('DOMContainer.react'),null,this.props.thumbnail),c('React').createElement('div',{className:"_1xup"},c('React').createElement('div',{className:"_1xuq"})),n)),c('React').createElement(l,null,c('React').createElement('div',{className:"_1xur"},c('React').createElement('div',null,i._("Next Up:")),c('React').createElement('div',null,this.props.owner),c('React').createElement('div',null,this.props.viewCount),n))))));}});f.exports=m;},null);
__d('VideoWatchAndScrollContainer.react',['csx','cx','CSS','DOM','DOMContainer.react','DOMDimensions','Event','Parent','React','ReactCSSTransitionGroup','Rect','SubscriptionsHandler','VideoWatchAndScrollEndScreen.react','cancelAnimationFrame','getViewportDimensions','requestAnimationFrame','shallowCompare','throttle'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=300,n=300,o=470,p=3000,q=500,r=100,s={NW:'nw',NE:'ne',SE:'se',SW:'sw'};j=babelHelpers.inherits(t,c('React').Component);k=j&&j.prototype;function t(u,v){k.constructor.call(this,u,v);this.state=this.$VideoWatchAndScrollContainer4(this.props);}t.prototype.$VideoWatchAndScrollContainer4=function(u){var v=this.$VideoWatchAndScrollContainer5(),w=this.$VideoWatchAndScrollContainer6(this.props.initialPosition,v);return {channelVideoElements:[this.props.initialVideoElement],containerBoundingBox:v,dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,endScreenFadeOut:false,endScreenShown:false,fadeOut:false,height:w.height,left:w.left,nextVideoMetadata:null,overlayShown:false,resizeDirection:null,top:w.top,width:w.width,videoIndex:0};};t.prototype.shouldComponentUpdate=function(u,v){return !this.state.fadeOut&&c('shallowCompare')(this,u,v);};t.prototype.componentDidUpdate=function(u,v){if(!v)return;if(!v.dragging&&this.state.dragging){this.documentSubscriptions=new (c('SubscriptionsHandler'))();this.documentSubscriptions.addSubscriptions(c('Event').listen(document,'mousemove',this.$VideoWatchAndScrollContainer7.bind(this)),c('Event').listen(document,'mouseup',this.$VideoWatchAndScrollContainer8.bind(this)));}else if(v.dragging&&!this.state.dragging)this.documentSubscriptions.release();if(v.endScreenShown!==this.state.endScreenShown)if(this.state.endScreenShown){this.$VideoWatchAndScrollContainer2=setTimeout(function(){this.props.onChannelNavigation(1);this.$VideoWatchAndScrollContainer3=setTimeout(function(){this.setState({endScreenFadeOut:true});}.bind(this),q);this.$VideoWatchAndScrollContainer2=setTimeout(function(){this.setState({endScreenShown:false,endScreenFadeOut:false});}.bind(this),q+r);}.bind(this),p);}else{clearTimeout(this.$VideoWatchAndScrollContainer2);this.$VideoWatchAndScrollContainer2=null;this.setState({endScreenFadeOut:false});}var w=["._23if","._23ig"],x=v.channelVideoElements||[];this.state.channelVideoElements.forEach(function(y){if(x.indexOf(y)!==-1)return;w.forEach(function(z){var aa=c('DOM').scry(y,z),ba=aa[0];if(ba)c('CSS').hide(ba);});});};t.prototype.componentDidMount=function(){this.resizeListener=c('Event').listen(window,'resize',c('throttle')(function(){var u=this.$VideoWatchAndScrollContainer5(),v=this.$VideoWatchAndScrollContainer6({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},u);this.setState({containerBoundingBox:u,height:v.height,left:v.left,top:v.top,width:v.width});}.bind(this),100));};t.prototype.componentWillUnmount=function(){this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});if(this.documentSubscriptions)this.documentSubscriptions.release();if(this.resizeListener)this.resizeListener.remove();this.$VideoWatchAndScrollContainer1&&clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer2&&clearTimeout(this.$VideoWatchAndScrollContainer2);this.$VideoWatchAndScrollContainer3&&clearTimeout(this.$VideoWatchAndScrollContainer3);};t.prototype.$VideoWatchAndScrollContainer9=function(u,event){this.$VideoWatchAndScrollContainer10(event,u);};t.prototype.$VideoWatchAndScrollContainer11=function(event){if(!c('Parent').bySelector(event.target,"._3t-6"))return;this.$VideoWatchAndScrollContainer10(event,null);};t.prototype.$VideoWatchAndScrollContainer12=function(event){if(c('Parent').bySelector(event.target,"._3t-6"))return;if(c('Parent').bySelector(event.target,"._2se8"))return;if(event.button!==0)return;if(this.$VideoWatchAndScrollContainer1){this.props.onDoubleClick&&this.props.onDoubleClick();clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=null;}else this.$VideoWatchAndScrollContainer1=setTimeout(function(){this.props.onClick&&this.props.onClick();this.$VideoWatchAndScrollContainer1=null;}.bind(this),m);};t.prototype.$VideoWatchAndScrollContainer10=function(event,u){if(event.button!==0)return;if(c('Parent').bySelector(event.target,"._360f"))return;this.props.onGrab();this.setState({containerBoundingBox:this.$VideoWatchAndScrollContainer5(),dragging:true,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:event.screenX,draggingStartMousePositionY:event.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:u});event.preventDefault();};t.prototype.$VideoWatchAndScrollContainer5=function(){var u=0,v=c('DOM').scry(document.body,".fbChatSidebar");if(v.length===1)u=c('DOMDimensions').getElementDimensions(v[0]).width;var w=c('getViewportDimensions').withoutScrollbars(),x=new (c('Rect'))(43,w.width-u,w.height,0);return x;};t.prototype.$VideoWatchAndScrollContainer6=function(u,v){var w=new (c('Rect'))(u.top,u.left+u.width,u.top+u.height,u.left);w=w.boundWithin(v);return {height:w.h(),left:w.getLeft(),top:w.getTop(),width:w.w()};};t.prototype.$VideoWatchAndScrollContainer13=function(u,v,w){var x=u.top,y=v.getTop(),z=y-x;if(z>0){if(w===s.NE||w===s.NW)u.height-=z;u.top=y;}var aa=u.left,ba=v.getLeft(),ca=ba-aa;if(ca>0){if(w===s.NW||w===s.SW)u.width-=ca;u.left=ba;}var da=u.top+u.height,ea=v.getTop()+v.h(),fa=da-ea;if(fa>0)u.height=ea-u.top;var ga=u.left+u.width,ha=v.getLeft()+v.w(),ia=ga-ha;if(ia>0)u.width=ha-u.left;};t.prototype.$VideoWatchAndScrollContainer14=function(u,v,w){if(u.width<n){if(w===s.NW||w===s.SW)u.left-=n-u.width;u.width=n;}if(u.height<n){if(w===s.NE||w===s.NW)u.top-=n-u.height;u.height=n;}};t.prototype.$VideoWatchAndScrollContainer15=function(u,v,w){if(u.width>o){if(w===s.NW||w===s.SW)u.left+=u.width-o;u.width=o;}if(u.height>o){if(w===s.NE||w===s.NW)u.top+=u.height-o;u.height=o;}};t.prototype.$VideoWatchAndScrollContainer16=function(u,v,w){var x=u.width/u.height,y=v.width/v.height;if(x>y){var z=u.height*y;if(w===s.NW||w===s.SW)u.left+=u.width-z;u.width=z;}else if(x<y){var aa=u.width/y;if(w===s.NE||w===s.NW)u.top+=u.height-aa;u.height=aa;}};t.prototype.$VideoWatchAndScrollContainer17=function(u,v,w,x){this.$VideoWatchAndScrollContainer13(u,w,x);this.$VideoWatchAndScrollContainer14(u,v,x);this.$VideoWatchAndScrollContainer15(u,v,x);this.$VideoWatchAndScrollContainer16(u,v,x);return {height:u.height,left:u.left,top:u.top,width:u.width};};t.prototype.$VideoWatchAndScrollContainer7=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.dragUpdateRequestAnimationFrameID=c('requestAnimationFrame')(this.$VideoWatchAndScrollContainer18.bind(this,event));};t.prototype.$VideoWatchAndScrollContainer18=function(event){if(!this.state.dragging)return;var u=event.screenX-this.state.draggingStartMousePositionX,v=event.screenY-this.state.draggingStartMousePositionY,w=this.state.resizeDirection,x;if(!w){x=this.$VideoWatchAndScrollContainer6({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+u,top:this.state.draggingStartTop+v,width:this.state.draggingStartWidth},this.state.containerBoundingBox);this.setState({height:x.height,left:x.left,top:x.top,width:x.width});}else{var y=this.state.draggingStartHeight,z=this.state.draggingStartLeft,aa=this.state.draggingStartTop,ba=this.state.draggingStartWidth;if(w===s.NE||w===s.SE)ba+=u;if(w===s.NW||w===s.SW){z+=u;ba-=u;}if(w===s.SE||w===s.SW)y+=v;if(w===s.NE||w===s.NW){aa+=v;y-=v;}x=this.$VideoWatchAndScrollContainer17({height:y,left:z,top:aa,width:ba},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,w);this.setState({height:x.height,left:x.left,top:x.top,width:x.width});}event.preventDefault();};t.prototype.$VideoWatchAndScrollContainer8=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.props.onDrop();this.setState({dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null});event.preventDefault();};t.prototype.$VideoWatchAndScrollContainer19=function(u,v){if(u>this.state.channelVideoElements.length)return null;var w=this.state.channelVideoElements[u];if(!w)return null;return (c('React').createElement('div',{className:"_2yq3"+(v==='left'?' '+"_2yq4":'')+(v==='center'?' '+"_2yq5":'')+(v==='right'?' '+"_2yq6":''),key:w.id},c('React').createElement(c('DOMContainer.react'),null,w)));};t.prototype.render=function(){var u={height:Math.round(this.state.height)+'px',left:this.state.left+'px',top:this.state.top+'px',width:Math.round(this.state.width)+'px'};this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});var v=this.state.channelVideoElements,w=v[this.state.videoIndex];if(w)c('CSS').addClass(w,"_1kfp");var x=false,y=null;if(x)y=c('React').createElement('div',{className:(this.state.overlayShown?"_518-":'')+(' '+"_518_")},this.state.videoIndex>0&&c('React').createElement('a',{alt:'Button to go to the previous video item',className:"_5190 _360f",onClick:function(){return this.props.onChannelNavigation(-1);}.bind(this)}),this.state.videoIndex<v.length-1&&c('React').createElement('a',{alt:'Button to go to the next video item',className:"_5199 _360f",onClick:function(){return this.props.onChannelNavigation(1);}.bind(this)}));var z=null;if(this.state.endScreenShown)z=c('React').createElement(c('VideoWatchAndScrollEndScreen.react'),{fadeOut:this.state.endScreenFadeOut,nextVideoMetadata:this.state.nextVideoMetadata||{},onReplay:function(){return this.props.onReplay();}.bind(this)});return (c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:500,transitionEnter:false,transitionLeave:false,transitionName:'fbWatchAndScroll-FadeIn'},c('React').createElement('div',{className:"_360g"+(this.state.fadeOut?' '+"_473b":''),style:u},z,c('React').createElement('div',{className:"_52u8",onMouseDown:this.$VideoWatchAndScrollContainer11.bind(this),onClick:this.$VideoWatchAndScrollContainer12.bind(this)},this.$VideoWatchAndScrollContainer19(this.state.videoIndex-1,'left'),this.$VideoWatchAndScrollContainer19(this.state.videoIndex,'center'),this.$VideoWatchAndScrollContainer19(this.state.videoIndex+1,'right')),c('React').createElement('div',{className:"_52ua",onMouseDown:this.$VideoWatchAndScrollContainer9.bind(this,s.NW)}),c('React').createElement('div',{className:"_52uc",onMouseDown:this.$VideoWatchAndScrollContainer9.bind(this,s.NE)}),c('React').createElement('div',{className:"_52ui",onMouseDown:this.$VideoWatchAndScrollContainer9.bind(this,s.SE)}),c('React').createElement('div',{className:"_52uj",onMouseDown:this.$VideoWatchAndScrollContainer9.bind(this,s.SW)}),y,c('React').createElement('ul',{className:"_2yq7"},v.map(function(aa,ba){if(ba>this.state.videoIndex+1||ba<this.state.videoIndex-1)c('CSS').removeClass(aa,"_1kfp");if(ba<=this.state.videoIndex+1)return null;return (c('React').createElement('li',{key:aa.id},c('React').createElement(c('DOMContainer.react'),null,aa)));}.bind(this))))));};t.propTypes={initialPosition:l.object.isRequired,initialVideoElement:l.instanceOf(HTMLElement).isRequired,onChannelNavigation:l.func.isRequired,onClick:l.func.isRequired,onDoubleClick:l.func.isRequired,onDrop:l.func.isRequired,onGrab:l.func.isRequired,onInitialPositionUpdate:l.func.isRequired,onReplay:l.func.isRequired};f.exports=t;},null);
__d('VideoWatchAndScrollController',['csx','cx','invariant','Bootloader','CSS','DOM','DOMDimensions','EventListener','React','ReactDOM','SubscriptionsHandler','VideoAutoplayControllerX','VideoChainingCaller','VideoChannelStoryFetcher','VideoFrameBuffer','VideoPlayerExperiments','VideoPlayerLoggerEvent','VideoPlayerReason','VideoWatchAndScrollContainer.react','cancelAnimationFrame','destroyOnUnload','requestAnimationFrame','throttle'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=169,l=300,m=10,n=470,o=300,p=2,q=[c('VideoPlayerReason').AUTOPLAY,c('VideoPlayerReason').PAGE_VISIBILITY],r=300,s=3000,t=600,u=null;function v(w,x,y,z){'use strict';this.$VideoWatchAndScrollController35=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController36=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;this.$VideoWatchAndScrollController4=null;this.$VideoWatchAndScrollController5=false;this.$VideoWatchAndScrollController39=y;this.$VideoWatchAndScrollController40=z;this.$VideoWatchAndScrollController43=false;this.$VideoWatchAndScrollController34=false;this.$VideoWatchAndScrollController38=null;if(this.$VideoWatchAndScrollController40){this.$VideoWatchAndScrollController38=new (c('VideoChannelStoryFetcher'))(x,w,this.$VideoWatchAndScrollController39,null);this.$VideoWatchAndScrollController38.setIsWatchAndScroll(true);}this.$VideoWatchAndScrollController41=[];this.$VideoWatchAndScrollController42=0;this.$VideoWatchAndScrollController44=[];this.$VideoWatchAndScrollController45=[];this.$VideoWatchAndScrollController6=k;this.$VideoWatchAndScrollController7=l;this.$VideoWatchAndScrollController10=window.document.getElementById('leftCol');this.$VideoWatchAndScrollController11=window.document.getElementById('pagelet_bluebar');this.$VideoWatchAndScrollController46();c('destroyOnUnload')(function(){this.$VideoWatchAndScrollController47();if(this.$VideoWatchAndScrollController5)this.$VideoWatchAndScrollController48();if(this.$VideoWatchAndScrollController35)this.$VideoWatchAndScrollController35.release();if(this.$VideoWatchAndScrollController36)this.$VideoWatchAndScrollController36.release();if(this===u)u=null;}.bind(this));}v.prototype.$VideoWatchAndScrollController49=function(w,x,y){'use strict';!w?j(0):void 0;!x.length?j(0):void 0;this.$VideoWatchAndScrollController43=false;this.$VideoWatchAndScrollController36=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController42=y;this.$VideoWatchAndScrollController38=w;w.setIsWatchAndScroll(true);this.$VideoWatchAndScrollController44=w.getPreloadedData().thumbnails||[];this.$VideoWatchAndScrollController45=[];this.$VideoWatchAndScrollController41=x.slice(0);this.$VideoWatchAndScrollController41.forEach(function(aa){this.$VideoWatchAndScrollController50(aa);aa.setIsInChannel(false);}.bind(this));var z=this.$VideoWatchAndScrollController41.shift();this.$VideoWatchAndScrollController1=true;this.$VideoWatchAndScrollController51(z,c('VideoPlayerReason').USER);};v.registerVideoController=function(w,x,y,z){'use strict';if(u==null)u=new v(w.getVideoChannelID(),w.getVideoID(),x,z);u.$VideoWatchAndScrollController35.addSubscriptions(w.addListener('enterWatchAndScroll',function(){if(u)u.$VideoWatchAndScrollController52(w);}),w.addListener('exitWatchAndScroll',function(){if(u)u.$VideoWatchAndScrollController53(w);}),w.addListener('WatchAndScroll/close',function(){if(u)u.$VideoWatchAndScrollController54();}),w.addListener('WatchAndScroll/overlayShown',function(){return u&&u.$VideoWatchAndScrollController55();}),w.addListener('WatchAndScroll/overlayHidden',function(){return u&&u.$VideoWatchAndScrollController56();}));var aa=['beginPlayback','changeVolume','muteVideo','toggleFullscreen','unmuteVideo','VideoChannelController/enterChannel'];aa.forEach(function(event){if(u)u.$VideoWatchAndScrollController35.addSubscriptions(w.addListener(event,function(ba){if(u)u.$VideoWatchAndScrollController57(w,y,event,ba);}));});if(!z)u.$VideoWatchAndScrollController35.addSubscriptions(u.$VideoWatchAndScrollController58(w));};v.registerChannelVideoController=function(w){'use strict';if(!u)return;w.setIsInChannel(false);u.$VideoWatchAndScrollController50(w);u.$VideoWatchAndScrollController41.push(w);};v.getStoryFetcherData=function(){'use strict';return u&&u.$VideoWatchAndScrollController59();};v.prototype.$VideoWatchAndScrollController59=function(){'use strict';return {storyFetcher:this.$VideoWatchAndScrollController38,videoPlayerControllers:this.$VideoWatchAndScrollController41,channelVideoIndex:this.$VideoWatchAndScrollController42,rootVideoPlayerController:this.$VideoWatchAndScrollController16,channelInteractionsToRegister:this.$VideoWatchAndScrollController45};};v.getVideoPlaceholder=function(){'use strict';if(!u)return null;return u.$VideoWatchAndScrollController18;};v.getReactContainer=function(){'use strict';if(!u)return null;return u.$VideoWatchAndScrollController13;};v.registerChannelInteraction=function(w){'use strict';if(u)u.$VideoWatchAndScrollController45.push(w);};v.onEnterChannel=function(){'use strict';if(!u)return;u.$VideoWatchAndScrollController60();};v.prototype.$VideoWatchAndScrollController60=function(){'use strict';this.$VideoWatchAndScrollController43=true;this.$VideoWatchAndScrollController38&&this.$VideoWatchAndScrollController38.abandonRequest();if(!this.$VideoWatchAndScrollController13)return;var w=["._23if","._23ig"];this.$VideoWatchAndScrollController13.state.channelVideoElements.forEach(function(x){w.forEach(function(y){var z=c('DOM').scry(x,y),aa=z[0];if(aa)c('CSS').show(aa);});});};v.resetFromChannelView=function(w,x,y){'use strict';if(!u)return;u.$VideoWatchAndScrollController49(w,x,y);};v.prototype.$VideoWatchAndScrollController57=function(w,x,event,y){'use strict';if(this.$VideoWatchAndScrollController5){if(this.$VideoWatchAndScrollController15===w)return;if(y&&q.includes(y.reason))return;this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);}else if(x)if(event==='toggleFullscreen'&&w.isFullscreen()||event==='VideoChannelController/enterChannel'){if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController47();}else if((event!=='beginPlayback'||y&&y.reason===c('VideoPlayerReason').USER)&&w.isState('playing')&&!w.isMuted()&&!w.isFullscreen()&&!w.getIsInChannel())this.$VideoWatchAndScrollController61(w);};v.prototype.$VideoWatchAndScrollController62=function(w){'use strict';if(this.$VideoWatchAndScrollController43||w!==this.$VideoWatchAndScrollController15)return;this.$VideoWatchAndScrollController13.setState({endScreenShown:true,nextVideoMetadata:this.$VideoWatchAndScrollController63()});if(this.$VideoWatchAndScrollController41.length>this.$VideoWatchAndScrollController42)return;var x=false,y=w.addListener('beginPlayback',function(){x=true;});setTimeout(function(){y.remove();if(x)return;u&&u.$VideoWatchAndScrollController13.setState({fadeOut:true});setTimeout(function(){u&&u.$VideoWatchAndScrollController54();},r);},s);};v.prototype.$VideoWatchAndScrollController58=function(w){'use strict';return w.addListener('finishPlayback',function(){return this.$VideoWatchAndScrollController62(w);}.bind(this));};v.prototype.$VideoWatchAndScrollController61=function(w){'use strict';var x=w.getVideoNode();if(!x.offsetParent)return;this.$VideoWatchAndScrollController23=w;this.$VideoWatchAndScrollController30=c('throttle')(this.$VideoWatchAndScrollController64.bind(this),100);window.addEventListener('resize',this.$VideoWatchAndScrollController30);this.$VideoWatchAndScrollController65(x);this.$VideoWatchAndScrollController66();};v.prototype.$VideoWatchAndScrollController64=function(){'use strict';if(this.$VideoWatchAndScrollController23){this.$VideoWatchAndScrollController65(this.$VideoWatchAndScrollController18||this.$VideoWatchAndScrollController23.getVideoNode());this.$VideoWatchAndScrollController31();}};v.prototype.$VideoWatchAndScrollController67=function(w){'use strict';var x=this.$VideoWatchAndScrollController68(w),y=w.scrollWidth,z=w.scrollHeight,aa=o,ba=n;if(y<z){aa*=y/z;ba*=y/z;}var ca=aa;if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.children.length){var da=this.$VideoWatchAndScrollController68(this.$VideoWatchAndScrollController10);if(da.left<=x.left)ca=Math.min(da.left-2*m,ba);}else{var ea=document.getElementById('timeline_tab_content');if(ea){var fa=this.$VideoWatchAndScrollController68(ea).left;ca=Math.min(fa-2*m,ba);}}return Math.max(ca,aa);};v.prototype.$VideoWatchAndScrollController68=function(w){'use strict';var x={left:0,top:0};do{x.top+=w.offsetTop;x.left+=w.offsetLeft;}while(w=w.offsetParent);return x;};v.prototype.$VideoWatchAndScrollController65=function(w){'use strict';this.$VideoWatchAndScrollController26=this.$VideoWatchAndScrollController68(w);this.$VideoWatchAndScrollController32=w.scrollWidth;this.$VideoWatchAndScrollController33=w.scrollHeight;var x=Math.max(this.$VideoWatchAndScrollController32,this.$VideoWatchAndScrollController33);if(x<o){var y=o/x;this.$VideoWatchAndScrollController32*=y;this.$VideoWatchAndScrollController33*=y;}var z=this.$VideoWatchAndScrollController67(w);if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.childNodes.length){var aa=this.$VideoWatchAndScrollController68(this.$VideoWatchAndScrollController10),ba=window.getComputedStyle(this.$VideoWatchAndScrollController10),ca=parseInt(ba.paddingTop,10);this.$VideoWatchAndScrollController25=aa.top+ca;}else{this.$VideoWatchAndScrollController25=m;if(this.$VideoWatchAndScrollController11)this.$VideoWatchAndScrollController25+=this.$VideoWatchAndScrollController11.scrollHeight;}this.$VideoWatchAndScrollController22=z/this.$VideoWatchAndScrollController32;this.$VideoWatchAndScrollController21=Math.abs(this.$VideoWatchAndScrollController26.left-m)/p;this.$VideoWatchAndScrollController24=this.$VideoWatchAndScrollController26.top-this.$VideoWatchAndScrollController25;};v.prototype.$VideoWatchAndScrollController66=function(){'use strict';if(this.$VideoWatchAndScrollController19||this.$VideoWatchAndScrollController23.isState('playing')&&!this.$VideoWatchAndScrollController23.isMuted()){this.$VideoWatchAndScrollController69(this.$VideoWatchAndScrollController70.bind(this));this.$VideoWatchAndScrollController70();}else this.$VideoWatchAndScrollController47();};v.prototype.$VideoWatchAndScrollController70=function(){'use strict';var w=this.$VideoWatchAndScrollController23&&this.$VideoWatchAndScrollController23.isState('playing')&&!this.$VideoWatchAndScrollController23.isMuted();if(this.$VideoWatchAndScrollController20||!this.$VideoWatchAndScrollController23||!w){if(this.$VideoWatchAndScrollController23&&!w)this.$VideoWatchAndScrollController47();return;}var x=this.$VideoWatchAndScrollController24+this.$VideoWatchAndScrollController33/4;if(window.scrollY>x){this.$VideoWatchAndScrollController34=true;return;}if(window.scrollY>this.$VideoWatchAndScrollController24){if(this.$VideoWatchAndScrollController34)return;this.$VideoWatchAndScrollController23.emit('preventWNSOverlay');var y=this.$VideoWatchAndScrollController26.left-window.scrollX,z=this.$VideoWatchAndScrollController26.top-window.scrollY;this.$VideoWatchAndScrollController8={left:Math.max(y,0),top:Math.max(z,0),width:this.$VideoWatchAndScrollController32,height:this.$VideoWatchAndScrollController33};c('CSS').addClass(this.$VideoWatchAndScrollController71(),"_5h98");this.$VideoWatchAndScrollController20=this.$VideoWatchAndScrollController23.addListener('stateChange',this.$VideoWatchAndScrollController72.bind(this));this.$VideoWatchAndScrollController51(this.$VideoWatchAndScrollController23,c('VideoPlayerReason').AUTOPLAY,true);this.$VideoWatchAndScrollController69(this.$VideoWatchAndScrollController73.bind(this));this.$VideoWatchAndScrollController73();}else this.$VideoWatchAndScrollController34=false;};v.prototype.$VideoWatchAndScrollController73=function(){'use strict';if(window.scrollY<=this.$VideoWatchAndScrollController24){c('CSS').removeClass(this.$VideoWatchAndScrollController71(),"_5h98");var w=this.$VideoWatchAndScrollController23.isMuted(),x=this.$VideoWatchAndScrollController23.isState('playing')||this.$VideoWatchAndScrollController20||this.$VideoWatchAndScrollController19;if(x){this.$VideoWatchAndScrollController19=this.$VideoWatchAndScrollController23.addListener('stateChange',this.$VideoWatchAndScrollController74.bind(this));c('CSS').addClass(this.$VideoWatchAndScrollController23.getRootNode(),"_5h9g");var y=this.$VideoWatchAndScrollController23.getOption('VideoControls','areControlsVisible');if(!y&&!this.$VideoWatchAndScrollController29)this.$VideoWatchAndScrollController29=this.$VideoWatchAndScrollController23.getOption('VideoControls','acquireForceHideLock');}var z=this.$VideoWatchAndScrollController23;this.$VideoWatchAndScrollController54();if(x){this.$VideoWatchAndScrollController23=z;this.$VideoWatchAndScrollController23.play(c('VideoPlayerReason').AUTOPLAY);if(!w)this.$VideoWatchAndScrollController23.unmute();}this.$VideoWatchAndScrollController66();}else if(!this.$VideoWatchAndScrollController37)this.$VideoWatchAndScrollController37=c('requestAnimationFrame')(this.$VideoWatchAndScrollController75.bind(this));};v.prototype.$VideoWatchAndScrollController74=function(){'use strict';if(this.$VideoWatchAndScrollController19&&this.$VideoWatchAndScrollController23.isState('playing'))this.$VideoWatchAndScrollController76();};v.prototype.$VideoWatchAndScrollController72=function(){'use strict';if(this.$VideoWatchAndScrollController20&&this.$VideoWatchAndScrollController23.isState('playing'))this.$VideoWatchAndScrollController77();};v.prototype.$VideoWatchAndScrollController75=function(){'use strict';delete this.$VideoWatchAndScrollController37;var w=window.scrollY-this.$VideoWatchAndScrollController24,x=w>=this.$VideoWatchAndScrollController21,y=x?1:w/this.$VideoWatchAndScrollController21,z=this.$VideoWatchAndScrollController26.left+y*(m-this.$VideoWatchAndScrollController26.left);z-=window.scrollX;var aa=1-y*(1-this.$VideoWatchAndScrollController22),ba=aa*this.$VideoWatchAndScrollController33;this.$VideoWatchAndScrollController13.setState({left:Math.max(z,0),top:Math.max(this.$VideoWatchAndScrollController25,0),width:aa*this.$VideoWatchAndScrollController32,height:ba});if(x)this.$VideoWatchAndScrollController47();};v.prototype.$VideoWatchAndScrollController69=function(w){'use strict';window.removeEventListener('scroll',this.$VideoWatchAndScrollController31);this.$VideoWatchAndScrollController31=w||null;window.addEventListener('scroll',this.$VideoWatchAndScrollController31);c('cancelAnimationFrame')(this.$VideoWatchAndScrollController37);delete this.$VideoWatchAndScrollController37;};v.prototype.$VideoWatchAndScrollController47=function(){'use strict';this.$VideoWatchAndScrollController23&&this.$VideoWatchAndScrollController23.emit('unpreventWNSOverlay');window.removeEventListener('resize',this.$VideoWatchAndScrollController30);this.$VideoWatchAndScrollController69();if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController76();if(this.$VideoWatchAndScrollController20){c('CSS').removeClass(this.$VideoWatchAndScrollController71(),"_5h98");this.$VideoWatchAndScrollController77();}delete this.$VideoWatchAndScrollController23;this.$VideoWatchAndScrollController46();this.$VideoWatchAndScrollController34=false;};v.prototype.$VideoWatchAndScrollController76=function(){'use strict';c('CSS').removeClass(this.$VideoWatchAndScrollController23.getRootNode(),"_5h9g");if(this.$VideoWatchAndScrollController29){this.$VideoWatchAndScrollController29.release();delete this.$VideoWatchAndScrollController29;}this.$VideoWatchAndScrollController19.remove();delete this.$VideoWatchAndScrollController19;};v.prototype.$VideoWatchAndScrollController77=function(){'use strict';this.$VideoWatchAndScrollController20.remove();delete this.$VideoWatchAndScrollController20;};v.prototype.$VideoWatchAndScrollController52=function(w){'use strict';this.$VideoWatchAndScrollController47();if(this.$VideoWatchAndScrollController5&&this.$VideoWatchAndScrollController15!==w){this.$VideoWatchAndScrollController27=w;this.$VideoWatchAndScrollController48();}else this.$VideoWatchAndScrollController51(w,c('VideoPlayerReason').USER);};v.prototype.$VideoWatchAndScrollController51=function(w,x,y){'use strict';if(!this.$VideoWatchAndScrollController1)!!this.$VideoWatchAndScrollController5?j(0):void 0;this.$VideoWatchAndScrollController16=w;this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController42>0?this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController42):w;if(this.$VideoWatchAndScrollController41.length>this.$VideoWatchAndScrollController42)this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController42+1).preload();this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController15.getRootNode();var z=!this.$VideoWatchAndScrollController15.isMuted(),aa=!this.$VideoWatchAndScrollController1||this.$VideoWatchAndScrollController15.isState('playing'),ba=this.$VideoWatchAndScrollController1&&this.$VideoWatchAndScrollController15.isState('finished');if(!this.$VideoWatchAndScrollController1){this.$VideoWatchAndScrollController9={videoRootNode:this.$VideoWatchAndScrollController14.parentNode,dimensions:c('DOMDimensions').getElementDimensions(this.$VideoWatchAndScrollController14)};this.$VideoWatchAndScrollController18=this.$VideoWatchAndScrollController79(this.$VideoWatchAndScrollController9.dimensions,this.$VideoWatchAndScrollController15.getVideoNode());if(!y)this.$VideoWatchAndScrollController46(this.$VideoWatchAndScrollController14);c('DOM').insertAfter(this.$VideoWatchAndScrollController14,this.$VideoWatchAndScrollController18);this.$VideoWatchAndScrollController12=c('EventListener').listen(this.$VideoWatchAndScrollController14.parentNode,'click',function(){return this.$VideoWatchAndScrollController54();}.bind(this));this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController15.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController15.detachRootNode();this.$VideoWatchAndScrollController15.setDimensions(this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController6);this.$VideoWatchAndScrollController5=true;this.$VideoWatchAndScrollController13=this.$VideoWatchAndScrollController80();this.$VideoWatchAndScrollController17=this.$VideoWatchAndScrollController81(this.$VideoWatchAndScrollController15);}else{this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController15.setDimensions(this.$VideoWatchAndScrollController13.state.width||this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController13.state.height||this.$VideoWatchAndScrollController6);}aa&&this.$VideoWatchAndScrollController15.play(x);z&&this.$VideoWatchAndScrollController15.unmute();if(ba)this.$VideoWatchAndScrollController62(this.$VideoWatchAndScrollController15);this.$VideoWatchAndScrollController15.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'watch_scroll'});var ca=this.$VideoWatchAndScrollController38;if(!this.$VideoWatchAndScrollController1&&ca){ca.reset(w.getVideoID(),w.getVideoChannelID());this.$VideoWatchAndScrollController82();this.$VideoWatchAndScrollController50(this.$VideoWatchAndScrollController15);}};v.prototype.$VideoWatchAndScrollController50=function(w){'use strict';this.$VideoWatchAndScrollController36.addSubscriptions(this.$VideoWatchAndScrollController58(w),this.$VideoWatchAndScrollController81(w),w.addListener('VideoChannelController/enterChannel',function(){this.$VideoWatchAndScrollController36.release();}.bind(this)),w.addListener('WatchAndScroll/close',function(){this.$VideoWatchAndScrollController54();}.bind(this)),w.addListener('WatchAndScroll/overlayShown',function(){return this.$VideoWatchAndScrollController55();}.bind(this)),w.addListener('WatchAndScroll/overlayHidden',function(){return this.$VideoWatchAndScrollController56();}.bind(this)));};v.prototype.$VideoWatchAndScrollController83=function(){'use strict';this.$VideoWatchAndScrollController13.setState({endScreenShown:false});if(this.$VideoWatchAndScrollController15)this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').USER);};v.prototype.$VideoWatchAndScrollController63=function(){'use strict';if(this.$VideoWatchAndScrollController42>=this.$VideoWatchAndScrollController44.length)return null;var w=this.$VideoWatchAndScrollController44[this.$VideoWatchAndScrollController42],x=c('DOM').scry(w,"._38a5"),y=x[0],z=c('DOM').scry(w,"._2z1"),aa=z[0],ba=c('DOM').scry(w,"._38a3"),ca=ba[0];if(!y||!ca)return null;var da=41,ea=1.7778;if(ca.style.height&&ca.style.width)ea=parseInt(ca.style.width,10)/parseInt(ca.style.height,10);var fa=da*ea;c('DOM').setAttributes(w,{style:{width:fa+'px'}});c('DOM').setAttributes(ca,{style:{width:fa+'px',height:da+'px'}});return {thumbnail:w,owner:y.textContent,viewCount:aa&&aa.textContent};};v.prototype.$VideoWatchAndScrollController82=function(){'use strict';if(!this.$VideoWatchAndScrollController38)return;this.$VideoWatchAndScrollController38.fetchStories(true,function(w,x){if(!w||!w.length)return;var y=this.$VideoWatchAndScrollController13.state.channelVideoElements.concat(w);this.$VideoWatchAndScrollController13.setState({channelVideoElements:y},function(){setTimeout(function(){this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController42+1).preload();}.bind(this));}.bind(this));this.$VideoWatchAndScrollController44=this.$VideoWatchAndScrollController44.concat(x);}.bind(this));};v.prototype.$VideoWatchAndScrollController78=function(w){'use strict';var x=this.$VideoWatchAndScrollController13.state.channelVideoElements,y=[this.$VideoWatchAndScrollController16].concat(this.$VideoWatchAndScrollController41),z=null;y.forEach(function(aa){if(x[w].contains(aa.getRootNode()))z=aa;});!z?j(0):void 0;return z;};v.prototype.$VideoWatchAndScrollController84=function(w){'use strict';this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController15.abortLoading();this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController42);this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController15.getRootNode();this.$VideoWatchAndScrollController13.setState({videoIndex:this.$VideoWatchAndScrollController42});if(!w){this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').AUTOPLAY);}else setTimeout(function(){this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').AUTOPLAY);}.bind(this),t);if(this.$VideoWatchAndScrollController41.length<=this.$VideoWatchAndScrollController42){this.$VideoWatchAndScrollController82();}else this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController42+1).preload();};v.prototype.$VideoWatchAndScrollController46=function(w){'use strict';var x=m;if(this.$VideoWatchAndScrollController11)x+=this.$VideoWatchAndScrollController11.scrollHeight;var y=void 0,z=void 0;if(w){var aa=w.scrollWidth,ba=w.scrollHeight;z=this.$VideoWatchAndScrollController67(w);y=z*ba/aa;}this.$VideoWatchAndScrollController8={height:!w?this.$VideoWatchAndScrollController6:y,left:m,top:x,width:!w?this.$VideoWatchAndScrollController7:z};};v.prototype.$VideoWatchAndScrollController81=function(w){'use strict';if(w)return w.addListener('stateChange',function(){var x=w.isState('finished')&&this.$VideoWatchAndScrollController41.length>this.$VideoWatchAndScrollController42;if(!c('VideoPlayerExperiments').autoplayWhenWNS&&(w.isState('playing')||this.$VideoWatchAndScrollController20||x)){c('VideoAutoplayControllerX').setShouldAutoplay(false);}else c('VideoAutoplayControllerX').setShouldAutoplay(true);}.bind(this));return null;};v.prototype.$VideoWatchAndScrollController79=function(w,x){'use strict';var y=c('DOM').create('canvas',{className:"_308d"});y.height=w.height;y.width=w.width;if(y.getContext&&y.getContext('2d'))if(x instanceof window.HTMLVideoElement){var z=new (c('VideoFrameBuffer'))(y,x);z.updateFrameBuffer();}return y;};v.prototype.$VideoWatchAndScrollController54=function(){'use strict';if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController47();this.$VideoWatchAndScrollController48();};v.prototype.$VideoWatchAndScrollController53=function(w){'use strict';!this.$VideoWatchAndScrollController5?j(0):void 0;if(this.$VideoWatchAndScrollController41.length<=this.$VideoWatchAndScrollController42)!(w===this.$VideoWatchAndScrollController15)?j(0):void 0;this.$VideoWatchAndScrollController42=0;this.$VideoWatchAndScrollController1=false;var x=this.$VideoWatchAndScrollController15.getVideoInfo();this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController15.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController15.detachRootNode();c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollController71());c('DOM').remove(this.$VideoWatchAndScrollController18);delete this.$VideoWatchAndScrollController18;this.$VideoWatchAndScrollController12.remove();this.$VideoWatchAndScrollController17.remove();this.$VideoWatchAndScrollController36.release();this.$VideoWatchAndScrollController36=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16;this.$VideoWatchAndScrollController15.setDimensions(this.$VideoWatchAndScrollController9.dimensions.width,this.$VideoWatchAndScrollController9.dimensions.height);this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController16.getRootNode();c('DOM').prependContent(this.$VideoWatchAndScrollController9.videoRootNode,this.$VideoWatchAndScrollController14);this.$VideoWatchAndScrollController15.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'inline'});if(x&&x.isLiveStream){if(!this.$VideoWatchAndScrollController15.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController15.mute();this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').USER);}var y=this.$VideoWatchAndScrollController38;y&&y.reset(this.$VideoWatchAndScrollController15.getVideoID(),this.$VideoWatchAndScrollController15.getVideoChannelID());this.$VideoWatchAndScrollController9={};this.$VideoWatchAndScrollController15=null;this.$VideoWatchAndScrollController16=null;this.$VideoWatchAndScrollController5=false;this.$VideoWatchAndScrollController41=[];this.$VideoWatchAndScrollController44=[];c('VideoAutoplayControllerX').setShouldAutoplay(true);this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;if(this.$VideoWatchAndScrollController27){this.$VideoWatchAndScrollController51(this.$VideoWatchAndScrollController27,c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController27=null;}y&&y.abandonRequest();this.$VideoWatchAndScrollController34=false;};v.prototype.$VideoWatchAndScrollController80=function(){'use strict';return c('ReactDOM').render(c('React').createElement(c('VideoWatchAndScrollContainer.react'),{initialPosition:this.$VideoWatchAndScrollController8,initialVideoElement:this.$VideoWatchAndScrollController14,onChannelNavigation:this.$VideoWatchAndScrollController85.bind(this),onClick:this.$VideoWatchAndScrollController86.bind(this),onDoubleClick:this.$VideoWatchAndScrollController87.bind(this),onDrop:this.$VideoWatchAndScrollController88.bind(this),onGrab:this.$VideoWatchAndScrollController89.bind(this),onInitialPositionUpdate:this.$VideoWatchAndScrollController90.bind(this),onReplay:this.$VideoWatchAndScrollController83.bind(this)}),this.$VideoWatchAndScrollController71());};v.prototype.$VideoWatchAndScrollController55=function(){'use strict';if(!this.$VideoWatchAndScrollController15||!this.$VideoWatchAndScrollController13||this.$VideoWatchAndScrollController43)return;this.$VideoWatchAndScrollController13.setState({overlayShown:true});};v.prototype.$VideoWatchAndScrollController56=function(){'use strict';if(!this.$VideoWatchAndScrollController15||!this.$VideoWatchAndScrollController13||this.$VideoWatchAndScrollController43)return;this.$VideoWatchAndScrollController13.setState({overlayShown:false});};v.prototype.$VideoWatchAndScrollController48=function(){'use strict';if(this.$VideoWatchAndScrollController16){if(this.$VideoWatchAndScrollController16===this.$VideoWatchAndScrollController15){this.$VideoWatchAndScrollController16.emit('exitWatchAndScroll');return;}this.$VideoWatchAndScrollController13.setState({channelVideoElements:[]},function(){this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16;this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController15.getRootNode();this.$VideoWatchAndScrollController16.emit('exitWatchAndScroll');}.bind(this));}};v.prototype.$VideoWatchAndScrollController85=function(w){'use strict';if(w>0&&this.$VideoWatchAndScrollController41.length<=this.$VideoWatchAndScrollController42)return;this.$VideoWatchAndScrollController42+=w;this.$VideoWatchAndScrollController84(true);};v.prototype.$VideoWatchAndScrollController89=function(){'use strict';if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController47();this.$VideoWatchAndScrollController28=this.$VideoWatchAndScrollController15.isState('playing');this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);};v.prototype.$VideoWatchAndScrollController88=function(){'use strict';if(this.$VideoWatchAndScrollController28)this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController28=null;};v.prototype.$VideoWatchAndScrollController86=function(){'use strict';var w=this.$VideoWatchAndScrollController15.getVideoInfo(),x=w&&w.isLiveStream;if(this.$VideoWatchAndScrollController23||x)return;if(this.$VideoWatchAndScrollController15.isState('playing')){this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);}else if(this.$VideoWatchAndScrollController15.isState('paused')||this.$VideoWatchAndScrollController15.isState('finished')||this.$VideoWatchAndScrollController15.isState('ready'))this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').USER);};v.prototype.$VideoWatchAndScrollController87=function(){'use strict';if(this.$VideoWatchAndScrollController23)return;var w=this.$VideoWatchAndScrollController15.getOption('VideoWithClickToChannelView','isChannelEligible');if(!w||!this.$VideoWatchAndScrollController40)return;c('Bootloader').loadModules(["VideoChannelController"],function(x){this.$VideoWatchAndScrollController60();x.openFromVideoPlayer(this.$VideoWatchAndScrollController15,this.$VideoWatchAndScrollController15.getVideoChannelID(),this.$VideoWatchAndScrollController39,this.$VideoWatchAndScrollController59());}.bind(this));};v.prototype.$VideoWatchAndScrollController90=function(w){'use strict';this.$VideoWatchAndScrollController8=w;this.$VideoWatchAndScrollController15.setDimensions(w.width,w.height);};v.prototype.$VideoWatchAndScrollController91=function(){'use strict';var w=c('DOM').create('div');c('DOM').appendContent(document.body,w);return w;};v.prototype.$VideoWatchAndScrollController71=function(){'use strict';if(!this.$VideoWatchAndScrollController2)this.$VideoWatchAndScrollController2=this.$VideoWatchAndScrollController91();return this.$VideoWatchAndScrollController2;};f.exports=v;},null);