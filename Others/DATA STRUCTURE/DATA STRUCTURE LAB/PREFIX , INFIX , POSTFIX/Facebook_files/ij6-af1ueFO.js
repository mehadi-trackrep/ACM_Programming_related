/*!CK:2405009968!*//*1459938946,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["p26U6"]); }

__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(am,bm){var cm=am.split("."),dm=k;cm[0] in dm||!dm.execScript||dm.execScript("var "+cm[0]);for(var em;cm.length&&(em=cm.shift());)cm.length||void 0===bm?dm[em]?dm=dm[em]:dm=dm[em]={}:dm[em]=bm;}function m(am,bm){function cm(){}cm.prototype=bm.prototype;am.Nb=bm.prototype;am.prototype=new cm();am.prototype.constructor=am;am.Mb=function(dm,em,fm){return bm.prototype[em].apply(dm,Array.prototype.slice.call(arguments,2));};}function n(){}function o(am){var bm=console[am];bm?bm.bind||(console[am]=function(){bm.apply(console,arguments);}):console[am]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(am){t[am]={ha:s(),end:NaN};}function q(am){if(am=t[am])am.end=s();}function r(am){return (am=t[am])&&am.end?am.end-am.ha:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(am,bm,cm,dm){this.id=am;this.bandwidth=bm||0;this.lang=cm||"unknown";this.streamInfoID=dm;this.active=false;}l("shaka.player.AudioTrack.compare",function(am,bm){return am.lang<bm.lang?-1:am.lang>bm.lang?1:am.bandwidth<bm.bandwidth?-1:am.bandwidth>bm.bandwidth?1:0;});function v(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}v.prototype.clone=function(){var am=new v();am.maxHeight=this.maxHeight;am.minHeight=this.minHeight;am.maxWidth=this.maxWidth;am.maxBandwidth=this.maxBandwidth;am.minBandwidth=this.minBandwidth;return am;};function w(){this.fontSize="100%";this.fontColor=z;this.fontOpacity=ba;this.backgroundColor=aa;this.backgroundOpacity=ba;this.fontEdge=ca;}l("shaka.player.TextStyle",w);function x(am){var bm=[];bm.push("font-size: "+am.fontSize);bm.push("color: "+y(am.fontColor,am.fontOpacity));bm.push("background-color: "+y(am.backgroundColor,am.backgroundOpacity));for(var cm=[],dm=0;dm<am.fontEdge.length;++dm){var em=am.fontEdge[dm].slice(3,6);cm.push(y(am.fontEdge[dm].slice(0,3),am.fontOpacity)+" "+em.join("px ")+"px");}bm.push("text-shadow: "+cm.join(","));return bm.join("; ");}function y(am,bm){return "rgba("+am.concat(bm).join(",")+")";}var z=[255,255,255],aa=[0,0,0];w.StandardColors={WHITE:z,BLACK:aa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ba=1;w.StandardOpacities={OPAQUE:ba,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ca=[];w.EdgeStyles={NONE:ca,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function da(am,bm){this.id=am;this.lang=bm||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(am,bm){return am.lang<bm.lang?-1:am.lang>bm.lang?1:0;});function ea(am,bm,cm,dm,em){this.id=am;this.bandwidth=bm||0;this.width=cm||0;this.height=dm||0;this.streamInfoID=em;this.active=false;}function fa(am,bm){var cm=am.width*am.height,dm=bm.width*bm.height;return cm<dm?-1:cm>dm?1:am.bandwidth<bm.bandwidth?-1:am.bandwidth>bm.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",fa);function ga(){var am="CustomEvent" in i;if(am)try{new CustomEvent("");}catch(bm){am=false;}am||(i.CustomEvent=ha);}l("shaka.polyfill.CustomEvent.install",ga);function ha(am,bm){var cm=document.createEvent("CustomEvent"),dm=bm||{bubbles:false,cancelable:false,detail:null};cm.initCustomEvent(am,!!dm.bubbles,!!dm.cancelable,dm.detail);return cm;}function ia(){var am=Element.prototype;am.requestFullscreen=am.requestFullscreen||am.mozRequestFullScreen||am.msRequestFullscreen||am.webkitRequestFullscreen;am=Document.prototype;am.exitFullscreen=am.exitFullscreen||am.mozCancelFullScreen||am.msExitFullscreen||am.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ja);document.addEventListener("webkitfullscreenerror",ja);document.addEventListener("mozfullscreenchange",ja);document.addEventListener("mozfullscreenerror",ja);document.addEventListener("MSFullscreenChange",ja);document.addEventListener("MSFullscreenError",ja);}l("shaka.polyfill.Fullscreen.install",ia);function ja(am){var bm=am.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),bm=new Event(bm,am);am.target.dispatchEvent(bm);}function ka(){return Promise.reject(Error("The key system specified is not supported."));}function la(am){return null==am?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ma(){throw new TypeError("Illegal constructor.");}ma.prototype.createSession=function(){};ma.prototype.setServerCertificate=function(){};function na(){throw new TypeError("Illegal constructor.");}na.prototype.getConfiguration=function(){};na.prototype.createMediaKeys=function(){};function oa(am){this.c=[];this.b=[];this.W=pa;if(am)try{am(this.S.bind(this),this.a.bind(this));}catch(bm){this.a(bm);}}var pa=0;function qa(){i.Promise||(i.Promise=oa,i.Promise.resolve=ra,i.Promise.reject=sa,i.Promise.all=ta,i.Promise.race=ua,i.setImmediate?(xa=function(am){return i.setImmediate(am);},ya=function(am){return i.clearImmediate(am);}):(xa=function(am){return i.setTimeout(am,0);},ya=function(am){return i.clearTimeout(am);}));}l("shaka.polyfill.Promise.install",qa);function ra(am){var bm=new oa();bm.S(am);return bm;}function sa(am){var bm=new oa();bm.a(am);return bm;}function ta(am){function bm(hm,im,jm){hm.W==pa&&(em[im]=jm,dm++,dm==em.length&&hm.S(em));}var cm=new oa();if(!am.length)return cm.S([]),cm;for(var dm=0,em=Array(am.length),fm=cm.a.bind(cm),gm=0;gm<am.length;++gm)am[gm]&&am[gm].then?am[gm].then(bm.bind(null,cm,gm),fm):bm(cm,gm,am[gm]);return cm;}function ua(am){for(var bm=new oa(),cm=bm.S.bind(bm),dm=bm.a.bind(bm),em=0;em<am.length;++em)am[em]&&am[em].then?am[em].then(cm,dm):cm(am[em]);return bm;}oa.prototype.then=function(am,bm){var cm=new oa();switch(this.W){case 1:va(this,cm,am);break;case 2:va(this,cm,bm);break;case pa:this.c.push({Fa:cm,ya:am}),this.b.push({Fa:cm,ya:bm});}return cm;};oa.prototype.then=oa.prototype.then;oa.prototype.catch=function(am){return this.then(void 0,am);};oa.prototype["catch"]=oa.prototype.catch;oa.prototype.S=function(am){if(this.W==pa){this.sa=am;this.W=1;for(am=0;am<this.c.length;++am)va(this,this.c[am].Fa,this.c[am].ya);this.c=[];this.b=[];}};oa.prototype.a=function(am){if(this.W==pa){this.sa=am;this.W=2;for(am=0;am<this.b.length;++am)va(this,this.b[am].Fa,this.b[am].ya);this.c=[];this.b=[];}};function va(am,bm,cm){ab.push(function(){if(cm&&"function"==typeof cm){try{var em=cm(this.sa);}catch(dm){bm.a(dm);return;}em instanceof oa?em==bm?bm.a(new TypeError("Chaining cycle detected")):em.then(bm.S.bind(bm),bm.a.bind(bm)):bm.S(em);}else 1==this.W?bm.S(this.sa):bm.a(this.sa);}.bind(am));null==za&&(za=xa(wa));}function wa(){for(;ab.length;){null!=za&&(ya(za),za=null);var am=ab;ab=[];for(var bm=0;bm<am.length;++bm)am[bm]();}}function xa(){return 0;}function ya(){}var za=null,ab=[];function bb(){var am=HTMLVideoElement.prototype;!am.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in am&&(am.getVideoPlaybackQuality=cb);}l("shaka.polyfill.VideoPlaybackQuality.install",bb);function cb(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function db(am,bm){for(var cm=[],dm=0;dm<am.length;++dm){for(var em=false,fm=0;fm<cm.length&&!(em=bm?bm(am[dm],cm[fm]):am[dm]===cm[fm]);++fm);em||cm.push(am[dm]);}return cm;}function eb(){return Date.now()+fb;}var fb=0;function gb(am){this.b=am;this.c=0==hb;this.a=0;}var hb=1;function ib(am){return am.a<am.b.byteLength;}function jb(am){var bm=am.b.getUint8(am.a);am.a+=1;return bm;}function kb(am){var bm=am.b.getUint32(am.a,am.c);am.a+=4;return bm;}function lb(am){var bm,cm;am.c?(bm=am.b.getUint32(am.a,true),cm=am.b.getUint32(am.a+4,true)):(cm=am.b.getUint32(am.a,false),bm=am.b.getUint32(am.a+4,false));if(2097151<cm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");am.a+=8;return cm*Math.pow(2,32)+bm;}function mb(am){if(am.a+16>am.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var bm=new Uint8Array(am.b.buffer,am.a,16);am.a+=16;return bm;}function nb(am,bm){if(am.a+bm>am.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");am.a+=bm;}function ob(am){this.b=am;this.a=new gb(am);pb||(pb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var pb;function qb(am){var bm;bm=rb(am);if(7<bm.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var cm=0,dm=0;dm<bm.length;dm++)cm=256*cm+bm[dm];bm=cm;cm=rb(am);am:{for(dm=0;dm<pb.length;dm++)if(td(cm,pb[dm])){dm=true;break am;}dm=false;};if(dm){cm=am.b.byteLength-am.a.a;}else{if(8==cm.length&&cm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var dm=cm[0]&(1<<8-cm.length)-1,em=1;em<cm.length;em++)dm=256*dm+cm[em];cm=dm;}cm=am.a.a+cm<=am.b.byteLength?cm:am.b.byteLength-am.a.a;dm=new DataView(am.b.buffer,am.b.byteOffset+am.a.a,cm);nb(am.a,cm);return new sb(bm,dm);}function rb(am){var bm=jb(am.a),cm;for(cm=1;8>=cm&&!(bm&1<<8-cm);cm++);if(8<cm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var dm=new Uint8Array(cm);dm[0]=bm;for(bm=1;bm<cm;bm++)dm[bm]=jb(am.a);return dm;}function sb(am,bm){this.id=am;this.a=bm;}function tb(am){if(8<am.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==am.a.byteLength&&am.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var bm=0,cm=0;cm<am.a.byteLength;cm++)var dm=am.a.getUint8(cm),bm=256*bm+dm;return bm;}var ub={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function vb(am){this.c=Math.exp(Math.log(.5)/am);this.a=this.b=0;}vb.prototype.sample=function(am,bm){var cm=Math.pow(this.c,am);this.b=bm*(1-cm)+cm*this.b;this.a+=am;};function wb(am){return am.b/(1-Math.pow(am.c,am.a));}function xb(am){var bm=new CustomEvent(am.type,{detail:am.detail,bubbles:!!am.bubbles}),cm;for(cm in am)cm in bm||(bm[cm]=am[cm]);return bm;}function yb(am){return new CustomEvent("error",{detail:am,bubbles:true});}function zb(am,bm,cm){cc(bm);cc(cm);return cm==bm||am>=ac&&cm==bm.split("-")[0]||am>=bc&&cm.split("-")[0]==bm.split("-")[0]?true:false;}var ac=1,bc=2;function cc(am){am=am.toLowerCase().split("-");var bm=dc[am[0]];bm&&(am[0]=bm);return am.join("-");}var dc={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ec(am){return Object.keys(am).map(function(bm){return am[bm];});}function fc(am,bm){return ic(am,bm,"boolean");}function gc(am,bm){var cm=ic(am,bm,"number");if(null==cm)return null;if(isNaN(cm)||cm==Number.NEGATIVE_INFINITY||cm==Number.POSITIVE_INFINITY)throw new RangeError("'"+bm+"' must be finite.");if(0>cm)throw new RangeError("'"+bm+"' must be >= 0");return cm;}function hc(am,bm){return ic(am,bm,"string");}function ic(am,bm,cm){am=am[bm];if(null==am)return null;if(typeof am!=cm)throw new TypeError("'"+bm+"' must be a "+cm+".");return am;}function jc(am,bm,cm){am=am[bm];if(null==am)return null;if(!(am instanceof cm))throw new TypeError("'"+bm+"' must be an instance of "+cm.name+".");return am;}function kc(){this.a={};}kc.prototype.push=function(am,bm){this.a.hasOwnProperty(am)?this.a[am].push(bm):this.a[am]=[bm];};kc.prototype.set=function(am,bm){this.a[am]=bm;};kc.prototype.get=function(am){return (am=this.a[am])?am.slice():null;};function lc(am){var bm=[],cm;for(cm in am.a)bm.push.apply(bm,am.a[cm]);return bm;}function mc(am,bm,cm){if(am=am.a[bm])for(bm=0;bm<am.length;++bm)am[bm]==cm&&(am.splice(bm,1),--bm);}function nc(am){var bm=[],cm;for(cm in am.a)bm.push(cm);return bm;}function oc(){this.a=new kc();}oc.prototype.destroy=function(){qc(this);this.a=null;};function pc(am,bm,cm,dm){bm=new rc(bm,cm,dm);am.a.push(cm,bm);}oc.prototype.pa=function(am,bm){for(var cm=this.a.get(bm)||[],dm=0;dm<cm.length;++dm){var em=cm[dm];em.target==am&&(em.pa(),mc(this.a,bm,em));}};function qc(am){for(var bm=lc(am.a),cm=0;cm<bm.length;++cm)bm[cm].pa();am.a.a={};}function rc(am,bm,cm){this.target=am;this.type=bm;this.a=cm;this.target.addEventListener(bm,cm,false);}rc.prototype.pa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function sc(am){this.ua=new kc();this.G=am;}l("shaka.util.FakeEventTarget",sc);sc.prototype.addEventListener=function(am,bm,cm){cm||this.ua.push(am,bm);};sc.prototype.removeEventListener=function(am,bm,cm){cm||mc(this.ua,am,bm);};sc.prototype.dispatchEvent=function(am){am.hasOwnProperty("srcElement")||(delete am.srcElement,Object.defineProperty(am,"srcElement",{get:function(){return null;}}));if(am.hasOwnProperty("target")){am.target=this;}else{delete am.target;var bm=this;Object.defineProperty(am,"target",{get:function(){return bm;},set:function(dm){bm=dm;}});}if(am.hasOwnProperty("currentTarget")){am.currentTarget=null;}else{delete am.currentTarget;var cm=null;Object.defineProperty(am,"currentTarget",{get:function(){return cm;},set:function(dm){cm=dm;}});}return tc(this,am);};function tc(am,bm){bm.currentTarget=am;for(var cm=am.ua.get(bm.type)||[],dm=0;dm<cm.length;++dm){var em=cm[dm];try{em.handleEvent?em.handleEvent(bm):em.call(am,bm);}catch(fm){}}am.G&&bm.bubbles&&tc(am.G,bm);return bm.defaultPrevented;}function uc(am){sc.call(this,null);this.a=new vb(3);this.g=new vb(10);this.h=am||500000;this.f=0;}m(uc,sc);l("shaka.util.EWMABandwidthEstimator",uc);uc.prototype.sample=function(am,bm){if(!(65536>bm)){am=Math.max(am,50);var cm=8000*bm/am,dm=am/1000;this.a.sample(dm,cm);this.g.sample(dm,cm);this.dispatchEvent(xb({type:"bandwidth"}));this.f=Date.now();}};uc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wb(this.a),wb(this.g));};uc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};uc.prototype.supportsCaching=function(){return false;};function vc(am,bm,cm){uc.call(this,cm);this.c=am||0;this.b=void 0===bm?Infinity:bm;}m(vc,uc);l("shaka.util.EWMACacheBandwidthEstimator",vc);vc.prototype.sample=function(am,bm){am<=this.c&&8000*bm/am>this.b||uc.prototype.sample.call(this,am,bm);};vc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function wc(){uc.call(this);}m(wc,uc);l("shaka.util.EWMASignedURLBandwidthEstimator",wc);wc.prototype.supportsCaching=function(){return true;};function xc(){var am,bm,cm=new Promise(function(dm,em){am=dm;bm=em;});cm.resolve=am;cm.reject=bm;cm.destroy=xc.prototype.destroy;return cm;}xc.prototype.destroy=function(){this.catch(function(){});var am=Error("Destroyed!");am.type="destroy";this.reject(am);};function yc(am){am.split("").reduce(function(bm,cm,dm){return bm+(dm&&0==dm%4?" "+cm:cm);});}function zc(){this.g=new xc();this.f=false;this.a=null;this.b=[];this.c=null;}function ad(am,bm){if(am.f)throw Error("Cannot append to a running task!");am.b.push(bm);}zc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});bd(this,void 0);};zc.prototype.end=function(){this.b.splice(1);};function bd(am,bm){var cm=am.b[0](bm),dm;cm?(dm=cm[0],am.c=cm[1]):(dm=Promise.resolve(),am.c=null);dm.then(dd(am,function(em){this.a?(this.b=[],this.c=null,cd(this)):(this.b.shift(),this.b.length?bd(this,em):(this.g.resolve(em),this.c=null));})).catch(dd(am,function(em){this.b=[];this.c=null;this.a?cd(this):this.g.reject(em);}));}function cd(am){var bm=Error("Task aborted.");bm.type="aborted";am.g.reject(bm);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(am),5);}function dd(am,bm){return bm.bind(am);}function ed(am,bm,cm){MediaSource.isTypeSupported(bm);bm=am.addSourceBuffer(bm);this.h=am;this.c=bm;this.l=cm;this.i=new oc();this.v=null;this.b=[];this.u=0;this.f=this.a=null;this.o=0;pc(this.i,this.c,"updateend",this.G.bind(this));}var fd=1/60;ed.prototype.destroy=function(){ld(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.i.destroy();this.h=this.c=this.i=null;};function gd(am,bm){for(var cm=am.c.buffered,dm=0;dm<cm.length;++dm){var em=cm.start(dm)-fd,fm=cm.end(dm)+fd;if(bm>=em&&bm<=fm)return cm.end(dm)-bm;}return 0;}function hd(am,bm){var cm=bm.a?bm.a-bm.b:1,dm=new ah();dm.a=3;dm.h=1000*cm;dm.c=1000*am.o;dm.j=am.v;return dm;}function id(am,bm,cm,dm){if(am.a)return am=Error("Cannot fetch ("+am.j+"): previous operation not complete."),am.type="stream",Promise.reject(am);am.a=new zc();cm!=am.c.timestampOffset&&(am.c.timestampOffset=cm);cm=hd(am,bm);var em=jh(bm.url,cm,am.l),fm=gh.prototype.f.bind(bm.url),gm=0;dm&&ad(am.a,function(){return [dm.then(function(jm){jm.ja>gm&&(gm=jm.ja);return nd(this,jm);}.bind(this)),this.g.bind(this)];}.bind(am));ad(am.a,dd(am,function(){return [em.then(function(jm){jm.ja>gm&&(gm=jm.ja);this.l.getBandwidth();return nd(this,jm);}.bind(this)),function(){fm();this.g();}.bind(this)];}));var hm=0==am.c.buffered.length&&0==am.b.length,im=null;ad(am.a,function(){if(0==this.c.buffered.length){var jm=Error("Failed to buffer segment ("+this.j+").");jm.type="stream";return [Promise.reject(jm)];}hm&&(jm=bm.b,im=this.c.buffered.start(0)-jm);jm=uh(this.b,bm.b);0<=jm?this.b.splice(jm+1,0,bm):this.b.push(bm);}.bind(am));return md(am).then(function(){return Promise.resolve({R:im,lb:gm});}.bind(am));}function jd(am){if(am.a)return am=Error("Cannot clear ("+am.j+"): previous operation not complete."),am.type="stream",Promise.reject(am);am.a=new zc();ad(am.a,function(){var bm;bm:if(0==this.c.buffered.length){bm=Promise.resolve();}else{try{this.c.remove(0,this.h.duration);}catch(cm){bm=Promise.reject(cm);break bm;}this.b=[];bm=this.f=new xc();};return [bm,this.g.bind(this)];}.bind(am));return md(am);}function kd(am,bm){if(am.a){var cm=Error("Cannot clearAfter ("+am.j+"): previous operation not complete.");cm.type="stream";return Promise.reject(cm);}am.a=new zc();ad(am.a,function(){return [od(this,bm),this.g.bind(this)];}.bind(am));return md(am);}function ld(am){am.a?(am=am.a,am.a?am=am.a:am.f?(am.c&&am.c(),am.a=new xc(),am=am.a):(am.f=true,am=Promise.resolve())):am=Promise.resolve();return am;}function md(am){am.a.start();return am.a.g.then(dd(am,function(){this.a=null;})).catch(dd(am,function(bm){this.a=null;return Promise.reject(bm);}));}function nd(am,bm){try{am.c.appendBuffer(bm);}catch(cm){return Promise.reject(cm);}am.f=new xc();return am.f;}function od(am,bm){if(0==am.c.buffered.length)return Promise.resolve();var cm=uh(am.b,bm);if(-1==cm||cm==am.b.length-1)return Promise.resolve();try{am.c.remove(am.b[cm+1].b,am.h.duration);}catch(dm){return Promise.reject(dm);}am.b=am.b.slice(0,cm+1);am.f=new xc();return am.f;}ed.prototype.g=function(){this.f&&"open"==this.h.readyState&&this.c.abort();};ed.prototype.G=function(){this.f&&(this.f.resolve(),this.f=null);};function pd(am){return String.fromCharCode.apply(null,am);}l("shaka.util.Uint8ArrayUtils.toString",pd);function qd(am){for(var bm=new Uint8Array(am.length),cm=0;cm<am.length;++cm)bm[cm]=am.charCodeAt(cm);return bm;}l("shaka.util.Uint8ArrayUtils.fromString",qd);l("shaka.util.Uint8ArrayUtils.toBase64",function(am,bm){var cm=void 0==bm?true:bm,dm=i.btoa(pd(am)).replace(/\+/g,"-").replace(/\//g,"_");return cm?dm:dm.replace(/=*$/,"");});function rd(am){return qd(i.atob(am.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",rd);l("shaka.util.Uint8ArrayUtils.fromHex",function(am){for(var bm=new Uint8Array(am.length/2),cm=0;cm<am.length;cm+=2)bm[cm/2]=i.parseInt(am.substr(cm,2),16);return bm;});function sd(am){for(var bm="",cm=0;cm<am.length;++cm){var dm=am[cm].toString(16);1==dm.length&&(dm="0"+dm);bm+=dm;}return bm;}l("shaka.util.Uint8ArrayUtils.toHex",sd);function td(am,bm){if(!am&&!bm)return true;if(!am||!bm||am.length!=bm.length)return false;for(var cm=0;cm<am.length;++cm)if(am[cm]!=bm[cm])return false;return true;}function ud(){this.h=this.a="";this.l=false;this.u=this.o=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function vd(am,bm){var cm=new ud();cm.a=am.a;cm.h=am.h;cm.l=am.l;cm.o=am.o;cm.u=am.u;cm.g=am.g;cm.i=am.i;cm.f=am.f;cm.j=am.j;cm.c=am.c?new Uint8Array(am.c.buffer):null;wd(cm,am.b);wd(cm,bm.b);return cm;}function wd(am,bm){var cm=am.b.concat(bm.map(function(dm){return {initData:new Uint8Array(dm.initData.buffer),initDataType:dm.initDataType};}));am.b=db(cm,xd);}function xd(am,bm){return am.initDataType==bm.initDataType&&td(am.initData,bm.initData);}function yd(am,bm,cm,dm){this.a=[];dm&&this.a.push(dm);}l("shaka.player.DrmSchemeInfo",yd);yd.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};yd.PersistentState={OPTIONAL:0,REQUIRED:1};yd.createUnencrypted=function(){return new yd(0,0,0,null);};function zd(am,bm){try{var dm=new be(am,bm);return Promise.resolve(dm);}catch(cm){return Promise.reject(cm);}}function ae(am){var bm=this.mediaKeys;bm&&bm!=am&&de(bm,null);delete this.mediaKeys;(this.mediaKeys=am)&&de(am,this);return Promise.resolve();}function be(am,bm){this.a=this.keySystem=am;var cm=true;"org.w3.clearkey"==am&&(this.a="webkit-org.w3.clearkey",cm=false);var dm=false,em;em=document.getElementsByTagName("video");em=em.length?em[0]:document.createElement("video");for(var fm=0;fm<bm.length;++fm){var gm=bm[fm],hm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:gm.initDataTypes,sessionTypes:["temporary"]},im=false;if(gm.audioCapabilities)for(var jm=0;jm<gm.audioCapabilities.length;++jm){var km=gm.audioCapabilities[jm];km.contentType&&(im=true,em.canPlayType(km.contentType.split(";")[0],this.a)&&(hm.audioCapabilities.push(km),dm=true));}if(gm.videoCapabilities)for(jm=0;jm<gm.videoCapabilities.length;++jm)km=gm.videoCapabilities[jm],km.contentType&&(im=true,em.canPlayType(km.contentType,this.a)&&(hm.videoCapabilities.push(km),dm=true));im||(dm=em.canPlayType("video/mp4",this.a)||em.canPlayType("video/webm",this.a));"required"==gm.persistentState&&(cm?(hm.persistentState="required",hm.sessionTypes=["persistent-license"]):dm=false);if(dm){this.b=hm;return;}}cm="Unsupported keySystem";if("org.w3.clearkey"==am||"com.widevine.alpha"==am)cm="None of the requested configurations were supported.";cm=Error(cm);cm.name="NotSupportedError";cm.code=DOMException.NOT_SUPPORTED_ERR;throw cm;}be.prototype.createMediaKeys=function(){var am=new ce(this.a);return Promise.resolve(am);};be.prototype.getConfiguration=function(){return this.b;};function ce(am){this.g=am;this.b=null;this.a=new oc();this.c=[];this.f={};}function de(am,bm){am.b=bm;qc(am.a);bm&&(pc(am.a,bm,"webkitneedkey",am.Eb.bind(am)),pc(am.a,bm,"webkitkeymessage",am.Db.bind(am)),pc(am.a,bm,"webkitkeyadded",am.Bb.bind(am)),pc(am.a,bm,"webkitkeyerror",am.Cb.bind(am)));}j=ce.prototype;j.createSession=function(am){var bm=am||"temporary";if("temporary"!=bm&&"persistent-license"!=bm)throw new TypeError("Session type "+am+" is unsupported on this platform.");am=this.b||document.createElement("video");am.src||(am.src="about:blank");bm=new fe(am,this.g,bm);this.c.push(bm);return bm;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Eb=function(am){am=xb({type:"encrypted",initDataType:"webm",initData:am.initData});this.b.dispatchEvent(am);};j.Db=function(am){var bm=ee(this,am.sessionId);bm&&(am=xb({type:"message",messageType:void 0==bm.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:am.message}),bm.b&&(bm.b.resolve(),bm.b=null),bm.dispatchEvent(am));};j.Bb=function(am){if(am=ee(this,am.sessionId))he(am,"usable"),am.a&&am.a.resolve(),am.a=null;};j.Cb=function(am){var bm=ee(this,am.sessionId);if(bm){var cm=Error("EME v0.1b key error");cm.errorCode=am.errorCode;cm.errorCode.systemCode=am.systemCode;!am.sessionId&&bm.b?(cm.method="generateRequest",45==am.systemCode&&(cm.message="Unsupported session type."),bm.b.reject(cm),bm.b=null):am.sessionId&&bm.a?(cm.method="update",bm.a.reject(cm),bm.a=null):(cm=am.systemCode,am.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?he(bm,"output-restricted"):1==cm?he(bm,"expired"):he(bm,"internal-error"));}};function ee(am,bm){var cm=am.f[bm];return cm?cm:(cm=am.c.shift())?(cm.sessionId=bm,am.f[bm]=cm):null;}function fe(am,bm,cm){sc.call(this,null);this.f=am;this.h=false;this.a=this.b=null;this.c=bm;this.g=cm;this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ie();}m(fe,sc);function ge(am,bm,cm){if(am.h)return Promise.reject(Error("The session is already initialized."));am.h=true;var dm;try{if("persistent-license"==am.g){if(cm){dm=qd("LOAD_SESSION|"+cm);}else{var fm=new Uint8Array(bm);dm=qd("PERSISTENT|"+pd(fm));}}else dm=new Uint8Array(bm);}catch(em){return Promise.reject(em);}am.b=new xc();try{am.f.webkitGenerateKeyRequest(am.c,dm);}catch(gm){if("InvalidStateError"!=gm.name)return am.b=null,Promise.reject(gm);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,dm);}catch(hm){this.b.reject(hm),this.b=null;}}.bind(am),10);}return am.b;}j=fe.prototype;j.Ka=function(am,bm){if(this.a){this.a.then(this.Ka.bind(this,am,bm)).catch(this.Ka.bind(this,am,bm));}else{this.a=am;var cm,dm;"webkit-org.w3.clearkey"==this.c?(cm=pd(new Uint8Array(bm)),dm=JSON.parse(cm),"oct"!=dm.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),cm=rd(dm.keys[0].k),dm=rd(dm.keys[0].kid)):(cm=new Uint8Array(bm),dm=null);try{this.f.webkitAddKey(this.c,cm,dm,this.sessionId);}catch(em){this.a.reject(em),this.a=null;}}};function he(am,bm){am.keyStatuses.Ha(bm);var cm=xb({type:"keystatuseschange"});am.dispatchEvent(cm);}j.generateRequest=function(am,bm){return ge(this,bm,null);};j.load=function(am){return "persistent-license"==this.g?ge(this,null,am):Promise.reject(Error("Not a persistent session."));};j.update=function(am){var bm=new xc();this.Ka(bm,am);return bm;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function ie(){this.size=0;this.a=void 0;}var je;j=ie.prototype;j.Ha=function(am){this.size=void 0==am?0:1;this.a=am;};j.Ca=function(){return this.a;};j.forEach=function(am){this.a&&am(je,this.a);};j.get=function(am){if(this.has(am))return this.a;};j.has=function(am){var bm=je;return this.a&&td(new Uint8Array(am),new Uint8Array(bm))?true:false;};function ke(am){this.systemIds=[];this.cencKeyIds=[];this.a=[];am=new gb(new DataView(am.buffer));try{for(;ib(am);){var cm=am.a,dm=kb(am),em=kb(am);1==dm?dm=lb(am):0==dm&&(dm=am.b.byteLength-cm);if(1886614376!=em){nb(am,dm-(am.a-cm));}else{var fm=jb(am);if(1<fm){nb(am,dm-(am.a-cm));}else{nb(am,3);var gm=sd(mb(am)),hm=[];if(0<fm)for(var im=kb(am),jm=0;jm<im;++jm){var km=sd(mb(am));hm.push(km);}var lm=kb(am);nb(am,lm);this.cencKeyIds.push.apply(this.cencKeyIds,hm);this.systemIds.push(gm);this.a.push({start:cm,end:am.a-1});am.a!=cm+dm&&nb(am,dm-(am.a-cm));}}}}catch(bm){}}function le(am,bm){try{var dm=new me(am,bm);return Promise.resolve(dm);}catch(cm){return Promise.reject(cm);}}function me(am,bm){this.keySystem=am;for(var cm=false,dm=0;dm<bm.length;++dm){var em=bm[dm],fm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:em.initDataTypes,sessionTypes:["temporary"]},gm=false;if(em.audioCapabilities)for(var hm=0;hm<em.audioCapabilities.length;++hm){var im=em.audioCapabilities[hm];if(im.contentType){var gm=true,jm=im.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,jm)&&(fm.audioCapabilities.push(im),cm=true);}}if(em.videoCapabilities)for(hm=0;hm<em.videoCapabilities.length;++hm)im=em.videoCapabilities[hm],im.contentType&&(gm=true,jm=im.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,jm)&&(fm.videoCapabilities.push(im),cm=true));gm||(cm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==em.persistentState&&(fm.persistentState="required",fm.sessionTypes=["persistent-license"]);if(cm){this.a=fm;return;}}cm=Error("Unsupported keySystem");cm.name="NotSupportedError";cm.code=DOMException.NOT_SUPPORTED_ERR;throw cm;}me.prototype.createMediaKeys=function(){var am=new oe(this.keySystem);return Promise.resolve(am);};me.prototype.getConfiguration=function(){return this.a;};function ne(am){var bm=this.mediaKeys;bm&&bm!=am&&pe(bm,null);delete this.mediaKeys;return (this.mediaKeys=am)?pe(am,this):Promise.resolve();}function oe(am){this.a=new MSMediaKeys(am);this.b=new oc();}oe.prototype.createSession=function(am){if("temporary"!=(am||"temporary"))throw new TypeError("Session type "+am+" is unsupported on this platform.");return new qe(this.a);};oe.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};function pe(am,bm){function cm(){bm.msSetMediaKeys(dm.a);bm.removeEventListener("loadedmetadata",cm);}qc(am.b);if(!bm)return Promise.resolve();pc(am.b,bm,"msneedkey",re);var dm=am;try{return 1<=bm.readyState?bm.msSetMediaKeys(am.a):bm.addEventListener("loadedmetadata",cm),Promise.resolve();}catch(em){return Promise.reject(em);}}function qe(am){sc.call(this,null);this.c=null;this.g=am;this.b=this.a=null;this.f=new oc();this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ue();}m(qe,sc);j=qe.prototype;j.generateRequest=function(am,bm){this.a=new xc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(bm),null),pc(this.f,this.c,"mskeymessage",this.tb.bind(this)),pc(this.f,this.c,"mskeyadded",this.rb.bind(this)),pc(this.f,this.c,"mskeyerror",this.sb.bind(this)),te(this,"status-pending");}catch(cm){this.a.reject(cm);}return this.a;};j.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"));};j.update=function(am){this.b=new xc();try{this.c.update(new Uint8Array(am));}catch(bm){this.b.reject(bm);}return this.b;};j.close=function(){try{this.c.close(),this.closed.resolve(),qc(this.f);}catch(am){this.closed.reject(am);}return this.closed;};j.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function re(am){var bm=am.initData;if(bm){var cm=new ke(bm);if(1>=cm.a.length){am=bm;}else{var dm=[];for(am=0;am<cm.a.length;am++)dm.push(bm.subarray(cm.a[am].start,cm.a[am].end+1));bm=db(dm,se);for(am=cm=0;am<bm.length;am++)cm+=bm[am].length;cm=new Uint8Array(cm);for(am=dm=0;am<bm.length;am++)cm.set(bm[am],dm),dm+=bm[am].length;am=cm;}}else am=bm;am=xb({type:"encrypted",initDataType:"cenc",initData:am});this.dispatchEvent(am);}function se(am,bm){return td(am,bm);}j.tb=function(am){this.a&&(this.a.resolve(),this.a=null);am=xb({type:"message",messageType:void 0==this.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:am.message.buffer});this.dispatchEvent(am);};j.rb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(te(this,"usable"),this.b.resolve(),this.b=null);};j.sb=function(){var am=Error("EME v20140218 key error");am.errorCode=this.c.error;if(null!=this.a){this.a.reject(am),this.a=null;}else if(null!=this.b){this.b.reject(am),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:te(this,"output-not-allowed");default:te(this,"internal-error");}};function te(am,bm){am.keyStatuses.Ha(bm);var cm=xb({type:"keystatuseschange"});am.dispatchEvent(cm);}function ue(){this.size=0;this.a=void 0;}var ve;j=ue.prototype;j.Ha=function(am){this.size=void 0==am?0:1;this.a=am;};j.Ca=function(){return this.a;};j.forEach=function(am){this.a&&am(ve,this.a);};j.get=function(am){if(this.has(am))return this.a;};j.has=function(am){var bm=ve;return this.a&&td(new Uint8Array(am),new Uint8Array(bm))?true:false;};function we(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(je=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=zd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ae,i.MediaKeys=ce,i.MediaKeySystemAccess=be):i.MSMediaKeys?(ve=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ne,i.MediaKeys=oe,i.MediaKeySystemAccess=me,Navigator.prototype.requestMediaKeySystemAccess=le):(Navigator.prototype.requestMediaKeySystemAccess=ka,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=la,i.MediaKeys=ma,i.MediaKeySystemAccess=na));}l("shaka.polyfill.MediaKeys.install",we);l("shaka.polyfill.installAll",function(){ga();ia();bb();qa();we();});var xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ye(am){var bm;am instanceof ye?(ze(this,am.P),this.X=am.X,this.N=am.N,af(this,am.ia),this.O=am.O,bf(this,am.a.clone()),this.V=am.V):am&&(bm=String(am).match(xe))?(ze(this,bm[1]||"",true),this.X=cf(bm[2]||""),this.N=cf(bm[3]||"",true),af(this,bm[4]),this.O=cf(bm[5]||"",true),bf(this,bm[6]||"",true),this.V=cf(bm[7]||"")):this.a=new lf(null);}j=ye.prototype;j.P="";j.X="";j.N="";j.ia=null;j.O="";j.V="";j.toString=function(){var am=[],bm=this.P;bm&&am.push(df(bm,ff,true),":");if(bm=this.N){am.push("//");var cm=this.X;cm&&am.push(df(cm,ff,true),"@");am.push(encodeURIComponent(bm).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));bm=this.ia;null!=bm&&am.push(":",String(bm));}if(bm=this.O)this.N&&"/"!=bm.charAt(0)&&am.push("/"),am.push(df(bm,"/"==bm.charAt(0)?hf:gf,true));(bm=this.a.toString())&&am.push("?",bm);(bm=this.V)&&am.push("#",df(bm,kf));return am.join("");};j.resolve=function(am){var bm=this.clone();"data"===bm.P&&(bm=new ye());var cm=!!am.P;cm?ze(bm,am.P):cm=!!am.X;cm?bm.X=am.X:cm=!!am.N;cm?bm.N=am.N:cm=null!=am.ia;var dm=am.O;if(cm){af(bm,am.ia);}else if(cm=!!am.O){if("/"!=dm.charAt(0))if(this.N&&!this.O){dm="/"+dm;}else{var em=bm.O.lastIndexOf("/");-1!=em&&(dm=bm.O.substr(0,em+1)+dm);}if(".."==dm||"."==dm){dm="";}else if(-1!=dm.indexOf("./")||-1!=dm.indexOf("/.")){for(var em=0==dm.lastIndexOf("/",0),dm=dm.split("/"),fm=[],gm=0;gm<dm.length;){var hm=dm[gm++];"."==hm?em&&gm==dm.length&&fm.push(""):".."==hm?((1<fm.length||1==fm.length&&""!=fm[0])&&fm.pop(),em&&gm==dm.length&&fm.push("")):(fm.push(hm),em=true);}dm=fm.join("/");}}cm?bm.O=dm:cm=""!==am.a.toString();cm?bf(bm,am.a.clone()):cm=!!am.V;cm&&(bm.V=am.V);return bm;};j.clone=function(){return new ye(this);};function ze(am,bm,cm){am.P=cm?cf(bm,true):bm;am.P&&(am.P=am.P.replace(/:$/,""));}function af(am,bm){if(bm){bm=Number(bm);if(isNaN(bm)||0>bm)throw Error("Bad port number "+bm);am.ia=bm;}else am.ia=null;}function bf(am,bm,cm){bm instanceof lf?am.a=bm:(cm||(bm=df(bm,jf)),am.a=new lf(bm));}function cf(am,bm){return am?bm?decodeURI(am):decodeURIComponent(am):"";}function df(am,bm,cm){return "string"==typeof am?(am=encodeURI(am).replace(bm,ef),cm&&(am=am.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),am):null;}function ef(am){am=am.charCodeAt(0);return "%"+(am>>4&15).toString(16)+(am&15).toString(16);}var ff=/[#\/\?@]/g,gf=/[\#\?:]/g,hf=/[\#\?]/g,jf=/[\#\?@]/g,kf=/#/g;function lf(am){this.b=am||null;}lf.prototype.a=null;lf.prototype.c=null;function mf(am,bm,cm){if(!am.a&&(am.a={},am.c=0,am.b))for(var dm=am.b.split("&"),em=0;em<dm.length;em++){var fm=dm[em].indexOf("="),gm=null,hm=null;0<=fm?(gm=dm[em].substring(0,fm),hm=dm[em].substring(fm+1)):gm=dm[em];gm=decodeURIComponent(gm.replace(/\+/g," "));hm=hm||"";mf(am,gm,decodeURIComponent(hm.replace(/\+/g," ")));}am.b=null;(dm=am.a.hasOwnProperty(bm)&&am.a[bm])||(am.a[bm]=dm=[]);dm.push(cm);am.c++;}lf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var am=[],bm;for(bm in this.a)for(var cm=encodeURIComponent(bm),dm=this.a[bm],em=0;em<dm.length;em++){var fm=cm;""!==dm[em]&&(fm+="="+encodeURIComponent(dm[em]));am.push(fm);}return this.b=am.join("&");};lf.prototype.clone=function(){var am=new lf();am.b=this.b;if(this.a){var bm={},cm;for(cm in this.a)bm[cm]=this.a[cm].concat();am.a=bm;am.c=this.c;}return am;};function nf(am,bm,cm){am=(new DOMParser()).parseFromString(am,"text/xml");if(!am)return null;bm=bm||[new ye("")];cm=cm||[new ye("")];return lg({cb:bm,s:cm},am,of);}l("shaka.dash.mpd.parseMpd",nf);function of(){this.id=this.url=null;this.type="static";this.b=this.j=this.s=this.cb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function pf(){this.g=this.f=this.c=this.s=this.a=this.start=this.id=null;this.b=[];}function qf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.s=null;this.j=[];this.a=[];}function rf(){this.value=null;}function sf(){this.contentType=this.lang=this.id=null;}function tf(){this.a=this.b=this.g=this.s=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function uf(){this.b=this.a=this.c=this.f=null;}function vf(){this.parsedPssh=this.psshBox=null;}function wf(){this.url=null;}function xf(){this.url=null;}function yf(){this.s=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}yf.prototype.clone=function(){var am=new yf();am.s=pg(this.s);am.h=this.h;am.g=this.g;am.a=qg(this.a);am.f=qg(this.f);am.b=qg(this.b);am.c=qg(this.c);return am;};function zf(){this.a=this.url=null;}zf.prototype.clone=function(){var am=new zf();am.url=pg(this.url);am.a=qg(this.a);return am;};function ag(){this.a=this.url=null;}ag.prototype.clone=function(){var am=new ag();am.url=pg(this.url);am.a=qg(this.a);return am;};function bg(){this.s=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}bg.prototype.clone=function(){var am=new bg();am.s=pg(this.s);am.a=this.a;am.g=this.g;am.c=this.c;am.i=this.i;am.h=qg(this.h);am.b=pg(this.b)||[];am.f=qg(this.f);return am;};function cg(){this.a=this.b=null;}cg.prototype.clone=function(){var am=new cg();am.b=pg(this.b);am.a=qg(this.a);return am;};function dg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}dg.prototype.clone=function(){var am=new dg();am.a=this.a;am.i=this.i;am.b=this.b;am.j=this.j;am.h=this.h;am.f=this.f;am.g=this.g;am.c=qg(this.c);return am;};function eg(){this.a=[];}eg.prototype.clone=function(){var am=new eg();am.a=pg(this.a)||[];return am;};function fg(){this.c=this.a=this.b=null;}fg.prototype.clone=function(){var am=new fg();am.b=this.b;am.a=this.a;am.c=this.c;return am;};function gg(am,bm){this.ha=am;this.end=bm;}gg.prototype.clone=function(){return new gg(this.ha,this.end);};of.TAG_NAME="MPD";pf.TAG_NAME="Period";qf.TAG_NAME="AdaptationSet";rf.TAG_NAME="Role";sf.TAG_NAME="ContentComponent";tf.TAG_NAME="Representation";uf.TAG_NAME="ContentProtection";vf.TAG_NAME="cenc:pssh";wf.TAG_NAME="BaseURL";xf.TAG_NAME="Location";yf.TAG_NAME="SegmentBase";zf.TAG_NAME="RepresentationIndex";ag.TAG_NAME="Initialization";bg.TAG_NAME="SegmentList";cg.TAG_NAME="SegmentURL";dg.TAG_NAME="SegmentTemplate";eg.TAG_NAME="SegmentTimeline";fg.TAG_NAME="S";of.prototype.parse=function(am,bm){this.url=am.cb;this.id=rg(bm,"id",yg);this.type=rg(bm,"type",yg)||"static";this.b=rg(bm,"mediaPresentationDuration",tg);this.h=rg(bm,"minBufferTime",tg,this.h);this.g=rg(bm,"minimumUpdatePeriod",tg,this.g);this.c=rg(bm,"availabilityStartTime",sg,this.c);this.f=rg(bm,"timeShiftBufferDepth",tg,this.f);this.f=null;this.i=rg(bm,"suggestedPresentationDelay",tg,this.i);var cm=am.s,dm=ng(this,bm,wf);this.s=ig(cm,dm);if(dm=lg(this,bm,xf))this.j=jg(cm,dm.url);this.a=ng(this,bm,pf);};pf.prototype.parse=function(am,bm){this.id=rg(bm,"id",yg);this.start=rg(bm,"start",tg);this.a=rg(bm,"duration",tg);var cm=ng(this,bm,wf);this.s=ig(am.s,cm);this.c=lg(this,bm,yf);this.f=lg(this,bm,bg);this.g=lg(this,bm,dg);this.b=ng(this,bm,qf);hg(this);};function hg(am){for(var bm=[],cm=0;cm<am.b.length;++cm){var dm=am.b[cm];null!=dm.group&&(bm[dm.group]=true);}for(cm=0;cm<am.b.length;++cm)if(dm=am.b[cm],null==dm.group){for(var em=1;1==bm[em];)++em;bm[em]=true;dm.group=em;}}qf.prototype.parse=function(am,bm){var cm=lg(this,bm,sf)||{},dm=lg(this,bm,rf);this.id=rg(bm,"id",yg);this.group=rg(bm,"group",xg);this.lang=rg(bm,"lang",yg,cm.lang);this.contentType=rg(bm,"contentType",yg,cm.contentType);this.width=rg(bm,"width",wg);this.height=rg(bm,"height",wg);this.b=rg(bm,"mimeType",yg);this.i=rg(bm,"codecs",yg);this.c=dm&&"main"==dm.value;this.lang&&(this.lang=cc(this.lang));cm=ng(this,bm,wf);this.s=ig(am.s,cm);this.j=ng(this,bm,uf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=am.c?kg(this,bm,am.c):lg(this,bm,yf);this.g=am.f?kg(this,bm,am.f):lg(this,bm,bg);this.h=am.g?kg(this,bm,am.g):lg(this,bm,dg);this.a=ng(this,bm,tf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};rf.prototype.parse=function(am,bm){this.value=rg(bm,"value",yg);};sf.prototype.parse=function(am,bm){this.id=rg(bm,"id",yg);this.lang=rg(bm,"lang",yg);this.contentType=rg(bm,"contentType",yg);this.lang&&(this.lang=cc(this.lang));};tf.prototype.parse=function(am,bm){this.id=rg(bm,"id",yg);this.bandwidth=rg(bm,"bandwidth",wg);this.width=rg(bm,"width",wg,am.width);this.height=rg(bm,"height",wg,am.height);this.f=rg(bm,"mimeType",yg,am.b);this.h=rg(bm,"codecs",yg,am.i);this.lang=am.lang;var cm=ng(this,bm,wf);this.s=ig(am.s,cm);this.c=ng(this,bm,uf);this.g=am.f?kg(this,bm,am.f):lg(this,bm,yf);this.b=am.g?kg(this,bm,am.g):lg(this,bm,bg);this.a=am.h?kg(this,bm,am.h):lg(this,bm,dg);this.c=this.c.concat(am.j);};uf.prototype.parse=function(am,bm){this.f=bm;this.c=rg(bm,"schemeIdUri",yg);var cm=rg(bm,"cenc:default_KID",yg);cm&&(this.b=cm.replace(/[-]/g,""));this.a=lg(this,bm,vf);};vf.prototype.parse=function(am,bm){var cm=og(bm);if(cm){this.psshBox=rd(cm);try{this.parsedPssh=new ke(this.psshBox);}catch(dm){if(!(dm instanceof RangeError))throw dm;}}};wf.prototype.parse=function(am,bm){this.url=og(bm);};xf.prototype.parse=function(am,bm){this.url=og(bm);};yf.prototype.parse=function(am,bm){this.s=am.s||this.s;this.h=rg(bm,"timescale",wg,this.h);this.g=rg(bm,"presentationTimeOffset",xg,this.g);this.a=rg(bm,"indexRange",ug,this.a);this.f=rg(bm,"FBFirstSegmentRange",ug,this.f);this.b=lg(this,bm,zf)||this.b;this.c=lg(this,bm,ag)||this.c;};zf.prototype.parse=function(am,bm){var cm=rg(bm,"sourceURL",yg);this.url=jg(am.s,cm);this.a=rg(bm,"range",ug,qg(am.a));};ag.prototype.parse=function(am,bm){var cm=rg(bm,"sourceURL",yg);this.url=jg(am.s,cm);this.a=rg(bm,"range",ug);};bg.prototype.parse=function(am,bm){this.s=am.s||this.s;this.a=rg(bm,"timescale",wg,this.a);this.g=rg(bm,"presentationTimeOffset",xg,this.g);this.c=rg(bm,"duration",wg,this.c);var cm=rg(bm,"startNumber",wg);null!=cm&&(this.i=cm);this.h=lg(this,bm,ag)||this.h;this.b=(cm=ng(this,bm,cg))&&0<cm.length?cm:this.b;this.f=lg(this,bm,eg)||this.f;};cg.prototype.parse=function(am,bm){var cm=rg(bm,"media",yg);this.b=jg(am.s,cm);this.a=rg(bm,"mediaRange",ug);};dg.prototype.parse=function(am,bm){this.a=rg(bm,"timescale",wg,this.a);this.i=rg(bm,"presentationTimeOffset",xg,this.i);this.b=rg(bm,"duration",wg,this.b);var cm=rg(bm,"startNumber",xg);null!=cm&&(this.j=cm);this.h=rg(bm,"media",yg,this.h);this.f=rg(bm,"index",yg,this.f);this.g=rg(bm,"initialization",yg,this.g);this.c=lg(this,bm,eg)||this.c;};eg.prototype.parse=function(am,bm){this.a=ng(this,bm,fg);};fg.prototype.parse=function(am,bm){this.b=rg(bm,"t",xg);this.a=rg(bm,"d",xg);this.c=rg(bm,"r",vg);};function ig(am,bm){if(!bm||0===bm.length)return am;for(var cm=[],dm=0;dm<bm.length;dm++){var em=bm[dm].url;null==am||0===am.length?cm.push(new ye(em)):(em=jg(am.slice(0,1),em),cm.push(em[0]));}return cm;}function jg(am,bm){if(!bm)return am;var cm=new ye(bm);return am?am.map(function(dm){return dm.resolve(cm);}):[cm];}function kg(am,bm,cm){var dm=qg(cm);(bm=mg(bm,cm.constructor.TAG_NAME))&&dm.parse(am,bm);return dm;}function lg(am,bm,cm){var dm=null;if(bm=mg(bm,cm.TAG_NAME))dm=new cm(),dm.parse(am,bm);return dm;}function mg(am,bm){for(var cm=null,dm=0;dm<am.childNodes.length;dm++)if(am.childNodes[dm].tagName==bm){if(cm)return null;cm=am.childNodes[dm];}return cm;}function ng(am,bm,cm){for(var dm=[],em=0;em<bm.childNodes.length;em++)if(bm.childNodes[em].tagName==cm.TAG_NAME){var fm=new cm();fm.parse.call(fm,am,bm.childNodes[em]);dm.push(fm);}return dm;}function og(am){am=am.firstChild;return am.nodeType!=Node.TEXT_NODE?null:am.nodeValue;}function pg(am){return am?am.map(function(bm){return bm.clone();}):null;}function qg(am){return am?am.clone():null;}function rg(am,bm,cm,dm){am=cm(am.getAttribute(bm));return null!=am?am:void 0!==dm?dm:null;}function sg(am){if(!am)return null;am=Date.parse(am);return isNaN(am)?null:Math.floor(am/1000);}function tg(am){if(!am)return null;var bm=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(am);if(!bm)return null;am=0;var cm=xg(bm[1]);cm&&(am+=31536000*cm);(cm=xg(bm[2]))&&(am+=2592000*cm);(cm=xg(bm[3]))&&(am+=86400*cm);(cm=xg(bm[4]))&&(am+=3600*cm);(cm=xg(bm[5]))&&(am+=60*cm);bm=i.parseFloat(bm[6]);(bm=isNaN(bm)?null:bm)&&(am+=bm);return am;}function ug(am){var bm=/([0-9]+)-([0-9]+)/.exec(am);if(!bm)return null;am=xg(bm[1]);if(null==am)return null;bm=xg(bm[2]);return null==bm?null:new gg(am,bm);}function vg(am){am=i.parseInt(am,10);return isNaN(am)?null:am;}function wg(am){am=i.parseInt(am,10);return 0<am?am:null;}function xg(am){am=i.parseInt(am,10);return 0<=am?am:null;}function yg(am){return am;}function zg(am,bm){this.url=am;this.b=bm||new ah();this.g=this.j=this.h=0;this.a=null;this.c=new xc();this.f=null;}l("shaka.util.AjaxRequest",zg);function ah(){this.body=null;this.a=1;this.h=1000;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.g=this.i=false;this.j=null;}var bh=true;function ch(am){dh(am);am.b.body=null;am.c.destroy();am.c=null;am.f=null;}function dh(am){am.a&&(am.a.onload=null,am.a.onreadystatechange=null,am.a.onerror=null,am.a.ontimeout=null);am.a=null;}zg.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var am=this.url.split(":")[1].split(";").pop().split(","),bm=am.pop(),bm="base64"==am.pop()?i.atob(bm.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(bm);"arraybuffer"==this.b.f&&(bm=qd(bm).buffer);am=JSON.parse(JSON.stringify(new XMLHttpRequest()));am.response=bm;am.responseText=bm.toString();bm=this.c;bm.resolve(am);ch(this);return bm;}if(0==this.url.lastIndexOf("idb:",0))return this.G();this.h++;this.j=Date.now();this.g||(this.g=this.b.h);this.a=new XMLHttpRequest();am=this.url;bh&&(this.f&&!this.f.supportsCaching()||this.b.g)&&(am=new ye(am),mf(am.a,"_",Date.now()),am=am.toString());this.a.open(this.b.method,am,true);this.a.responseType=this.b.f;this.a.timeout=this.b.c;this.a.withCredentials=this.b.i;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.o.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.u.bind(this);for(bm in this.b.b)this.a.setRequestHeader(bm,this.b.b[bm]);this.a.send(this.b.body);return this.c;};zg.prototype.send=zg.prototype.i;function eh(am,bm,cm){bm=Error(bm);bm.type=cm;bm.status=am.a.status;bm.url=am.url;bm.method=am.b.method;bm.body=am.b.body;bm.Lb=am.a;return bm;}zg.prototype.l=function(am){this.f&&this.f.sample(Date.now()-this.j,am.loaded);am=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),ch(this)):this.h<this.b.a&&-1===am.indexOf(this.a.status)?fh(this):(am=eh(this,"HTTP error.","net"),this.c.reject(am),ch(this));};zg.prototype.o=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ja=Date.now()-this.j,this.b.g)){var am=Date.parse(this.a.getResponseHeader("Date"));am&&(fb=am-Date.now());}};zg.prototype.v=function(){var am=eh(this,"Network failure.","net");this.c.reject(am);ch(this);};zg.prototype.u=function(){if(this.h<this.b.a){fh(this);}else{var am=eh(this,"Request timed out.","net");this.c.reject(am);ch(this);}};function fh(am){dh(am);i.setTimeout(am.i.bind(am),am.g*(1+.5*(2*Math.random()-1)));am.g*=2;}function gh(am,bm,cm,dm){this.b=bm;this.h=cm||0;this.g=null!=dm?dm:null;this.c=this.a=null;this.j=am;this.i=null;}var hh;l("shaka.util.FailoverUri",gh);function ih(am,bm){return am&&0!==am.length?am.map(function(cm){return cm.resolve(bm);}):[bm];}gh.setPrefetchCacheValueGetter=function(am){hh=am;};function jh(am,bm,cm){if(am.a)return am.a;am.a=kh(am,0,bm||new ah(),cm);return am.a;}gh.prototype.f=function(){if(this.c){this.a=null;var am=this.c;if(am.a&&am.a.readyState!=XMLHttpRequest.DONE){am.a.abort();var bm=eh(am,"Request aborted.","aborted");am.c.reject(bm);ch(am);}this.i=this.c=null;}};function kh(am,bm,cm,dm){var em=am.b[bm].toString();if(am.h||am.g){var fm=am.b[bm].N;!fm.endsWith("fbcdn.net")||fm.startsWith("interncache")||fm.endsWith("ak.fbcdn.net")?cm.b.Range="bytes="+(am.h+"-"+(null!=am.g?am.g:"")):em+="&bytestart="+am.h+"&byteend="+am.g;}am.j&&(em=am.j(em,cm.b)||em);fm=null;hh&&(fm=hh(em));fm||(am.c=new zg(em,cm),dm&&(am.c.f=dm),fm=am.c.i());em=fm.then(dd(am,function(gm){this.i=this.c=this.a=null;this.i=gm.a?new ye(gm.a):this.b[bm];gm.response.ja=gm.ja;return Promise.resolve(gm.response);}));return em=em.catch(dd(am,function(gm){if(this.a&&bm+1<this.b.length)return this.a=kh(this,bm+1,cm,dm);this.a=this.c=null;return Promise.reject(gm);}));}gh.prototype.clone=function(){return new gh(this.j,this.b.map(function(am){return am.clone();}),this.h,this.g);};gh.prototype.toString=function(){return this.b[0].toString();};function lh(am,bm){this.a=new ah();this.a.f="text";this.a.a=3;this.a.c=1000*(null!=bm?bm:0);this.a.g=true;this.b=am;}function mh(am){var bm=am.b;return jh(bm,am.a).then(function(cm){if(cm=nf(cm,bm.b,[bm.i]))return Promise.resolve(cm);cm=Error("MPD parse failure.");cm.type="dash";return Promise.reject(cm);});}function nh(am,bm,cm,dm){for(var em=bm.a,fm=[],gm=0;gm<dm;++gm){var hm=gm+cm,im=(hm-1)*em.b,jm=im/em.a,km=(im+em.b)/em.a,hm=oh(am,bm,em.j+hm-1,im);if(!hm)return null;fm.push(new sh(jm,km,hm));}return fm;}function oh(am,bm,cm,dm){if(!bm.a)return null;var em=bm.a.h;if(!em)return bm.s?new gh(am,bm.s,0,null):null;cm=ph(em,bm.id,cm,bm.bandwidth,dm);if(!cm)return null;bm=ih(bm.s,cm);return new gh(am,bm,0,null);}function ph(am,bm,cm,dm,em){var fm={RepresentationID:bm,Number:cm,Bandwidth:dm,Time:em};am=am.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(hm,im,jm){if("$$"==hm)return "$";var km=fm[im];if(null==km)return hm;"RepresentationID"==im&&jm&&(jm=void 0);hm=km.toString();jm=i.parseInt(jm,10)||1;jm=Math.max(0,jm-hm.length);return Array(jm+1).join("0")+hm;});try{return new ye(am);}catch(gm){if(gm instanceof URIError)return null;throw gm;}}function qh(am,bm,cm){var dm=0;bm*=cm;am=am.a;cm=[];for(var em=0;em<am.length&&am[em].a;++em){var fm=am[em].b,fm=null!=fm?fm:dm,gm=am[em].c||0;0>gm&&(gm=am[em].a,gm=em+1===am.length?Math.ceil((am[0].b+bm-fm)/gm)-1:Math.ceil((am[em+1].b-fm)/gm)-1);0<cm.length&&fm!=dm&&(cm[cm.length-1].end=fm);for(var hm=0;hm<=gm;++hm)dm=fm+am[em].a,cm.push({start:fm,end:dm}),fm=dm;}return cm;}function rh(am,bm){this.a=am;this.b=bm||null;}rh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};rh.prototype.create=function(){return this.a?jh(this.a):Promise.resolve(this.b);};function sh(am,bm,cm){this.b=am;this.a=bm;this.url=cm;}function th(am,bm,cm){return new sh(bm,cm,am.url);}function uh(am,bm){for(var cm=am.length-1;0<=cm;--cm){var dm=am[cm];if(bm>=dm.b&&(null==dm.a||bm<dm.a))return cm;}return -1;}function vh(am,bm){return am.map(function(cm){return th(cm,cm.b+bm,null!=cm.a?cm.a+bm:null);});}function wh(){}wh.prototype.parse=function(am,bm,cm,dm,em){var fm=null;try{am:{var hm=[],im=new gb(am),jm=kb(im);if(1936286840!=kb(im)){fm=null;}else{1==jm&&(jm=lb(im));var km=jb(im);nb(im,3);nb(im,4);var lm=kb(im);if(0==lm){fm=null;}else{var mm,nm;0==km?(mm=kb(im),nm=kb(im)):(mm=lb(im),nm=lb(im));nb(im,2);var om=im.b.getUint16(im.a,im.c);im.a+=2;am=mm;bm=bm+jm+nm;for(jm=0;jm<om;jm++){var pm=kb(im);nm=(pm&2147483648)>>>31;var km=pm&2147483647,qm=kb(im);kb(im);if(1==nm){fm=null;break am;}var rm;rm=0==jm&&em?em:new gh(dm,cm,bm,bm+km-1);hm.push(new sh(am/lm,(am+qm)/lm,rm));am+=qm;bm+=km;}fm=hm;}}};}catch(gm){if(!(gm instanceof RangeError))throw gm;}return fm;};function xh(am){this.a=am;this.v=this.u=this.R=0;}xh.prototype.F=function(){return this.v;};xh.prototype.getConsecutiveUpdatesWithoutChanges=xh.prototype.F;xh.prototype.D=function(){return this.u;};xh.prototype.getConsecutiveUpdatesWithChanges=xh.prototype.D;xh.prototype.destroy=function(){this.a=null;};j=xh.prototype;j.length=function(){return this.a.length;};function yh(am){if(0==am.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return am.a[0];}j.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};j.get=function(am){if(0>am||am>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[am];};j.la=function(am){am=uh(this.a,am);return 0<=am?this.a[am]:null;};j.Ea=function(am){zh(this,am);return true;};function zh(am,bm){am.R!=bm.R&&(bm=new xh(vh(bm.a,am.R-bm.R)));if(0==am.length()){am.a=bm.a.slice(0);}else if(0!=bm.length()&&null!=am.w().a&&!(null!=bm.w().a&&bm.w().a<am.w().a)){if(am.w().a<=yh(bm).b){var cm=th(am.w(),am.w().b,yh(bm).b),cm=am.a.slice(0,-1).concat([cm]);}else{var dm;for(dm=0;dm<am.a.length&&!(am.a[dm].a>=yh(bm).b);++dm);am.a[dm].b<yh(bm).b?(cm=th(am.a[dm],am.a[dm].b,yh(bm).b),cm=am.a.slice(0,dm).concat([cm])):(yh(am).b>yh(bm).b||yh(bm),cm=am.a.slice(0,dm));}am.a=cm.concat(bm.a);}}j.ka=function(am){var bm=am-this.R;if(0==bm)return 0;this.a=vh(this.a,bm);this.R=am;return bm;};j.Ba=function(){return 0<this.length()?{start:yh(this).b,end:this.w().a}:{start:0,end:0};};function ai(am,bm,cm,dm){xh.call(this,am);this.h=bm;this.A=cm;this.g=dm;this.i=this.h.b||this.h.a.reduce(function(em,fm){return null==fm.a?NaN:em+fm.a;},0)||0;this.b=this.o=this.f=null;bi(this);}m(ai,xh);ai.prototype.destroy=function(){this.A=this.h=null;xh.prototype.destroy.call(this);};ai.prototype.la=function(am){di(this,eb()/1000);return xh.prototype.la.call(this,am);};ai.prototype.Ea=function(am){if(!(am instanceof ai))return false;zh(this,am);this.i=Math.max(this.i,am.i);null==this.f?(this.g=am.g,bi(this)):ei(this);return true;};function bi(am){ei(am);if(0!=am.length()){am.length();var bm=null!=am.w().a?am.w().a:am.w().b;if(am.h.c>am.g){am.f=bm;}else{var cm=am.g-(am.h.c+am.A.start);0>cm?am.f=bm:cm<Math.max(am.w().b,am.w().a||0)?(am.w(),am.f=bm):am.f=cm;}am.o=am.w().b;am.b=yh(am).b;}}ai.prototype.ka=function(am){am=xh.prototype.ka.call(this,am);Math.min.apply(null,this.a.filter(function(bm){return null!=bm.a;}).map(function(bm){return bm.a-bm.b;}));null!=this.f&&(this.o+=am,this.b+=am,this.f+=am);return am;};ai.prototype.Ba=function(){return ci(this,eb()/1000);};function ci(am,bm){di(am,bm);if(null==am.f||null==am.o||null==am.b)return {start:0,end:0};var cm=Number.POSITIVE_INFINITY;am.i&&(cm=am.i);var dm=bm-am.g,em=am.f+dm;null!=am.h.f&&(em=em-am.b-am.h.f,0<em&&(am.b+=em));am.b=Math.min(am.b,cm);dm=am.o+dm;if(dm<am.b)return {start:am.b,end:am.b};dm=0<am.length()?null!=am.w().a?Math.min(dm,am.w().a):dm:am.b;dm=Math.max(dm,am.b);dm=Math.min(dm,cm);return {start:am.b,end:dm};}function di(am,bm){ei(am);if(null!=am.h.f)if(null==am.f){am.length();}else{for(var cm=am.f+(bm-am.g),dm=0,em=0;em<am.a.length;++em){var fm=null;em<am.a.length-1?fm=am.a[em+1].a:(fm=am.a[em],fm=null!=fm.a?fm.a+(fm.a-fm.b):null);if(null!=fm&&fm<cm-am.h.f){++dm;}else break;}0<dm&&am.a.splice(0,dm);}}function ei(am){if(am.i){for(var bm=0,cm=am.a.length-1;0<=cm;--cm)if(am.a[cm].b>am.i){++bm;}else break;0<bm&&am.a.splice(-bm);}}function fi(am,bm,cm,dm,em){var fm=1,gm=0,hm;if(am.c>dm){hm=null;}else{var im=am.i||0,jm=am.f||0;hm=cm.a;hm=hm.b/hm.a;var km=dm-(am.c+bm.start);0>km?hm=null:(jm=km-2*hm-jm,0>jm&&(jm=0),jm=Math.ceil(jm/hm)*hm,km-=hm,0>km?hm=null:(im=Math.floor(km/hm)*hm-im,0>im&&(im=0),im=Math.floor(im/hm)*hm,hm={Wa:jm/hm+1,current:(im>=jm?im:jm)/hm+1}));}hm&&(fm=hm.Wa,gm=hm.current-hm.Wa+1);fm=nh(em,cm,fm,gm);if(null==fm)throw am=Error("Failed to generate SegmentReferences."),am.type="stream",am;ai.call(this,fm,am,bm,dm);this.G=cm;this.l=this.c=0<this.length()?am.c+bm.start+this.w().a:null;this.j=hm?hm.current+1:null;this.B=em;}m(fi,ai);fi.prototype.destroy=function(){this.B=this.G=null;ai.prototype.destroy.call(this);};fi.prototype.la=function(am){var bm=eb()/1000;gi(this,bm);di(this,bm);return xh.prototype.la.call(this,am);};fi.prototype.Ea=function(am){if(null!=this.c||!(am instanceof fi)||null==am.c)return false;this.c=am.c;this.l=am.l;this.j=am.j;this.g=am.g;this.i=am.i;zh(this,am);gi(this,eb()/1000);bi(this);return true;};fi.prototype.ka=function(am){am=ai.prototype.ka.call(this,am);null!=this.c&&(this.c+=am,this.l+=am);return am;};fi.prototype.Ba=function(){var am=eb()/1000;gi(this,am);return ci(this,am);};function gi(am,bm){if(null!=am.c&&null!=am.l&&null!=am.j){var cm=am.G.a,cm=cm.b/cm.a,dm=Math.floor((am.l+(bm-am.g)-am.c)/cm);if(0!=dm){var em=nh(am.B,am.G,am.j,dm);Array.prototype.push.apply(am.a,vh(em,am.R));am.c+=dm*cm;am.j+=dm;}}}function hi(am,bm,cm,dm,em){this.f=am;this.b=bm;this.c=cm;this.h=dm;this.a=null;this.g=em;}hi.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};hi.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new fi(this.f,this.b,this.c,this.h,this.g);}catch(am){return Promise.reject(am);}}else{var bm;bm=this.c.a;if(bm=nh(this.g,this.c,1,Math.ceil(this.b.a/(bm.b/bm.a)))){if(0<bm.length){var cm=bm[bm.length-1];bm[bm.length-1]=th(cm,cm.b,this.b.a);}bm=new xh(bm);}else bm=null;this.a=bm;if(!this.a)return bm=Error("Failed to generate SegmentReferences"),bm.type="stream",Promise.reject(bm);}return Promise.resolve(this.a);};function ii(am,bm,cm,dm,em){this.c=am;this.b=bm;this.g=cm;this.a=null;this.h=dm;this.f=em;}ii.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};ii.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var am=this.g.b,bm=[];am.f&&(bm=qh(am.f,am.a||1,this.b.a||0));var cm=0;am.c&&am.i?cm=(am.i-1)*am.c:0<bm.length&&(cm=bm[0].start-(am.g||0));var dm=cm,em=am.b.length;0<bm.length&&bm.length!=am.b.length&&(em=Math.min(bm.length,am.b.length));for(var fm=[],gm=0;gm<em;++gm){var hm=am.b[gm],im=cm/am.a,jm=null,km=null;am.c?(jm=cm+am.c,km=jm/am.a):0<bm.length?(jm=bm[gm].end-(am.g||0),km=jm/am.a):(km=im+this.b.a,jm=km*am.a);var cm=jm,jm=0,lm=null;hm.a&&(jm=hm.a.ha,lm=hm.a.end);km=Math.min(this.b.a+dm/am.a,km);fm.push(new sh(im,km,new gh(this.f,hm.b,jm,lm)));}"dynamic"==this.c.type?this.a=new ai(fm,this.c,this.b,this.h):this.a=new xh(fm);return Promise.resolve(this.a);};function ji(am,bm,cm,dm,em){this.b=am;this.c=bm;this.f=cm;this.h=dm;this.a=null;this.g=em;}ji.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ji.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var am=this.f.a,bm=qh(am.c,am.a||1,this.c.a||0),cm=[],dm=0;dm<bm.length;++dm){var em=bm[dm].start,fm=em/am.a,gm=bm[dm].end/am.a,em=oh(this.g,this.f,dm+am.j,em);if(!em)return am=Error("Failed to generate media URL."),am.type="dash",Promise.reject(am);var hm=(am.i||0)/am.a;cm.push(new sh(fm-hm,gm-hm,em));}"dynamic"==this.b.type?this.a=new ai(cm,this.b,this.c,this.h):this.a=new xh(cm);return Promise.resolve(this.a);};function ki(){this.C=li++;this.id=this.J=this.I=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.f=[];this.M=false;this.H=true;}var li=0;ki.prototype.destroy=function(){this.I&&(this.I.destroy(),this.I=null);this.J&&(this.J.destroy(),this.J=null);};function mi(am){var bm=am.a||"";am.c&&(bm+='; codecs="'+am.c+'"');return bm;}function ni(){this.C=oi++;this.id=null;this.contentType=this.lang="";this.b=false;this.m=[];this.a=[];}var oi=0;ni.prototype.destroy=function(){for(var am=0;am<this.m.length;++am)this.m[am].destroy();this.a=this.m=null;};function pi(am){for(var bm=[],cm=0;cm<am.a.length;++cm){var dm=new si();dm.id=am.C;dm.a=am.a[cm];dm.contentType=am.contentType;dm.b=am.m.length?mi(am.m[0]):"";bm.push(dm);}return bm;}function qi(){this.id=null;this.start=0;this.b=null;this.a=[];}qi.prototype.destroy=function(){for(var am=0;am<this.a.length;++am)this.a[am].destroy();this.a=null;};function ri(){this.b=false;this.i=this.g=this.f=null;this.c=0;this.a=[];this.h=false;}ri.prototype.destroy=function(){for(var am=0;am<this.a.length;++am)this.a[am].destroy();this.a=null;};function si(){this.id=0;this.a=null;this.b=this.contentType="";}function ti(am,bm,cm,dm,em){sc.call(this,am);this.c=bm;this.a=new ed(cm,dm,em);this.L=0;this.u=this.D=this.b=null;this.F=false;this.g=null;this.o=false;this.j=null;this.i=false;this.h=new xc();this.l=this.f=false;this.v=0;this.K=15;this.A=false;}m(ti,sc);ti.prototype.B=function(am){null!=am.initialStreamBufferSize&&(this.v=Number(am.initialStreamBufferSize));null!=am.streamBufferSize&&(this.K=Number(am.streamBufferSize));null!=am.segmentRequestTimeout&&(this.a.o=Number(am.segmentRequestTimeout));};ti.prototype.destroy=function(){aj(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.G=this.c=this.a=null;};j=ti.prototype;j.ma=function(){return this.b;};j.Za=function(){return this.D;};j.hb=function(am){this.f||am.then(function(){this.f=true;this.g||zi(this,0);}.bind(this)).catch(function(){});return this.h;};j.Da=function(){return this.l;};j.oa=function(am,bm,cm){am!=this.b&&(this.u=am.J.create(),am.I.create().then(dd(this,function(dm){if(this.c){var em=this.b;this.b=am;this.D=dm;this.F=true;this.o||(em?bm&&ui(this,true,cm):zi(this,0));}})).catch(dd(this,function(dm){"aborted"!=dm.type&&(this.f?(dm=yb(dm),this.dispatchEvent(dm)):this.h.reject(dm));})));};j.eb=function(){return ui(this,false);};function ui(am,bm,cm){am.b&&!am.o&&(am.o=true,aj(am),ld(am.a).then(dd(am,function(){var dm=this.c.currentTime;if(!bm&&0<gd(this.a,dm)&&0<=uh(this.a.b,dm))return Promise.resolve();if(cm)return kd(this.a,this.c.currentTime+cm);this.A=true;return jd(this.a);})).then(dd(am,function(){this.o=false;zi(this,0);})).catch(dd(am,function(dm){this.o=false;this.f?(dm=yb(dm),this.dispatchEvent(dm)):this.h.reject(dm);})));}j.fb=function(am){return 0<gd(this.a,am)&&0<=uh(this.a.b,am);};j.ra=function(){};j.za=function(){return true;};j.Ab=function(){if(this.i&&!this.f){this.g=null;}else{var am;if(am=this.f&&!this.l)am=1<this.a.c.buffered.length?true:false;if(am){ui(this,true);}else{this.g=null;am=this.b;var bm=this.D,cm=this.c.currentTime;gd(this.a,this.i?cm:cm+(this.j||0))>=(this.i?Math.max(this.v,this.K):this.v)?(wi(this),zi(this,1000/(5*(Math.abs(this.c.playbackRate)||1)))):(bm=vi(this,cm,bm))?(bm=id(this.a,bm,am.b,this.u),this.u=null,this.F&&(this.F=false,xi(this,am)),this.l=false,bm.then(dd(this,function(dm){var em=dm.R;dm=dm.lb;this.i||(this.L=dm);null==this.j&&(this.j=em);this.A&&0<gd(this.a,cm)&&(this.A=false,this.c.currentTime+=.001);zi(this,0);})).catch(dd(this,function(dm){if("aborted"!=dm.type){var em=[0,404,410,502,503,504];"net"==dm.type&&-1!=em.indexOf(dm.Lb.status)&&this.b&&zi(this,1000);dm=yb(dm);this.dispatchEvent(dm);}}))):(wi(this),this.f&&!this.l&&(this.l=true,yi(this)),zi(this,200));}}};function vi(am,bm,cm){am=am.a;var dm=am.b.length;am=0<dm?am.b[dm-1]:null;return null!=am?null!=am.a?cm.la(am.a):null:cm.la(bm)||(cm.length()?cm.w():null);}function wi(am){if(!am.i&&null!=am.j){am.i=true;var bm=am.a,cm=am.j,dm=cm-bm.u;0!=dm&&(bm.b=vh(bm.b,dm),bm.u=cm);am.h.resolve(am.j);}}function xi(am,bm){var cm;cm=bm.a.split("/")[0];cm=xb({type:"adaptation",bubbles:true,contentType:cm,size:"video"!=cm?null:{width:bm.width,height:bm.height},bandwidth:bm.bandwidth});am.dispatchEvent(cm);}function yi(am){var bm=xb({type:"ended"});am.dispatchEvent(bm);}function zi(am,bm){am.g=i.setTimeout(am.Ab.bind(am),bm);}function aj(am){null!=am.g&&(i.clearTimeout(am.g),am.g=null);}j.Aa=function(){return this.L;};function bj(am){this.b=am;this.a=null;}bj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};bj.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var am=new sh(0,null,this.b);this.a=new xh([am]);return Promise.resolve(this.a);};function cj(am,bm){sc.call(this,am);this.b=bm;this.g=true;this.h=this.f=null;this.c=new xc();this.a=null;}m(cj,sc);cj.prototype.B=function(){};cj.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.G=this.b=this.f=this.h=this.a=this.c=null;};j=cj.prototype;j.ma=function(){return this.f;};j.Za=function(){return this.h;};j.hb=function(){return this.c;};j.Da=function(){return true;};j.oa=function(am){am.I.create().then(dd(this,function(bm){if(this.b){if(0==bm.length())return Promise.reject(Error("No subtitles URL available."));var cm=this.f;this.f=am;this.h=bm;bm=yh(bm).url.b[0].toString();var dm=this.za();this.a&&(this.ra(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=bm;this.ra(dm);bm=xb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:am.bandwidth});this.dispatchEvent(bm);cm||this.c.resolve(0);}}));};j.eb=function(){};j.fb=function(){return true;};j.ra=function(am){this.g=am;this.a&&(this.a.track.mode=am?"showing":"disabled");};j.za=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function dj(){}dj.prototype.parse=function(am,bm,cm,dm){var em=null;try{var gm,hm=new ob(bm);if(440786851!=qb(hm).id){gm=null;}else{var im=qb(hm);if(408125543!=im.id){gm=null;}else{var jm=im.a.byteOffset,km,lm=new ob(im.a);for(bm=null;ib(lm.a);){var mm=qb(lm);if(357149030==mm.id){bm=mm;break;}}if(bm){for(var nm=new ob(bm.a),lm=1e+06;ib(nm.a);){var om=qb(nm);if(2807729==om.id){lm=tb(om);break;}}km=lm/1e+09;}else km=null;gm=km?{Gb:jm,Jb:km}:null;}}if(gm){var pm=qb(new ob(am));if(475249515!=pm.id){em=null;}else{var qm=gm.Gb,rm=gm.Jb;am=[];var sm=new ob(pm.a);for(gm=pm=-1;ib(sm.a);){var tm=qb(sm);if(187==tm.id){var um,vm=new ob(tm.a),wm=qb(vm);if(179!=wm.id){um=null;}else{var xm=tb(wm),ym=qb(vm);if(183!=ym.id){um=null;}else{for(var zm=new ob(ym.a),jm=0;ib(zm.a);){var an=qb(zm);if(241==an.id){jm=tb(an);break;}}um={Kb:xm,Fb:jm};}}if(um){var bn=rm*um.Kb,cn=qm+um.Fb;if(0<=pm){var dn=new gh(dm,cm,gm,cn-1);am.push(new sh(pm,bn,dn));}pm=bn;gm=cn;}}}0<=pm&&(dn=new gh(dm,cm,gm,null),am.push(new sh(pm,null,dn)));em=am;}}else em=null;}catch(fm){if(!(fm instanceof RangeError))throw fm;}return em;};function ej(am,bm,cm,dm,em,fm,gm,hm){this.h=am;this.j=bm;this.f=cm;this.a=dm;this.g=em;this.b=fm;this.l=gm;this.c=null;this.i=hm;}ej.prototype.destroy=function(){this.i=this.j=this.h=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.g&&(this.g.f(),this.g=null);this.c=null;};ej.prototype.create=function(){if("webm"==this.f){var am=Error("WebM is not supported in this build configuration.");am.type="app";return Promise.reject(am);}if(this.c)return this.c;am=[jh(this.a)];"webm"==this.f&&am.push(jh(this.g));this.b&&jh(this.b);return this.c=Promise.all(am).then(dd(this,function(bm){var cm=bm[0];bm=bm[1]||null;var dm=null;"mp4"==this.f?(dm=new wh(),dm=dm.parse(new DataView(cm),this.a.h,this.a.b,this.i,this.b)):"webm"==this.f&&(dm=new dj(),dm=dm.parse(new DataView(cm),new DataView(bm),this.a.b,this.i));if(!dm)return cm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),cm.type="stream",Promise.reject(cm);var em;"dynamic"==this.h.type?em=new ai(dm,this.h,this.j,this.l):em=new xh(dm);return Promise.resolve(em);}));};function fj(am){this.a=am;}function gj(am,bm,cm){for(var dm=eb()/1000,em=0;em<bm.a.length;++em)for(var fm=bm.a[em],gm=0;gm<fm.b.length;++gm){var hm=fm.b[gm];if("text"!=hm.contentType)for(var im=0;im<hm.a.length;++im){var jm=hm.a[im],km=0,km=km+(jm.g?1:0),km=km+(jm.b?1:0),km=km+(jm.a?1:0);0==km?(hm.a.splice(im,1),--im):1!=km&&(jm.g?(jm.b=null,jm.a=null):jm.b&&(jm.a=null));}}hj(bm);for(em=0;em<bm.a.length;++em)for(fm=bm.a[em],gm=0;gm<fm.b.length;++gm){im=hm=fm.b[gm];jm=null;for(km=0;km<im.a.length;++km){var lm=im.a[km].f||"";jm?lm!=jm&&(im.a.splice(km,1),--km):jm=lm;}0==hm.a.length&&(fm.b.splice(gm,1),--gm);}"dynamic"==bm.type&&null==bm.c&&(bm.c=dm);em=new ri();"dynamic"==bm.type&&(em.b=true,em.f=bm.g,em.g=new gh(cm,bm.j||bm.url),em.i=bm.c);em.c=bm.h||5;for(fm=0;fm<bm.a.length;++fm){gm=bm.a[fm];if(null==gm.start)break;gm=ij(am,bm,gm,dm,cm);em.a.push(gm);}return em;}function hj(am){if(am.a.length){null==am.a[0].start&&(am.a[0].start=0);var bm=function(im){return 0==im||!!im;};"dynamic"==am.type&&(am.b=null);bm(am.b)&&1==am.a.length&&!bm(am.a[0].a)&&(am.a[0].a=am.b);for(var cm=0,dm=true,em=0;em<am.a.length;++em){var fm=am.a[em-1],gm=am.a[em],hm=am.a[em+1]||{start:am.b};!bm(gm.start)&&fm&&bm(fm.start)&&bm(fm.a)&&(gm.start=fm.start+fm.a);!bm(gm.a)&&bm(hm.start)&&(gm.a=hm.start-gm.start);null!=gm.start&&null!=gm.a?cm+=gm.a:dm=false;}bm(am.b)||(em=am.a[am.a.length-1],dm?am.b=cm:bm(em.start)&&bm(em.a)?am.b=em.start+em.a:"dynamic"!=am.type&&(am.b=cm));}}function ij(am,bm,cm,dm,em){var fm=new qi();fm.id=cm.id;fm.start=cm.start;fm.b=cm.a;var gm=new kc();cm.b.forEach(function(qm){gm.push(qm.contentType||"",qm);});for(var hm=nc(gm),im=0;im<hm.length;++im){var jm=new kc();gm.get(hm[im]).forEach(function(qm){jm.push(qm.group,qm);});for(var km=nc(jm),lm=0;lm<km.length;++lm){var mm=new kc();jm.get(km[lm]).forEach(function(qm){mm.push(qm.lang,qm);});for(var nm=nc(mm),om=0;om<nm.length;++om){var pm=mm.get(nm[om]),pm=jj(am,bm,cm,pm,dm,em);fm.a.push(pm);}}}return fm;}function jj(am,bm,cm,dm,em,fm){n(dm.every(function(om){return om.group==dm[0].group&&(om.lang||"")==(dm[0].lang||"")&&(om.contentType||"")==(dm[0].contentType||"");}));var gm=new ni(),hm=dm.filter(function(om){return null!=om.id;});hm.length==dm.length&&(gm.id=hm.map(function(om){return om.id;}).sort().reduce(function(om,pm){return om+","+pm;}));gm.lang=dm[0].lang||"";gm.contentType=dm[0].contentType||"";gm.b=dm.some(function(om){return om.c;});for(var hm={},im=0;im<dm.length;++im)for(var jm=dm[im],km=0;km<jm.a.length;++km){var lm=jm.a[km],mm=mj(am,lm),nm=gm.a.slice(0);lj(mm,nm);0==nm.length&&0<gm.a.length||!(lm=oj(bm,cm,lm,em,fm))||(gm.m.push(lm),gm.a=nm,hm[lm.C]=jm);}if(gm.a.some(function(om){return ""==om.a;}))return gm.m.forEach(function(om){om.M=true;}),gm;am=kj(dm);for(im=0;im<gm.m.length;++im)lm=gm.m[im],jm=hm[lm.C],jm==am&&(lm.M=true);return gm;}function kj(am){for(var bm=null,cm=null,dm=0;dm<am.length;++dm)for(var em=am[dm],fm=0;fm<em.a.length;++fm){var gm=em.a[fm],gm=(gm.width||1)*(gm.height||1)*(gm.bandwidth||1);if(null==bm||gm<bm)bm=gm,cm=em;}return cm;}function lj(am,bm){if(0==bm.length){Array.prototype.push.apply(bm,am);}else for(var cm=0;cm<bm.length;++cm){for(var dm=false,em=0;em<am.length;++em){var fm=bm[cm],gm=am[em];if(fm.a==gm.a&&fm.h==gm.h&&fm.l==gm.l&&fm.g==gm.g&&fm.i==gm.i&&fm.f==gm.f&&fm.j==gm.j&&td(fm.c,gm.c)){dm=true;wd(bm[cm],am[em].b);break;}}dm||(bm.splice(cm,1),--cm);}}function mj(am,bm){var cm=[];if(0==bm.c.length){cm.push(new ud());}else if(am.a)for(var dm=0;dm<bm.c.length;++dm)cm.push.apply(cm,nj(am,bm.c[dm]));return cm;}function nj(am,bm){var cm=[];if(2!=am.a.length)return [];var dm=am.a(bm.c||"",bm.f);if(!(dm&&dm instanceof Array))return [];for(var em=0;em<dm.length;++em){var fm,gm=dm[em];fm=new ud();if(gm){var hm=hc(gm,"keySystem");if(null!=hm){fm.a=hm;}else throw Error("'keySystem' cannot be null.");var im=hc(gm,"licenseServerUrl");if(null!=im){fm.h=im;}else if(hm)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");hm=fc(gm,"withCredentials");null!=hm&&(fm.l=hm);hm=jc(gm,"licensePostProcessor",Function);null!=hm&&(fm.o=hm);hm=jc(gm,"licensePreProcessor",Function);null!=hm&&(fm.u=hm);hm=fc(gm,"distinctiveIdentifierRequired");null!=hm&&(fm.g=hm);hm=fc(gm,"persistentStateRequired");null!=hm&&(fm.i=hm);hm=hc(gm,"audioRobustness");null!=hm&&(fm.f=hm);hm=hc(gm,"videoRobustness");null!=hm&&(fm.j=hm);hm=jc(gm,"serverCertificate",Uint8Array);null!=hm&&(fm.c=hm);if(hm=jc(gm,"initData",Object)){gm=jc(hm,"initData",Uint8Array);if(null==gm)throw Error("'initData.initData' cannot be null.");hm=hc(hm,"initDataType");if(null==hm)throw Error("'initData.initDataType' cannot be null.");fm.b.push({initData:new Uint8Array(gm.buffer),initDataType:hm});}}0==fm.b.length&&bm.a&&bm.a.psshBox&&wd(fm,[{initData:bm.a.psshBox,initDataType:"cenc"}]);cm.push(fm);}return cm;}function oj(am,bm,cm,dm,em){if(!cm.s||0===cm.s.length)return null;var fm=null,gm=1,hm=0;if(cm.g){fm=cm.f.split("/")[1];if("mp4"!=fm&&"webm"!=fm){fm=null;}else{var im=cm.g;"webm"!=fm||im.c?im.a||im.b&&im.b.a?(gm=im.b,gm||(gm=new zf(),gm.url=cm.s,gm.a=im.a?im.a.clone():null),hm=qj(gm,em),gm=im.c?qj(im.c,em):null,im.f?(im=im.f,im=new gh(em,cm.s,im.ha,im.end)):im=null,am=new ej(am,bm,fm,hm,gm,im,dm,em),bm=new rh(gm),dm=new ki(),dm.I=am,dm.J=bm,fm=dm):fm=null:fm=null;}gm=cm.g.h;hm=cm.g.g;}else if(cm.b){fm=cm.b,!fm.c&&!fm.f&&1<fm.b.length?fm=null:fm.c||bm.a||fm.f||1!=fm.b.length?fm.f&&0===fm.f.a.length?fm=null:(fm=fm.h?qj(fm.h,em):null,am=new ii(am,bm,cm,dm,em),bm=new rh(fm),dm=new ki(),dm.I=am,dm.J=bm,fm=dm):fm=null,gm=cm.b.a,hm=cm.b.g;}else if(cm.a){am:if(fm=cm.a,gm=0+(fm.f?1:0),gm+=fm.c?1:0,gm+=fm.b?1:0,0==gm?gm=false:(1!=gm&&(fm.f?(fm.c=null,fm.b=null):fm.c&&(fm.b=null)),gm=true),gm){gm=null;if(fm.g&&(gm=(fm=cm.a.g)?pj(cm,fm,ag):null,!gm)){fm=null;break am;}fm=gm?qj(gm,em):null;gm=cm.a;gm.f?(gm=cm.f.split("/")[1],"mp4"!=gm&&"webm"!=gm?am=null:"webm"!=gm||fm?oh(em,cm,1,0)?(hm=(hm=cm.a.f)?pj(cm,hm,zf):null)?(hm=qj(hm,em),am=new ej(am,bm,gm,hm,fm,null,dm,em)):am=null:am=null:am=null):am=gm.h?gm.c?new ji(am,bm,cm,dm,em):gm.b?"dynamic"!=am.type&&null==bm.a?null:new hi(am,bm,cm,dm,em):null:null;am?(bm=new rh(fm),dm=new ki(),dm.I=am,dm.J=bm,fm=dm):fm=null;}else fm=null;;gm=cm.a.a;hm=cm.a.i;}else "text"==cm.f.split("/")[0]&&(fm=new ki(),fm.I=new bj(new gh(em,cm.s)));if(!fm)return null;fm.id=cm.id;hm&&(fm.b=-1*hm/gm);fm.bandwidth=cm.bandwidth;fm.width=cm.width;fm.height=cm.height;fm.a=cm.f||"";fm.c=cm.h||"";for(am=0;am<cm.c.length;++am)bm=cm.c[am],bm.b&&fm.f.push(bm.b);return fm;}function pj(am,bm,cm){bm=ph(bm,am.id,null,am.bandwidth,null);if(!bm)return null;cm=new cm();cm.url=ih(am.s,bm);return cm;}function qj(am,bm){var cm=am.url,dm=0,em=null;am.a&&(dm=am.a.ha,em=am.a.end);return new gh(bm,cm,dm,em);}function rj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function sj(am,bm){var cm=new tj(bm);am.streamHistory.push(new uj(cm));if(cm.videoHeight||!am.streamStats)am.streamStats=cm;}function tj(am){this.videoWidth=am.width;this.videoHeight=am.height;this.videoMimeType=am.a;this.videoBandwidth=am.bandwidth;}function uj(am){this.timestamp=eb()/1000;this.value=am;}function vj(am,bm,cm,dm,em){this.b=new gh(null,[new ye(am)]);this.a=new ah();this.a.body=bm;this.a.method=cm;this.a.a=3;this.a.i=dm;this.a.c=0;am=em||{};for(var fm in am)this.a.b[fm]=am[fm];}function wj(am){return jh(am.b,am.a).then(function(bm){return Promise.resolve(new Uint8Array(bm));});}function xj(am,bm,cm){sc.call(this,am);this.c=bm;this.j=cm;this.a=this.h=null;this.i=new oc();this.b=[];this.f=[];this.o=0;this.g=new xc();this.l=null;}m(xj,sc);xj.prototype.destroy=function(){this.G=null;for(var am=0;am<this.f.length;++am)this.f[am].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.c=this.j=null;};xj.prototype.initialize=function(){var am=new kc(),bm;bm=this.j;if(bm.D){bm=bm.a.a[0];for(var cm=[],dm=0;dm<bm.a.length;++dm)cm.push.apply(cm,pi(bm.a[dm]));bm=cm;}else bm=[];for(cm=0;cm<bm.length;++cm)dm=bm[cm],dm.a.a||dm.b&&!fk(dm.b)||am.push(dm.contentType,dm);for(var cm={},dm=false,em=0;em<bm.length;++em){var fm=bm[em];if(fm.a.a&&!am.a.hasOwnProperty(fm.contentType)){var gm=fm.a.a,hm=cm[gm];hm||(hm=fm.a,hm={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:hm.g?"required":"optional",persistentState:hm.i?"required":"optional",sessionTypes:["temporary"]},cm[gm]=hm);if(fm.b&&(gm=fm.contentType+"Capabilities",gm in hm)){dm=true;hm[gm]||(hm[gm]=[]);var im;"audio"==fm.contentType?im=fm.a.f:"video"==fm.contentType&&(im=fm.a.j);hm[gm].push({contentType:fm.b,robustness:im});}}}if(!dm)if(bm.length){this.a=bm[0].a;}else throw am=Error("No DrmInfo exists!"),am.type="drm",am;if(0==Object.keys(cm).length)return el(this.j,am),this.g.resolve(),Promise.resolve();im=new xc();cm=yj(cm,im);cm=cm.then(this.v.bind(this,bm,am));im.reject(null);return cm;};function yj(am,bm){for(var cm in am)bm=bm.catch(function(dm,em){return navigator.requestMediaKeySystemAccess(dm,[em]);}.bind(null,cm,am[cm]));return bm;}xj.prototype.v=function(am,bm,cm){if(!this.c)return ak();for(var dm=cm.keySystem,em=cm.getConfiguration(),fm=["audio","video"],gm=0;gm<fm.length;++gm){var hm=fm[gm];if(!bm.a.hasOwnProperty(hm)){var im=em[hm+"Capabilities"];if(im){for(var im=im[0],jm=[],km={},lm=0;lm<am.length;++lm){var mm=am[lm],nm=im?mm.b==im.contentType:mm.contentType==hm;mm.a.a!=dm||!nm||mm.id in km||(jm.push(mm),km[mm.id]=true,this.a=this.a?vd(this.a,mm.a):mm.a);}bm.set(hm,jm);}}}el(this.j,bm);return cm.createMediaKeys().then(function(om){this.h=om;}.bind(this));};function zj(am){return am.c?am.h?am.c.setMediaKeys(am.h).then(dd(am,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():ak();})).then(dd(am,function(){if(!this.c)return ak();for(var bm=0;bm<this.a.b.length;++bm){var cm=this.a.b[bm];this.u({type:"encrypted",initDataType:cm.initDataType,initData:cm.initData});}0==this.a.b.length&&pc(this.i,this.c,"encrypted",this.u.bind(this));})):Promise.resolve():ak();}function ak(){var am=Error("EmeManager destroyed");am.type="destroy";return Promise.reject(am);}xj.prototype.u=function(am){for(var bm=new Uint8Array(am.initData),cm=0;cm<this.b.length;++cm)if(td(bm,this.b[cm].data))return;try{var em=bk(this);}catch(dm){bm=yb(dm);this.dispatchEvent(bm);this.g.reject(dm);return;}am=em.generateRequest(am.initDataType,am.initData);this.b.push({data:bm,Ga:em});am.catch(dd(this,function(fm){if(this.c){for(var gm=0;gm<this.b.length;++gm)if(this.b[gm].Ga==em){this.b.splice(gm,1);break;}gm=yb(fm);this.dispatchEvent(gm);this.g.reject(fm);}}));this.f.push(em);};function bk(am){var bm=null,bm=am.h.createSession();pc(am.i,bm,"message",am.B.bind(am));pc(am.i,bm,"keystatuseschange",am.A.bind(am));return bm;}xj.prototype.B=function(am){ck(this,am.target,this.a,am.message);};xj.prototype.A=function(am){am=am.target;var bm={};am.keyStatuses.forEach(function(dm,em){if("string"==typeof dm){var fm=dm;dm=em;em=fm;}if("com.microsoft.playready"==this.a.a&&16==dm.byteLength){var fm=new DataView(dm),gm=fm.getUint32(0,true),hm=fm.getUint16(4,true),im=fm.getUint16(6,true);fm.setUint32(0,gm,false);fm.setUint16(4,hm,false);fm.setUint16(6,im,false);}fm=sd(new Uint8Array(dm));bm[fm]=em;}.bind(this));if(am.expiration<Date.now()){for(var cm=0;cm<this.b.length;++cm)if(this.b[cm].Ga==am){this.b.splice(cm,1);break;}am.close();this.f.splice(this.f.indexOf(am),1);}hl(this.j,bm);};function ck(am,bm,cm,dm){dm=dk(cm,dm);wj(new vj(dm.url,dm.body,dm.method,cm.l,dm.headers)).then(dd(am,function(em){cm.o&&(em=cm.o(em));return bm.update(em);})).then(dd(am,function(){var em=xb({type:"sessionReady",detail:bm});this.dispatchEvent(em);this.o++;this.o>=this.f.length&&this.g.resolve();})).catch(dd(am,function(em){em.Ga=bm;em=yb(em);this.dispatchEvent(em);}));}function dk(am,bm){var cm={url:am.h,body:bm.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===am.a){for(var dm=String.fromCharCode.apply(null,new Uint16Array(cm.body)),dm=(new DOMParser()).parseFromString(dm,"application/xml"),em=dm.getElementsByTagName("name"),fm=dm.getElementsByTagName("value"),gm=0;gm<em.length;gm++)cm.headers[em[gm].childNodes[0].nodeValue]=fm[gm].childNodes[0].nodeValue;cm.body=i.atob(dm.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!am.u)return cm;am.u(cm);cm.url=hc(cm,"url");if(null==cm.url)throw Error("'url' cannot be null.");if(!(cm.body instanceof ArrayBuffer||"string"==typeof cm.body||null==cm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");cm.method=hc(cm,"method");if("GET"!=cm.method&&"POST"!=cm.method)throw Error("'method' must be either 'GET' or 'POST'.");cm.headers=jc(cm,"headers",Object);if(null==cm.headers)throw Error("'headers' cannot be null.");return cm;}function ek(am){sc.call(this,null);this.a=am;this.b=null;this.f=new oc();this.i=this.h=null;this.A=0;this.u=null;this.j=false;this.D=true;this.g=new rj();this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new v()};this.l=1;this.B=null;}m(ek,sc);l("shaka.player.Player",ek);ek.version="v1.6.4-fb";ek.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};ek.prototype.U=function(am){this.D=am;};ek.prototype.setResumeAfterBuffering=ek.prototype.U;function fk(am){return "text/vtt"==am?!!i.VTTCue:MediaSource.isTypeSupported(am);}ek.isTypeSupported=fk;ek.setTextStyle=function(am){var bm=document.getElementById("ShakaPlayerTextStyle");bm||(bm=document.createElement("style"),bm.id="ShakaPlayerTextStyle",document.head.appendChild(bm));for(bm=bm.sheet;bm.cssRules.length;)bm.deleteRule(0);bm.insertRule("::cue { "+x(am)+" }",0);};ek.prototype.destroy=function(){return this.o().then(dd(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};ek.prototype.destroy=ek.prototype.destroy;ek.prototype.o=function(){if(!this.b)return Promise.resolve();this.j&&kk(this);this.a.pause();qc(this.f);jk(this);hk(this);this.h&&(this.h.destroy(),this.h=null);this.a.src="";var am=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.j=false;this.g=new rj();return am;};ek.prototype.unload=ek.prototype.o;ek.prototype.da=function(am){yk(am,this.a);var bm=this.o();this.a.autoplay&&(p("load"),pc(this.f,this.a,"timeupdate",this.pb.bind(this)));am.Ua(this.c);am.U=this.B;this.B=null;bm=bm.then(dd(this,function(){return am.Ia();}));bm.catch(dd(this,function(cm){am.destroy();return Promise.reject(cm);}));return bm.then(dd(this,function(){if(!this.a)return gk();this.b=am;pc(this.f,this.b,"seekrangechanged",this.wb.bind(this));this.h=new xj(this,this.a,this.b);return this.h.initialize();})).then(dd(this,function(){if(!this.a)return gk();pc(this.f,this.a,"error",this.Hb.bind(this));pc(this.f,this.a,"playing",this.vb.bind(this));pc(this.f,this.a,"pause",this.ub.bind(this));return zk(this.b,this,this.a);})).then(dd(this,function(){return this.a?zj(this.h):gk();})).then(dd(this,function(){if(!this.a)return gk();ik(this);})).catch(dd(this,function(cm){if(!this.a)return gk();if("destroy"!=cm.type){var dm=yb(cm);this.dispatchEvent(dm);}return this.o().then(function(){return Promise.reject(cm);});}));};ek.prototype.load=ek.prototype.da;function gk(){var am=Error("Player destroyed");am.type="destroy";return Promise.reject(am);}j=ek.prototype;j.pb=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.pa(this.a,"timeupdate");};j.Hb=function(){if(this.a.error){var am=this.a.error.code;am!=MediaError.MEDIA_ERR_ABORTED&&(am=Error(lk[am]||"Unknown playback error."),am.type="playback",am=yb(am),this.dispatchEvent(am));}};j.vb=function(){p("playing");!this.i&&0>this.l&&(this.a.playbackRate=0,this.v(this.a.currentTime,Date.now(),this.l));this.j&&kk(this);};j.ub=function(){q("playing");var am=r("playing");if(!isNaN(am)){var bm=this.g;bm.playTime+=am/1000;}hk(this);};j.wb=function(am){this.A=am.start;};j.gb=function(){if(!this.a.paused){q("playing");var am=r("playing");if(!isNaN(am)){var bm=this.g;bm.playTime+=am/1000;p("playing");}}am=this.g;bm=this.a;bm.getVideoPlaybackQuality&&(bm=bm.getVideoPlaybackQuality(),am.decodedFrames=bm.totalVideoFrames,am.droppedFrames=bm.droppedVideoFrames);return this.g;};ek.prototype.getStats=ek.prototype.gb;ek.prototype.ca=function(){return this.b?this.b.na():[];};ek.prototype.getVideoTracks=ek.prototype.ca;ek.prototype.$=function(){return this.b?this.b.ca():[];};ek.prototype.getAudioTracks=ek.prototype.$;ek.prototype.ba=function(){return this.b?this.b.Va():[];};ek.prototype.getTextTracks=ek.prototype.ba;ek.prototype.selectVideoTrack=function(am,bm){return this.b?this.b.selectVideoTrack(am,void 0==bm?true:bm):false;};ek.prototype.selectVideoTrack=ek.prototype.selectVideoTrack;ek.prototype.ea=function(am,bm,cm){return this.b?jl(this.b,"audio",am,void 0==bm?true:bm,cm):false;};ek.prototype.selectAudioTrack=ek.prototype.ea;ek.prototype.fa=function(am){return this.b?jl(this.b,"text",am,false):false;};ek.prototype.selectTextTrack=ek.prototype.fa;ek.prototype.Z=function(am){this.b&&fl(this.b,am);};ek.prototype.enableTextTrack=ek.prototype.Z;ek.prototype.T=function(am){hk(this);0<=am?this.a.playbackRate=am:this.a.paused||(this.a.playbackRate=0,this.v(this.a.currentTime,Date.now(),am));this.l=am;};ek.prototype.setPlaybackRate=ek.prototype.T;ek.prototype.K=function(){return this.l;};ek.prototype.getPlaybackRate=ek.prototype.K;ek.prototype.ga=function(am){this.B=am;};ek.prototype.setPlaybackStartTime=ek.prototype.ga;ek.prototype.F=function(){return this.b?this.b.Xa():false;};ek.prototype.isLive=ek.prototype.F;ek.prototype.Y=function(am){if(am){var bm=fc(am,"enableAdaptation");null!=bm&&(this.c.enableAdaptation=bm);bm=gc(am,"streamBufferSize");null!=bm&&(this.c.streamBufferSize=bm);bm=gc(am,"liveStreamEndTimeout");null!=bm&&(this.c.liveStreamEndTimeout=bm);bm=gc(am,"licenseRequestTimeout");null!=bm&&(this.c.licenseRequestTimeout=bm);bm=gc(am,"mpdRequestTimeout");null!=bm&&(this.c.mpdRequestTimeout=bm);bm=gc(am,"minMpdRefreshInterval");null!=bm&&(this.c.minMpdRefreshInterval=bm);bm=fc(am,"enableLiveInterruptionDetection");null!=bm&&(this.c.enableLiveInterruptionDetection=bm);bm=gc(am,"segmentRequestTimeout");null!=bm&&(this.c.segmentRequestTimeout=bm);bm=hc(am,"preferredLanguage");null!=bm&&(this.c.preferredLanguage=bm);bm=jc(am,"restrictions",v);null!=bm&&(this.c.restrictions=bm.clone());am=fc(am,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=am&&(bh=!am);this.b&&this.b.Ua(this.c);}};ek.prototype.configure=ek.prototype.Y;ek.prototype.aa=function(){return this.c;};ek.prototype.getConfiguration=ek.prototype.aa;function hk(am){am.i&&(i.clearTimeout(am.i),am.i=null);}function ik(am){jk(am);am.u=i.setTimeout(am.L.bind(am),100);}function jk(am){am.u&&(i.clearTimeout(am.u),am.u=null);}ek.prototype.v=function(am,bm,cm){this.i=null;var dm=(Date.now()-bm)/1000*cm;this.a.currentTime<this.A+(this.F()?1:.05)?this.a.pause():(dm=Math.max(this.A,am+dm),this.a.currentTime=dm,this.i=i.setTimeout(this.v.bind(this,am,bm,cm),250));};function kk(am){q("buffering");var bm=am.g;bm.bufferingTime+=r("buffering")/1000;am.j=false;am.dispatchEvent(xb({type:"bufferingEnd"}));}ek.prototype.L=function(){ik(this);if(!this.a.ended&&!this.a.seeking){var am=this.a.buffered,bm=am.length?am.end(am.length-1):0,am=Math.max(bm-this.a.currentTime,0),cm=this.a.duration,dm=this.a.currentTime;if(this.j){if(bm=Number(this.b.A.initialStreamBufferSize),cm=Math.max(cm-dm-.05,0),em||am>bm||am>cm)kk(this),this.D&&this.a.play();}else{var cm=isNaN(cm)?0:Math.max(cm-.05,0),em;!(this.a.paused||bm>=cm||dm>=cm)&&.5>am&&(this.j=true,this.a.pause(),this.g.bufferingHistory.push(eb()/1000),p("buffering"),this.dispatchEvent(xb({type:"bufferingStart"})));}}};var lk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function mk(am){for(var bm=0;bm<am.length;++bm)for(var cm=am[bm],dm=0;dm<cm.a.length;++dm){for(var em=cm.a[dm],fm=em,gm=0;gm<fm.m.length;++gm)fk(mi(fm.m[gm]))||(fm.m.splice(gm,1),--gm);0==em.m.length&&(cm.a.splice(dm,1),--dm);}}function nk(am){for(var bm=0;bm<am.length;++bm)for(var cm=am[bm],dm=0;dm<cm.a.length;++dm)cm.a[dm].m.sort(ok);}function ok(am,bm){var cm=am.bandwidth||Number.MAX_VALUE,dm=bm.bandwidth||Number.MAX_VALUE;return cm<dm?-1:cm>dm?1:0;}function pk(am){this.a=am;}pk.prototype.destroy=function(){this.a.destroy();this.a=null;};pk.prototype.update=function(am){var bm=qk(am),cm=qk(this.a);return Promise.all([bm,cm]).then(dd(this,function(dm){var em=dm[0];dm=dm[1];var fm=this.a.a;mk(fm);nk(fm);am.b&&!this.a.b&&(am.h=true);am.f=this.a.f;am.g=this.a.g?this.a.g.clone():null;am.c=this.a.c;fm=[];rk(am,this.a,em,dm,fm);em=am.a;mk(em);nk(em);return Promise.resolve(fm);}));};function qk(am){function bm(dm,em){return dm.concat(em);}var cm=am.a.map(function(dm){return dm.a;}).reduce(bm,[]).map(function(dm){return dm.m;}).reduce(bm,[]);am=cm.map(function(dm){return dm.I.create();});return Promise.all(am).then(function(dm){for(var em={},fm=0;fm<cm.length;++fm)em[cm[fm].C]=dm[fm];return Promise.resolve(em);});}function rk(am,bm,cm,dm,em){var fm=new kc();am.a.forEach(function(jm,km){fm.push(jm.id||""+km,jm);});var gm=new kc();bm.a.forEach(function(jm,km){gm.push(jm.id||""+km,jm);});am=nc(fm);for(bm=0;bm<am.length;++bm){var hm=am[bm],im=fm.get(hm);1<im.length||(hm=gm.get(hm))&&0!=hm.length&&1==hm.length&&(sk(im[0],hm[0],cm,dm,em),im[0].b=hm[0].b);}}function sk(am,bm,cm,dm,em){var fm=new kc();am.a.forEach(function(jm,km){fm.push(jm.id||""+km,jm);});var gm=new kc();bm.a.forEach(function(jm,km){gm.push(jm.id||""+km,jm);});am=nc(fm);for(bm=0;bm<am.length;++bm){var hm=am[bm],im=fm.get(hm);1<im.length||(hm=gm.get(hm))&&0!=hm.length&&1==hm.length&&tk(im[0],hm[0],cm,dm,em);}}function tk(am,bm,cm,dm,em){var fm=new kc();am.m.forEach(function(lm,mm){fm.push(lm.id||""+mm,lm);});var gm=new kc();bm.m.forEach(function(lm,mm){gm.push(lm.id||""+mm,lm);});bm={};for(var hm=nc(fm),im=0;im<hm.length;++im){var jm=hm[im];bm[jm]=jm;var km=fm.get(jm);1<km.length||((jm=gm.get(jm))&&0!=jm.length?1==jm.length&&(uk(km[0],jm[0],cm,dm),km[0].J=jm[0].J,jm[0].J=null,km[0].b=jm[0].b):(em.push(km[0]),am.m.splice(am.m.indexOf(km[0]),1)));}hm=nc(gm);for(im=0;im<hm.length;++im)jm=hm[im],bm[jm]||(bm[jm]=jm,jm=gm.get(jm),am.m.push(jm[0]));}function uk(am,bm,cm,dm){am=cm[am.C];dm=dm[bm.C];bm=am.length();am.Ea(dm)&&(dm=am.length(),bm!==dm?(am.v=0,am.u++):(am.v++,am.u=0));}function vk(){this.a=this.b=null;this.f=new oc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",vk);vk.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};vk.prototype.initialize=function(am,bm){this.b||this.a||(this.b=am,this.a=bm);};vk.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,pc(this.f,this.b,"bandwidth",this.l.bind(this)),pc(this.f,this.a,"adaptation",this.j.bind(this)),pc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};vk.prototype.enable=function(am){this.i=am;};vk.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var am=wk(this);return am?am.id:null;};vk.prototype.getInitialAudioTrackId=function(){return null;};vk.prototype.selectVideoTrack=function(am,bm,cm){this.g&&this.a.selectVideoTrack(am.id,bm,cm);};vk.prototype.l=function(){Date.now()<this.c||this.h();};vk.prototype.h=function(){if(this.i){var am=wk(this);if(am){if(am.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(am,false);}this.c=Number.POSITIVE_INFINITY;}};vk.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function wk(am){var bm=am.a.na();if(0==bm.length)return null;bm.sort(fa);var cm;am:{cm=am.a.ca();for(var dm=0;dm<cm.length;++dm)if(cm[dm].active){cm=cm[dm];break am;}cm=null;};cm=cm?cm.bandwidth:0;am=am.b.getBandwidth();for(var dm=bm[0],em=0;em<bm.length;++em){var fm=bm[em],gm=em+1<bm.length?bm[em+1]:{bandwidth:Number.POSITIVE_INFINITY};if(fm.bandwidth&&(gm=(gm.bandwidth+cm)/.85,am>=(fm.bandwidth+cm)/.95&&am<=gm&&(dm=fm,dm.active)))break;}return dm;}function xk(am,bm,cm){sc.call(this,null);this.a=am;this.ea=bm;this.i=new oc();this.g=new MediaSource();this.b=null;this.wa=this.xa=0;this.va=3;this.La=false;this.c=new kc();this.o=cm;this.o.initialize(bm,this);this.D=false;this.B="en";this.ga=false;this.K=null;this.u=new xc();this.Ya=new xc();this.h=new v();this.v=null;this.$=1;this.f={};this.aa=new xc();this.Y=0;this.Qa=15;this.l=null;this.Ma=this.Pa=false;this.j={};this.U=this.T=this.L=null;this.A={};this.fa=this.da=false;}m(xk,sc);l("shaka.player.StreamVideoSource",xk);xk.prototype.Ua=function(am){null!=am.streamBufferSize&&(this.A.streamBufferSize=am.streamBufferSize);null!=am.segmentRequestTimeout&&(this.A.segmentRequestTimeout=am.segmentRequestTimeout);yl(this);null!=am.enableAdaptation&&this.o.enable(Boolean(am.enableAdaptation));null!=am.mpdRequestTimeout&&(this.wa=Number(am.mpdRequestTimeout));null!=am.minMpdRefreshInterval&&(this.va=Number(am.minMpdRefreshInterval)/1000);null!=am.enableLiveInterruptionDetection&&(this.La=!!am.enableLiveInterruptionDetection);null!=am.liveStreamEndTimeout&&(this.Qa=Number(am.liveStreamEndTimeout));null!=am.preferredLanguage&&(this.B=cc(String(am.preferredLanguage)));null!=am.restrictions&&(this.h=am.restrictions,this.D&&gl(this));};xk.prototype.destroy=function(){ul(this);this.u.destroy();this.aa.destroy();this.aa=this.u=null;this.T&&(i.clearTimeout(this.T),this.T=null);this.L&&(i.clearTimeout(this.L),this.L=null);this.j=null;this.i.destroy();this.i=null;ec(this.f).forEach(function(am){am.destroy();});this.c=this.f=null;this.a&&(this.a.destroy(),this.a=null);this.o.destroy();this.G=this.h=this.K=this.b=this.g=this.ea=this.o=null;};function yk(am,bm){pc(am.i,am.g,"sourceopen",am.qb.bind(am));bm.src=i.URL.createObjectURL(am.g);}function zk(am,bm,cm){if(!am.D)return am=Error("Cannot call attach() right now."),am.type="app",Promise.reject(am);am.G=bm;am.b=cm;am.K=bm.gb();pc(am.i,am.ea,"bandwidth",am.Ib.bind(am));am.a.b&&(pc(am.i,bm,"bufferingStart",am.ob.bind(am)),pc(am.i,bm,"bufferingEnd",am.nb.bind(am)));bm=am.b.setMediaKeys(am.b.mediaKeys);am.Ya.then(dd(am,function(){ll(this).then(dd(this,function(){this.u&&this.u.resolve();})).catch(dd(this,function(dm){this.u&&this.u.reject(dm);}));}));return Promise.all([am.u,bm]);}j=xk.prototype;j.Ia=function(){if(this.D){var am=Error("Cannot call load() right now.");am.type="app";return Promise.reject(am);}if(!this.a||0==this.a.a.length)return am=Error("The manifest does not specify any content."),am.type="stream",Promise.reject(am);am=this.a.a;mk(am);nk(am);if(0==this.a.a.length||0==this.a.a[0].a.length)return am=Error("The manifest specifies content that cannot be displayed on this browser/platform."),am.type="stream",Promise.reject(am);this.D=true;this.A.initialStreamBufferSize=this.a.c;yl(this);gl(this);return Promise.resolve();};function al(am){return 3<=am.v;}function bl(am){return 3<=am.u;}j.bb=function(am){var bm=Date.now(),cm=this.L=null,dm=this.a.g;(am?this.$a():this.ab(dm)).then(dd(this,function(em){cm=new pk(em);return cm.update(this.a);})).then(dd(this,function(em){cm.destroy();cm=null;if(this.La)if(this.fa){(vl(this).every(bl)||this.a.h)&&ul(this);}else if(this.da&&vl(this).some(al)){this.fa=true;this.$=this.b.playbackRate;this.b.playbackRate=0;var fm=xb({type:"streaminterrupted",bubbles:true});this.dispatchEvent(fm);}(fm=wl(this,vl(this)))&&this.b.paused&&fm.end>this.b.currentTime+10&&(this.b.currentTime=fm.end);if(this.a.h&&this.b.currentTime+.5>this.Y)return this.qa();for(fm=0;fm<em.length;++fm)dl(this,em[fm]);this.A.initialStreamBufferSize=this.a.c;yl(this);gl(this);0==Object.keys(this.f).length?ll(this):cl(this,(Date.now()-bm)/1000);})).catch(dd(this,function(em){cm&&(cm.destroy(),cm=null);"aborted"!=em.type&&(em=yb(em),this.dispatchEvent(em),this.a&&cl(this,0));}));};j.ab=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};j.$a=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};function cl(am,bm){if(null!=am.a.f){var cm=Math.max(am.a.f,am.va),cm=Math.max(cm-bm,0);am.L=i.setTimeout(am.bb.bind(am,false),1000*cm);}}function dl(am,bm){var cm=bm.a.split("/")[0],dm=am.f[cm];if(dm&&dm.ma()==bm){var em=am.c.get(bm.a.split("/")[0]).map(function(fm){return fm.m;}).reduce(function(fm,gm){return fm.concat(gm);},[]).filter(function(fm){return fm.M&&fm.H;});if(0==em.length){cm=Error("All usable streams have been removed from the manifest.");cm.type="app";cm=yb(cm);am.dispatchEvent(cm);return;}am.j[cm].Ja==bm&&delete am.j[cm];dm.oa(em[0],true);bm.destroy();}bm.destroy();}j.na=function(){if(!this.c.a.hasOwnProperty("video"))return [];for(var am=this.f.video,am=(am=am?am.ma():null)?am.C:0,bm=[],cm=this.c.get("video"),dm=0;dm<cm.length;++dm)for(var em=cm[dm],fm=0;fm<em.m.length;++fm){var gm=em.m[fm];if(gm.M&&gm.H){var hm=gm.C,gm=new ea(hm,gm.bandwidth,gm.width,gm.height,gm.id);hm==am&&(gm.active=true);bm.push(gm);}}return bm;};xk.prototype.getVideoTracks=xk.prototype.na;xk.prototype.ca=function(){if(!this.c.a.hasOwnProperty("audio"))return [];for(var am=this.f.audio,am=(am=am?am.ma():null)?am.C:0,bm=[],cm=this.c.get("audio"),dm=0;dm<cm.length;++dm)for(var em=cm[dm],fm=em.lang,gm=0;gm<em.m.length;++gm){var hm=em.m[gm];if(hm.M&&hm.H){var im=hm.C,hm=new u(im,hm.bandwidth,fm,hm.id);im==am&&(hm.active=true);bm.push(hm);}}return bm;};xk.prototype.getAudioTracks=xk.prototype.ca;xk.prototype.Va=function(){if(!this.c.a.hasOwnProperty("text"))return [];for(var am=this.f.text,bm=am?am.ma():null,bm=bm?bm.C:0,cm=[],dm=this.c.get("text"),em=0;em<dm.length;++em)for(var fm=dm[em],gm=fm.lang,hm=0;hm<fm.m.length;++hm){var im=fm.m[hm].C,jm=new da(im,gm);im==bm&&(jm.active=true,jm.enabled=am.za());cm.push(jm);}return cm;};xk.prototype.getTextTracks=xk.prototype.Va;function el(am,bm){if(am.D){for(var cm={},dm=am.a.a[0],em=0;em<dm.a.length;++em){var fm=dm.a[em];cm[fm.C]=fm;}am.c.a={};dm=nc(bm);for(em=0;em<dm.length;++em){var fm=dm[em],gm=bm.get(fm);if("video"==fm){var hm=gm[0].id;am.c.push(fm,cm[hm]);}else if("audio"==fm){for(var hm=gm[0].b.split(";")[0],im=0;im<gm.length;++im){var jm=gm[im];jm.b.split(";")[0]==hm&&am.c.push(fm,cm[jm.id]);}}else for(im=0;im<gm.length;++im)hm=gm[im].id,am.c.push(fm,cm[hm]);}am.ga=true;if(cm=am.c.get("audio"))kl(am,cm),am.c.set("audio",cm),cm=cm[0].lang||am.B,zb(2,am.B,cm)&&(am.ga=false);if(cm=am.c.get("text"))kl(am,cm),am.c.set("text",cm),cm=cm[0].lang||am.B,zb(2,am.B,cm)||(am.ga=false);}}xk.prototype.selectVideoTrack=function(am,bm,cm){return jl(this,"video",am,bm,cm);};function fl(am,bm){var cm=am.f.text;cm&&cm.ra(bm);}function gl(am){if(am.h){for(var bm=false,cm=0;cm<am.a.a.length;++cm)for(var dm=am.a.a[cm],em=0;em<dm.a.length;++em){var fm=dm.a[em];if("video"==fm.contentType)for(var gm=0;gm<fm.m.length;++gm){var hm=fm.m[gm],im=hm.H;hm.H=true;am.h.maxWidth&&hm.width>am.h.maxWidth&&(hm.H=false);am.h.maxHeight&&hm.height>am.h.maxHeight&&(hm.H=false);am.h.minHeight&&hm.height<am.h.minHeight&&(hm.H=false);am.h.maxBandwidth&&hm.bandwidth>am.h.maxBandwidth&&(hm.H=false);am.h.minBandwidth&&hm.bandwidth<am.h.minBandwidth&&(hm.H=false);im!=hm.H&&(bm=true);}}0!=lc(am.c).length&&bm&&(il(am),0<am.na().length||(bm=Error("The application has restricted all video tracks!"),bm.type="app",bm=yb(bm),am.dispatchEvent(bm)));}}xk.prototype.Xa=function(){return this.a?this.a.b:false;};xk.prototype.isLive=xk.prototype.Xa;function hl(am,bm){for(var cm,dm=false,em=new kc(),fm=lc(am.c),gm=0;gm<fm.length;++gm)for(var hm=fm[gm],im=0;im<hm.m.length;++im){var jm=hm.m[im];jm.f.forEach(function(km){em.push(km,jm);});}for(cm in bm)if(fm=ub[bm[cm]]||null,hm=em.get(cm)){for(gm=0;gm<hm.length;++gm)jm=hm[gm],im=jm.M,jm.M=!fm,im!=jm.M&&(dm=true);}else yc(cm);dm&&(il(am),dm=am.ca(),cm=am.na(),dm=am.c.a.hasOwnProperty("audio")&&0==dm.length,cm=am.c.a.hasOwnProperty("video")&&0==cm.length,dm||cm)&&(cm=Error("The key system has restricted all "+(dm&&cm?"audio and video tracks.":dm?"audio tracks.":"video tracks.")),cm.type="drm",cm=yb(cm),am.dispatchEvent(cm));}function il(am){var bm=xb({type:"trackschanged",bubbles:true});am.dispatchEvent(bm);}function jl(am,bm,cm,dm,em){if(!am.c.a.hasOwnProperty(bm)||!am.f[bm])return false;for(var fm=am.c.get(bm),gm=0;gm<fm.length;++gm)for(var hm=fm[gm],im=0;im<hm.m.length;++im){var jm=hm.m[im];if(jm.C==cm){if(!jm.M||!jm.H)return false;if("text"!=bm&&!am.Ma)return cm=am.j[bm],am.j[bm]={Ja:jm,Sa:null!=cm&&cm.Sa||dm,Ta:null!=cm&&cm.Ta||em},true;sj(am.K,jm);am.f[bm].oa(jm,dm,em);return true;}}return false;}function kl(am,bm){for(var cm=0;2>=cm;++cm)for(var dm=0;dm<bm.length;++dm){var em=bm[dm];if(zb(cm,am.B,em.lang)){bm.splice(dm,1);bm.splice(0,0,em);return;}}for(dm=0;dm<bm.length;++dm)if(em=bm[dm],em.b){bm.splice(dm,1);bm.splice(0,0,em);break;}}j=xk.prototype;j.qb=function(){this.i.pa(this.g,"sourceopen");this.Ya.resolve();};function ll(am){for(var bm=[],cm=["audio","video","text"],dm=0;dm<cm.length;++dm){var em=cm[dm];am.c.a.hasOwnProperty(em)&&bm.push(am.c.get(em)[0]);}for(var fm=ml(am,bm),dm=0;dm<cm.length;++dm)if(em=cm[dm],am.c.a.hasOwnProperty(em)&&!fm[em])return am=Error("Unable to select an initial "+em+" stream: all "+em+" streams have been restricted (by the application or by the key system)."),am.type="stream",Promise.reject(am);bm=ec(fm).map(function(gm){return gm.I.create();});return Promise.all(bm).then(dd(am,function(gm){if(!gm.every(function(hm){return hm.length();}))return gm=Error("Some streams are not available."),gm.type="stream",Promise.reject(gm);gm=wl(this,gm);if(!gm)return gm=Error("Some streams are not available."),gm.type="stream",Promise.reject(gm);if(!nl(this,fm))return gm=Error("Failed to create Stream objects."),gm.type="stream",Promise.reject(gm);this.o.start();pl(this,fm,gm);return Promise.resolve();})).catch(dd(am,function(gm){if("aborted"!=gm.type)return Object.keys(this.f),this.a.b?(eb()<this.a.i?(gm=Math.max(this.a.i-Date.now()/1000,this.va),this.L=i.setTimeout(this.bb.bind(this,true),1000*gm)):cl(this,0),Promise.resolve()):Promise.reject(gm);}));}function ml(am,bm){for(var cm={},dm=0;dm<bm.length;++dm){var em=bm[dm],fm=null;if("video"==em.contentType){var gm=am.o.getInitialVideoTrackId();if(null==gm)continue;fm=em.m.filter(function(hm){return hm.C==gm;});if(0==fm.length)continue;fm=fm[0];}else if("audio"==em.contentType){if(gm=am.o.getInitialAudioTrackId(),fm=em.m.filter(function(hm){return hm.C==gm;}),0==fm.length){fm=em.m.filter(function(hm){return hm.M&&hm.H;});if(0==fm.length)continue;fm=em.m[Math.floor(fm.length/2)];}else fm=fm[0];}else 0<em.m.length&&(fm=em.m[0]);cm[em.contentType]=fm;}return cm;}function nl(am,bm){var cm={},dm;for(dm in bm){var em=bm[dm],em="text"==dm?new cj(am,am.b):ol(am,em);if(!em)return ec(cm).forEach(function(fm){fm.destroy();}),false;cm[dm]=em;}am.f=cm;return true;}function ol(am,bm){var cm=new ti(am,am.b,am.g,mi(bm),am.ea);cm.B(am.A);return cm;}function pl(am,bm,cm){am.$=am.b.playbackRate;am.b.playbackRate=0;rl(am,cm);var dm;am.U&&am.U<=cm.end&&am.U>=cm.start?dm=am.U:am.a.b?(dm=cm.end,am.Pa=true):dm=cm.start;pc(am.i,am.b,"seeking",am.xb.bind(am));am.b.currentTime!=dm&&(am.b.currentTime=dm,am.v=dm);sl(am,cm.start,cm.end);var em=[],fm;for(fm in am.f)cm=am.f[fm],dd(am,function(gm){em.push(gm.hb(this.aa).then(dd(this,function(hm){var im=gm.Aa();im>this.xa&&(this.xa=im);return hm;})));})(cm),pc(am.i,cm,"ended",am.yb.bind(am)),dm=bm[fm],sj(am.K,dm),cm.oa(dm,false);Promise.all(em).then(am.mb.bind(am)).catch(dd(am,function(gm){"destroy"!=gm.type&&(gm=yb(gm),this.dispatchEvent(gm));}));fl(am,am.ga);}j.mb=function(am){n(am&&am.length==Object.keys(this.f).length);for(var bm=Number.POSITIVE_INFINITY,cm=Number.NEGATIVE_INFINITY,dm=0;dm<am.length;++dm)var em=am[dm],bm=Math.min(bm,em),cm=Math.max(cm,em);am=vl(this);for(dm=0;dm<am.length;++dm)am[dm].ka(cm);ql(this,am,cm);dm=lc(this.c).map(function(fm){return fm.m;}).reduce(function(fm,gm){return fm.concat(gm);},[]).map(function(fm){var gm=[fm.I.create()];fm.J&&gm.push(fm.J.create());return Promise.all(gm);});Promise.all(dm).then(dd(this,function(fm){for(var gm=0;gm<fm.length;++gm)fm[gm][0].ka(cm);this.Ma=true;for(var hm in this.j)fm=this.j[hm],gm=this.f[hm],sj(this.K,fm.Ja),gm.oa(fm.Ja,fm.Sa,fm.Ta);this.j={};})).catch(dd(this,function(fm){"aborted"!=fm.type&&(fm=yb(fm),this.dispatchEvent(fm));}));};function ql(am,bm,cm){if(bm=wl(am,bm))rl(am,bm),sl(am,bm.start,bm.end);0!=cm&&(cm=am.b.currentTime+cm,am.b.currentTime=cm,am.v=cm);am.Pa&&bm&&(am.b.currentTime=bm.end);am.b.playbackRate=am.$;am.a.b&&null!=am.a.f&&cl(am,0);xl(am);am.aa.resolve();}function rl(am,bm){if(am.a.b){isNaN(am.g.duration)&&(am.g.duration=bm.end+2592000);}else if(isNaN(am.g.duration)||bm.end>am.g.duration){am.g.duration=bm.end;for(var cm=0;cm<am.g.sourceBuffers.length;++cm)am.g.sourceBuffers[cm].appendWindowEnd=bm.end;}}j.zb=function(){this.T=null;xl(this);var am=wl(this,vl(this));am&&(this.a.b&&this.Y!=am.w&&(this.Y=am.w,null!=this.l&&(i.clearTimeout(this.l),this.l=null)),sl(this,am.start,am.end),this.b.paused||tl(this,this.b.currentTime,am.start,am.end));};function sl(am,bm,cm){bm=xb({type:"seekrangechanged",bubbles:true,start:bm,end:cm});am.dispatchEvent(bm);}j.xb=function(){var am=this.b.currentTime;if(null!=this.v){if(am>=this.v-.01&&am<=this.v+.01){this.v=null;return;}this.v=null;}var bm=wl(this,vl(this));if(bm){var cm=bm.end;(bm=tl(this,am,bm.start,cm))||(am<=cm+.01?bm=false:(this.b.currentTime=cm,bm=true));if(!bm)for(var dm in this.f)this.f[dm].eb();}};function tl(am,bm,cm,dm){if(bm>=cm-.01)return false;bm=0;if(am.a.b){bm=.5;for(var em in am.f)if(!am.f[em].fb(cm+bm)){bm=am.a.c;break;}}am.b.currentTime=Math.min(cm+bm,dm);return true;}j.yb=function(){if(!this.a.b){for(var am in this.f)if(!this.f[am].Da())return;this.qa();}};j.ob=function(){this.da=true;if(this.a.h&&this.b.currentTime+.5>this.Y)return this.qa();ec(this.f).every(function(am){return am.Da();})&&(this.l=i.setTimeout(this.qa.bind(this),1000*this.Qa));};j.nb=function(){this.da=false;null!=this.l&&(i.clearTimeout(this.l),this.l=null);};j.Ib=function(){var am=this.K,bm=this.ea.getBandwidth();am.estimatedBandwidth=bm;am.bandwidthHistory.push(new uj(bm));};function ul(am){if(am.fa){am.fa=false;am.b.playbackRate=am.$;var bm=xb({type:"streamresumed",bubbles:true});am.dispatchEvent(bm);}}j.qa=function(){this.da=false;ul(this);this.l=null;this.g.endOfStream();};function vl(am){return ec(am.f).map(function(bm){return bm.Za();}).filter(function(bm){return null!=bm;});}function wl(am,bm){for(var cm=0,dm=Number.POSITIVE_INFINITY,em=Number.POSITIVE_INFINITY,fm=0;fm<bm.length;++fm){var gm=bm[fm].Ba(),cm=Math.max(cm,gm.start);null!=gm.end&&(dm=Math.min(dm,gm.end));bm[fm].length()&&(em=Math.min(em,bm[fm].w().a));}if(dm==Number.POSITIVE_INFINITY)if(dm=am.a.a[0],dm.b){dm=(dm.start||0)+dm.b;}else return null;am.a.b&&(dm=Math.max(dm-am.a.c,cm));if(cm>dm)return null;dm=Math.floor(100000*dm)/100000;return {start:cm,end:dm,w:em};}function xl(am){am.a.b&&(am.T=i.setTimeout(am.zb.bind(am),1000));}function yl(am){for(var bm in am.f)am.f[bm].B(am.A);}j.Aa=function(){return this.xa;};xk.prototype.getLongestInitResponseTime=xk.prototype.Aa;function zl(am,bm,cm,dm){cm||(cm=new uc());dm||(dm=new vk());xk.call(this,null,cm,dm);"string"===typeof am?this.ib=am:this.Ra=am;this.Z=null;this.ba=bm;this.ta=[];this.Na=[];this.Oa=[];this.F=null;}m(zl,xk);l("shaka.player.DashVideoSource",zl);zl.prototype.jb=function(am,bm,cm){this.ta.push(am);this.Na.push(bm||"");this.Oa.push(cm||"");};zl.prototype.addExternalCaptions=zl.prototype.jb;zl.prototype.kb=function(am){this.F=am;};zl.prototype.setNetworkCallback=zl.prototype.kb;zl.prototype.destroy=function(){this.Z=this.F=this.ba=null;xk.prototype.destroy.call(this);};zl.prototype.Ia=function(){var am=dd(this,function(cm){this.Z=cm;for(var dm=0;dm<this.ta.length;dm++){var em=cm,fm=this.ta[dm],gm=this.Na[dm],hm=this.Oa[dm];if(0!==em.a.length){var im=new qf();im.contentType="text";im.lang=gm||"en";im.c=true;gm=new tf();gm.bandwidth=0;gm.f=hm||"text/vtt";gm.s=[new ye(fm)];im.a.push(gm);em.a[0].b.push(im);hg(em.a[0]);}}this.a=gj(new fj(this.ba),cm,this.F);return xk.prototype.Ia.call(this);});if(this.Ra)return am(this.Ra);var bm=[new ye(this.ib)],bm=new gh(this.F,bm);return mh(new lh(bm,this.wa)).then(am);};zl.prototype.ab=function(am){return mh(new lh(am,this.wa)).then(dd(this,function(bm){this.Z=bm;bm=gj(new fj(this.ba),bm,this.F);return Promise.resolve(bm);}));};zl.prototype.$a=function(){var am=gj(new fj(this.ba),this.Z,this.F);return Promise.resolve(am);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerShakaExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval||4000;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval||30000;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval||3000;i.BANDWIDTH_UPGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget||.85;i.BANDWIDTH_DOWNGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget||.95;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.forceHighQualityDefault;this.$CustomAbrManager10=j.initiallyForcedRepresentations;}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager11();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager12.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager13.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager14.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager14=function(){'use strict';this.$CustomAbrManager11();};i.prototype.forceHighQuality=function(j){'use strict';this.$CustomAbrManager9=j;if(!this.$CustomAbrManager6)return;if(j){var k=this.$CustomAbrManager15();if(k)this.selectVideoTrack(k,true);}else this.$CustomAbrManager11();};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager15();return j?j.id:null;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager16();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l);};i.$CustomAbrManager17=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager12=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager11(event);};i.prototype.$CustomAbrManager11=function(event){'use strict';if(!this.$CustomAbrManager5)return;var j=this.$CustomAbrManager15();if(j){if(j.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(j,false);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager13=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager15=function(){'use strict';var j=this.$CustomAbrManager2.getVideoTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(j[k].streamInfoID))return j[k];j.sort(h.compare);if(this.$CustomAbrManager9)return j.pop();var l=j[0],m=this.$CustomAbrManager8,n=this.$CustomAbrManager7;j=j.filter(function(v){return v.width<=n||v.height<=m;});var o=i.$CustomAbrManager17(this.$CustomAbrManager2.getAudioTracks()),p=o?o.bandwidth:0,q=this.$CustomAbrManager1.getBandwidth();for(var k=0;k<j.length;k++){var r=j[k],s=k+1<j.length?j[k+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!r.bandwidth)continue;var t=(r.bandwidth+p)/i.BANDWIDTH_DOWNGRADE_TARGET,u=(s.bandwidth+p)/i.BANDWIDTH_UPGRADE_TARGET;if(q>=t&&q<=u){l=r;if(l.active)break;}}return l;};i.prototype.$CustomAbrManager16=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(j[k].streamInfoID))return j[k];return null;};f.exports=i;},null);
__d('VideoPlayerHTML5Shaka',['invariant','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','VideoDashPrefetchCache','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=c('VideoPlayerShakaExperiments').enableAdaptation?new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined):new r();s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.pop().id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa=ea.width,ga=ea.height,ha=ea.manifest,ia=ea.manifestUrl,ja=ea.playHighQualityTrack;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=ja;this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=fa;this.$VideoPlayerHTML5Shaka5=ga;this.$VideoPlayerHTML5Shaka6=true;var ka=c('EventListener').listen(ca,'playing',function(){this.$VideoPlayerHTML5Shaka6=false;ka.remove();}.bind(this));this.$VideoPlayerHTML5Shaka7=new l(ca);this.$VideoPlayerHTML5Shaka7.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka8();}.bind(this));this.$VideoPlayerHTML5Shaka7.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka9();}.bind(this));this.$VideoPlayerHTML5Shaka7.addEventListener('error',function(la){return this.$VideoPlayerHTML5Shaka10(la);}.bind(this));this.$VideoPlayerHTML5Shaka7.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka11.bind(this));this.$VideoPlayerHTML5Shaka7.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka12.bind(this));this.$VideoPlayerHTML5Shaka7.addEventListener('streaminterrupted',this.$VideoPlayerHTML5Shaka13.bind(this));this.$VideoPlayerHTML5Shaka7.addEventListener('streamresumed',this.$VideoPlayerHTML5Shaka14.bind(this));this.$VideoPlayerHTML5Shaka15=da;if(ha){this.$VideoPlayerHTML5Shaka16=o(ha);}else this.$VideoPlayerHTML5Shaka16=ia;this.$VideoPlayerHTML5Shaka17=this.$VideoPlayerHTML5Shaka18();this.$VideoPlayerHTML5Shaka19=this.$VideoPlayerHTML5Shaka20();this.$VideoPlayerHTML5Shaka21=ca;this.$VideoPlayerHTML5Shaka7.configure({enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,streamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection});this.$VideoPlayerHTML5Shaka7.load(this.$VideoPlayerHTML5Shaka19);}ba.prototype.selectHighestQualityTrack=function(){'use strict';if(c('VideoPlayerShakaExperiments').enableAdaptation){this.$VideoPlayerHTML5Shaka1=true;this.$VideoPlayerHTML5Shaka17.forceHighQuality(true);return;}this.$VideoPlayerHTML5Shaka7.selectVideoTrack(w(this.$VideoPlayerHTML5Shaka7),true);};ba.prototype.selectLowestQualityTrack=function(){'use strict';if(c('VideoPlayerShakaExperiments').enableAdaptation){this.$VideoPlayerHTML5Shaka1=false;this.$VideoPlayerHTML5Shaka17.forceHighQuality(false);return;}this.$VideoPlayerHTML5Shaka7.selectVideoTrack(x(this.$VideoPlayerHTML5Shaka7),false);};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka22){this.$VideoPlayerHTML5Shaka23=true;this.$VideoPlayerHTML5Shaka24=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka21,'pause');this.$VideoPlayerHTML5Shaka7.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka21.pause();};ba.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka22){this.$VideoPlayerHTML5Shaka23=false;this.$VideoPlayerHTML5Shaka24=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka21,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka21,'waiting');this.$VideoPlayerHTML5Shaka7.setResumeAfterBuffering(true);}else this.$VideoPlayerHTML5Shaka21.play();};ba.prototype.$VideoPlayerHTML5Shaka8=function(){'use strict';z(this.$VideoPlayerHTML5Shaka21,'pause');this.$VideoPlayerHTML5Shaka22=true;this.$VideoPlayerHTML5Shaka23=false;this.$VideoPlayerHTML5Shaka24=false;this.$VideoPlayerHTML5Shaka7.setResumeAfterBuffering(true);this.emit('bufferingStart');};ba.prototype.$VideoPlayerHTML5Shaka9=function(){var ca=this;'use strict';if(!this.$VideoPlayerHTML5Shaka23)z(this.$VideoPlayerHTML5Shaka21,'play');if(!this.$VideoPlayerHTML5Shaka24)(function(){var da=c('EventListener').capture(ca.$VideoPlayerHTML5Shaka21.parentNode,'playing',function(ea){if(ea.target!=this.$VideoPlayerHTML5Shaka21)return;da.remove();if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka6=false;return;}c('Event').kill(ea);}.bind(ca));})();this.$VideoPlayerHTML5Shaka22=false;this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka10=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined',fa=da.message;if(this.$VideoPlayerHTML5Shaka3&&this.$VideoPlayerHTML5Shaka2&&ea=='net')return;this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:fa});};ba.prototype.hasSelectableVideoTracks=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka7.getVideoTracks();return ca.length>1;};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka3=this.$VideoPlayerHTML5Shaka19&&this.$VideoPlayerHTML5Shaka19.isLive();this.$VideoPlayerHTML5Shaka7.unload();this.$VideoPlayerHTML5Shaka2=true;};ba.prototype.$VideoPlayerHTML5Shaka18=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka1,da={forceHighQualityDefault:ca,maxWidth:this.$VideoPlayerHTML5Shaka25(),maxHeight:this.$VideoPlayerHTML5Shaka26(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka15};return c('VideoPlayerShakaExperiments').enableAdaptation?new (c('CustomAbrManager'))(da):new aa(ca,c('VideoPlayerShakaExperiments').switchFromLowQuality);};ba.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';!this.$VideoPlayerHTML5Shaka17?h(0):void 0;!this.$VideoPlayerHTML5Shaka16?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka16,null,v,this.$VideoPlayerHTML5Shaka17);return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka2)return;this.$VideoPlayerHTML5Shaka17=this.$VideoPlayerHTML5Shaka18();this.$VideoPlayerHTML5Shaka19=this.$VideoPlayerHTML5Shaka20();return this.$VideoPlayerHTML5Shaka7.load(this.$VideoPlayerHTML5Shaka19).then(function(){if(this.$VideoPlayerHTML5Shaka3!=this.$VideoPlayerHTML5Shaka19.isLive())return this.$VideoPlayerHTML5Shaka27();this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka21.currentTime=ca;}.bind(this))['catch'](function(da){if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka27();}.bind(this));};ba.prototype.$VideoPlayerHTML5Shaka27=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka21,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka21,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka21,'ended');this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka19.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka28=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka25=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka4*ba.$VideoPlayerHTML5Shaka28();};ba.prototype.$VideoPlayerHTML5Shaka26=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka5*ba.$VideoPlayerHTML5Shaka28();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka4=ca;this.$VideoPlayerHTML5Shaka5=da;this.$VideoPlayerHTML5Shaka17.setResolutionConstraint(this.$VideoPlayerHTML5Shaka25(),this.$VideoPlayerHTML5Shaka26());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka12=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka11=function(){'use strict';this.emit('adaptation');};ba.prototype.$VideoPlayerHTML5Shaka13=function(){'use strict';this.emit('streamInterrupted');};ba.prototype.$VideoPlayerHTML5Shaka14=function(){'use strict';this.emit('streamResumed');};f.exports=ba;},null);